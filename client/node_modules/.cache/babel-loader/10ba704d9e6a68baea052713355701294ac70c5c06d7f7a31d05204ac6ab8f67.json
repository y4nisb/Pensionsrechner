{"ast":null,"code":"\"use strict\";\n\nfunction noop() {}\nfunction once(emitter, name) {\n  const o = once.spread(emitter, name);\n  const r = o.then(args => args[0]);\n  r.cancel = o.cancel;\n  return r;\n}\n(function (once) {\n  function spread(emitter, name) {\n    let c = null;\n    const p = new Promise((resolve, reject) => {\n      function cancel() {\n        emitter.removeListener(name, onEvent);\n        emitter.removeListener('error', onError);\n        p.cancel = noop;\n      }\n      function onEvent() {\n        cancel();\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n        resolve(args);\n      }\n      function onError(err) {\n        cancel();\n        reject(err);\n      }\n      c = cancel;\n      emitter.on(name, onEvent);\n      emitter.on('error', onError);\n    });\n    if (!c) {\n      throw new TypeError('Could not get `cancel()` function');\n    }\n    p.cancel = c;\n    return p;\n  }\n  once.spread = spread;\n})(once || (once = {}));\nmodule.exports = once;","map":{"version":3,"names":["noop","once","emitter","name","o","spread","r","then","args","cancel","c","p","Promise","resolve","reject","removeListener","onEvent","onError","_len","arguments","length","Array","_key","err","on","TypeError","module","exports"],"sources":["../src/index.ts"],"sourcesContent":[null],"mappings":";;AAEA,SAASA,IAAIA,CAAA,GAAI;AAEjB,SAASC,IAAIA,CACZC,OAAqB,EACrBC,IAAY;EAEZ,MAAMC,CAAC,GAAGH,IAAI,CAACI,MAAM,CAAMH,OAAO,EAAEC,IAAI,CAAC;EACzC,MAAMG,CAAC,GAAGF,CAAC,CAACG,IAAI,CAAEC,IAAS,IAAKA,IAAI,CAAC,CAAC,CAAC,CAA8B;EACrEF,CAAC,CAACG,MAAM,GAAGL,CAAC,CAACK,MAAM;EACnB,OAAOH,CAAC;AACT;AAEA,WAAUL,IAAI;EAWb,SAAgBI,MAAMA,CACrBH,OAAqB,EACrBC,IAAY;IAEZ,IAAIO,CAAC,GAA+B,IAAI;IACxC,MAAMC,CAAC,GAAG,IAAIC,OAAO,CAAI,CAACC,OAAO,EAAEC,MAAM,KAAI;MAC5C,SAASL,MAAMA,CAAA;QACdP,OAAO,CAACa,cAAc,CAACZ,IAAI,EAAEa,OAAO,CAAC;QACrCd,OAAO,CAACa,cAAc,CAAC,OAAO,EAAEE,OAAO,CAAC;QACxCN,CAAC,CAACF,MAAM,GAAGT,IAAI;MAChB;MACA,SAASgB,OAAOA,CAAA,EAAe;QAC9BP,MAAM,EAAE;QAAC,SAAAS,IAAA,GAAAC,SAAA,CAAAC,MAAA,EADUZ,IAAW,OAAAa,KAAA,CAAAH,IAAA,GAAAI,IAAA,MAAAA,IAAA,GAAAJ,IAAA,EAAAI,IAAA;UAAXd,IAAW,CAAAc,IAAA,IAAAH,SAAA,CAAAG,IAAA;QAAA;QAE9BT,OAAO,CAACL,IAAS,CAAC;MACnB;MACA,SAASS,OAAOA,CAACM,GAAU;QAC1Bd,MAAM,EAAE;QACRK,MAAM,CAACS,GAAG,CAAC;MACZ;MACAb,CAAC,GAAGD,MAAM;MACVP,OAAO,CAACsB,EAAE,CAACrB,IAAI,EAAEa,OAAO,CAAC;MACzBd,OAAO,CAACsB,EAAE,CAAC,OAAO,EAAEP,OAAO,CAAC;IAC7B,CAAC,CAA8B;IAC/B,IAAI,CAACP,CAAC,EAAE;MACP,MAAM,IAAIe,SAAS,CAAC,mCAAmC,CAAC;;IAEzDd,CAAC,CAACF,MAAM,GAAGC,CAAC;IACZ,OAAOC,CAAC;EACT;EA5BgBV,IAAA,CAAAI,MAAM,GAAAA,MA4BrB;AACF,CAAC,EAxCSJ,IAAI,KAAJA,IAAI;AA0CdyB,MAAA,CAAAC,OAAA,GAAS1B,IAAI"},"metadata":{},"sourceType":"script","externalDependencies":[]}