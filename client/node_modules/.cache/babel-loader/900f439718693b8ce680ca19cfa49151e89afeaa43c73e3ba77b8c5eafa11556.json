{"ast":null,"code":"\"use strict\";\n\nconst HTMLElementImpl = require(\"./HTMLElement-impl\").implementation;\nconst {\n  removeStylesheet,\n  createStylesheet\n} = require(\"../helpers/stylesheets\");\nconst {\n  documentBaseURL\n} = require(\"../helpers/document-base-url\");\nconst {\n  childTextContent\n} = require(\"../helpers/text\");\nconst {\n  asciiCaseInsensitiveMatch\n} = require(\"../helpers/strings\");\nclass HTMLStyleElementImpl extends HTMLElementImpl {\n  constructor(globalObject, args, privateData) {\n    super(globalObject, args, privateData);\n    this.sheet = null;\n    this._isOnStackOfOpenElements = false;\n  }\n  _attach() {\n    super._attach();\n    if (!this._isOnStackOfOpenElements) {\n      this._updateAStyleBlock();\n    }\n  }\n  _detach() {\n    super._detach();\n    if (!this._isOnStackOfOpenElements) {\n      this._updateAStyleBlock();\n    }\n  }\n  _childTextContentChangeSteps() {\n    super._childTextContentChangeSteps();\n\n    // This guard is not required by the spec, but should be unobservable (since you can't run script during the middle\n    // of parsing a <style> element) and saves a bunch of unnecessary work.\n    if (!this._isOnStackOfOpenElements) {\n      this._updateAStyleBlock();\n    }\n  }\n  _poppedOffStackOfOpenElements() {\n    this._isOnStackOfOpenElements = false;\n    this._updateAStyleBlock();\n  }\n  _pushedOnStackOfOpenElements() {\n    this._isOnStackOfOpenElements = true;\n  }\n  _updateAStyleBlock() {\n    if (this.sheet) {\n      removeStylesheet(this.sheet, this);\n    }\n\n    // Browsing-context connected, per https://github.com/whatwg/html/issues/4547\n    if (!this.isConnected || !this._ownerDocument._defaultView) {\n      return;\n    }\n    const type = this.getAttributeNS(null, \"type\");\n    if (type !== null && type !== \"\" && !asciiCaseInsensitiveMatch(type, \"text/css\")) {\n      return;\n    }\n\n    // Not implemented: CSP\n\n    const content = childTextContent(this);\n    // Not implemented: a bunch of other state, e.g. title/media attributes\n    createStylesheet(content, this, documentBaseURL(this._ownerDocument));\n  }\n}\nmodule.exports = {\n  implementation: HTMLStyleElementImpl\n};","map":{"version":3,"names":["HTMLElementImpl","require","implementation","removeStylesheet","createStylesheet","documentBaseURL","childTextContent","asciiCaseInsensitiveMatch","HTMLStyleElementImpl","constructor","globalObject","args","privateData","sheet","_isOnStackOfOpenElements","_attach","_updateAStyleBlock","_detach","_childTextContentChangeSteps","_poppedOffStackOfOpenElements","_pushedOnStackOfOpenElements","isConnected","_ownerDocument","_defaultView","type","getAttributeNS","content","module","exports"],"sources":["C:/Users/noodp/Documents/GitHub/Pensionsrechner/client/node_modules/jsdom/lib/jsdom/living/nodes/HTMLStyleElement-impl.js"],"sourcesContent":["\"use strict\";\r\nconst HTMLElementImpl = require(\"./HTMLElement-impl\").implementation;\r\nconst { removeStylesheet, createStylesheet } = require(\"../helpers/stylesheets\");\r\nconst { documentBaseURL } = require(\"../helpers/document-base-url\");\r\nconst { childTextContent } = require(\"../helpers/text\");\r\nconst { asciiCaseInsensitiveMatch } = require(\"../helpers/strings\");\r\n\r\nclass HTMLStyleElementImpl extends HTMLElementImpl {\r\n  constructor(globalObject, args, privateData) {\r\n    super(globalObject, args, privateData);\r\n\r\n    this.sheet = null;\r\n    this._isOnStackOfOpenElements = false;\r\n  }\r\n\r\n  _attach() {\r\n    super._attach();\r\n    if (!this._isOnStackOfOpenElements) {\r\n      this._updateAStyleBlock();\r\n    }\r\n  }\r\n\r\n  _detach() {\r\n    super._detach();\r\n    if (!this._isOnStackOfOpenElements) {\r\n      this._updateAStyleBlock();\r\n    }\r\n  }\r\n\r\n  _childTextContentChangeSteps() {\r\n    super._childTextContentChangeSteps();\r\n\r\n    // This guard is not required by the spec, but should be unobservable (since you can't run script during the middle\r\n    // of parsing a <style> element) and saves a bunch of unnecessary work.\r\n    if (!this._isOnStackOfOpenElements) {\r\n      this._updateAStyleBlock();\r\n    }\r\n  }\r\n\r\n  _poppedOffStackOfOpenElements() {\r\n    this._isOnStackOfOpenElements = false;\r\n    this._updateAStyleBlock();\r\n  }\r\n\r\n  _pushedOnStackOfOpenElements() {\r\n    this._isOnStackOfOpenElements = true;\r\n  }\r\n\r\n  _updateAStyleBlock() {\r\n    if (this.sheet) {\r\n      removeStylesheet(this.sheet, this);\r\n    }\r\n\r\n    // Browsing-context connected, per https://github.com/whatwg/html/issues/4547\r\n    if (!this.isConnected || !this._ownerDocument._defaultView) {\r\n      return;\r\n    }\r\n\r\n    const type = this.getAttributeNS(null, \"type\");\r\n    if (type !== null && type !== \"\" && !asciiCaseInsensitiveMatch(type, \"text/css\")) {\r\n      return;\r\n    }\r\n\r\n    // Not implemented: CSP\r\n\r\n    const content = childTextContent(this);\r\n    // Not implemented: a bunch of other state, e.g. title/media attributes\r\n    createStylesheet(content, this, documentBaseURL(this._ownerDocument));\r\n  }\r\n}\r\n\r\nmodule.exports = {\r\n  implementation: HTMLStyleElementImpl\r\n};\r\n"],"mappings":"AAAA,YAAY;;AACZ,MAAMA,eAAe,GAAGC,OAAO,CAAC,oBAAoB,CAAC,CAACC,cAAc;AACpE,MAAM;EAAEC,gBAAgB;EAAEC;AAAiB,CAAC,GAAGH,OAAO,CAAC,wBAAwB,CAAC;AAChF,MAAM;EAAEI;AAAgB,CAAC,GAAGJ,OAAO,CAAC,8BAA8B,CAAC;AACnE,MAAM;EAAEK;AAAiB,CAAC,GAAGL,OAAO,CAAC,iBAAiB,CAAC;AACvD,MAAM;EAAEM;AAA0B,CAAC,GAAGN,OAAO,CAAC,oBAAoB,CAAC;AAEnE,MAAMO,oBAAoB,SAASR,eAAe,CAAC;EACjDS,WAAWA,CAACC,YAAY,EAAEC,IAAI,EAAEC,WAAW,EAAE;IAC3C,KAAK,CAACF,YAAY,EAAEC,IAAI,EAAEC,WAAW,CAAC;IAEtC,IAAI,CAACC,KAAK,GAAG,IAAI;IACjB,IAAI,CAACC,wBAAwB,GAAG,KAAK;EACvC;EAEAC,OAAOA,CAAA,EAAG;IACR,KAAK,CAACA,OAAO,EAAE;IACf,IAAI,CAAC,IAAI,CAACD,wBAAwB,EAAE;MAClC,IAAI,CAACE,kBAAkB,EAAE;IAC3B;EACF;EAEAC,OAAOA,CAAA,EAAG;IACR,KAAK,CAACA,OAAO,EAAE;IACf,IAAI,CAAC,IAAI,CAACH,wBAAwB,EAAE;MAClC,IAAI,CAACE,kBAAkB,EAAE;IAC3B;EACF;EAEAE,4BAA4BA,CAAA,EAAG;IAC7B,KAAK,CAACA,4BAA4B,EAAE;;IAEpC;IACA;IACA,IAAI,CAAC,IAAI,CAACJ,wBAAwB,EAAE;MAClC,IAAI,CAACE,kBAAkB,EAAE;IAC3B;EACF;EAEAG,6BAA6BA,CAAA,EAAG;IAC9B,IAAI,CAACL,wBAAwB,GAAG,KAAK;IACrC,IAAI,CAACE,kBAAkB,EAAE;EAC3B;EAEAI,4BAA4BA,CAAA,EAAG;IAC7B,IAAI,CAACN,wBAAwB,GAAG,IAAI;EACtC;EAEAE,kBAAkBA,CAAA,EAAG;IACnB,IAAI,IAAI,CAACH,KAAK,EAAE;MACdV,gBAAgB,CAAC,IAAI,CAACU,KAAK,EAAE,IAAI,CAAC;IACpC;;IAEA;IACA,IAAI,CAAC,IAAI,CAACQ,WAAW,IAAI,CAAC,IAAI,CAACC,cAAc,CAACC,YAAY,EAAE;MAC1D;IACF;IAEA,MAAMC,IAAI,GAAG,IAAI,CAACC,cAAc,CAAC,IAAI,EAAE,MAAM,CAAC;IAC9C,IAAID,IAAI,KAAK,IAAI,IAAIA,IAAI,KAAK,EAAE,IAAI,CAACjB,yBAAyB,CAACiB,IAAI,EAAE,UAAU,CAAC,EAAE;MAChF;IACF;;IAEA;;IAEA,MAAME,OAAO,GAAGpB,gBAAgB,CAAC,IAAI,CAAC;IACtC;IACAF,gBAAgB,CAACsB,OAAO,EAAE,IAAI,EAAErB,eAAe,CAAC,IAAI,CAACiB,cAAc,CAAC,CAAC;EACvE;AACF;AAEAK,MAAM,CAACC,OAAO,GAAG;EACf1B,cAAc,EAAEM;AAClB,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}