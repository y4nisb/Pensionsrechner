{"ast":null,"code":"\"use strict\";\n\nconst DOMException = require(\"domexception/webidl2js-wrapper\");\nconst FileList = require(\"../generated/FileList\");\nconst Decimal = require(\"decimal.js\");\nconst HTMLElementImpl = require(\"./HTMLElement-impl\").implementation;\nconst idlUtils = require(\"../generated/utils\");\nconst DefaultConstraintValidationImpl = require(\"../constraint-validation/DefaultConstraintValidation-impl\").implementation;\nconst ValidityState = require(\"../generated/ValidityState\");\nconst {\n  mixin\n} = require(\"../../utils\");\nconst {\n  domSymbolTree,\n  cloningSteps\n} = require(\"../helpers/internal-constants\");\nconst {\n  getLabelsForLabelable,\n  formOwner\n} = require(\"../helpers/form-controls\");\nconst {\n  fireAnEvent\n} = require(\"../helpers/events\");\nconst {\n  isDisabled,\n  isValidEmailAddress,\n  isValidAbsoluteURL,\n  sanitizeValueByType\n} = require(\"../helpers/form-controls\");\nconst {\n  asciiCaseInsensitiveMatch,\n  asciiLowercase,\n  parseFloatingPointNumber,\n  splitOnCommas\n} = require(\"../helpers/strings\");\nconst {\n  isDate\n} = require(\"../helpers/dates-and-times\");\nconst {\n  convertStringToNumberByType,\n  convertStringToDateByType,\n  serializeDateByType,\n  convertNumberToStringByType\n} = require(\"../helpers/number-and-date-inputs\");\nconst filesSymbol = Symbol(\"files\");\n\n// https://html.spec.whatwg.org/multipage/input.html#attr-input-type\nconst inputAllowedTypes = new Set([\"hidden\", \"text\", \"search\", \"tel\", \"url\", \"email\", \"password\", \"date\", \"month\", \"week\", \"time\", \"datetime-local\", \"number\", \"range\", \"color\", \"checkbox\", \"radio\", \"file\", \"submit\", \"image\", \"reset\", \"button\"]);\n\n// https://html.spec.whatwg.org/multipage/input.html#concept-input-apply\n\nconst variableLengthSelectionAllowedTypes = new Set([\"text\", \"search\", \"url\", \"tel\", \"password\"]);\nconst numericTypes = new Set([\"date\", \"month\", \"week\", \"time\", \"datetime-local\", \"number\", \"range\"]);\nconst applicableTypesForIDLMember = {\n  valueAsDate: new Set([\"date\", \"month\", \"week\", \"time\"]),\n  valueAsNumber: numericTypes,\n  select: new Set([\"text\", \"search\", \"url\", \"tel\", \"email\", \"password\", \"date\", \"month\", \"week\", \"time\", \"datetime-local\", \"number\", \"color\", \"file\"]),\n  selectionStart: variableLengthSelectionAllowedTypes,\n  selectionEnd: variableLengthSelectionAllowedTypes,\n  selectionDirection: variableLengthSelectionAllowedTypes,\n  setRangeText: variableLengthSelectionAllowedTypes,\n  setSelectionRange: variableLengthSelectionAllowedTypes,\n  stepDown: numericTypes,\n  stepUp: numericTypes\n};\nconst lengthPatternSizeTypes = new Set([\"text\", \"search\", \"url\", \"tel\", \"email\", \"password\"]);\nconst readonlyTypes = new Set([...lengthPatternSizeTypes, \"date\", \"month\", \"week\", \"time\", \"datetime-local\", \"number\"]);\nconst applicableTypesForContentAttribute = {\n  list: new Set([\"text\", \"search\", \"url\", \"tel\", \"email\", ...numericTypes, \"color\"]),\n  max: numericTypes,\n  maxlength: lengthPatternSizeTypes,\n  min: numericTypes,\n  minlength: lengthPatternSizeTypes,\n  multiple: new Set([\"email\", \"file\"]),\n  pattern: lengthPatternSizeTypes,\n  readonly: readonlyTypes,\n  required: new Set([...readonlyTypes, \"checkbox\", \"radio\", \"file\"]),\n  step: numericTypes\n};\nconst valueAttributeDefaultMode = new Set([\"hidden\", \"submit\", \"image\", \"reset\", \"button\"]);\nconst valueAttributeDefaultOnMode = new Set([\"checkbox\", \"radio\"]);\nfunction valueAttributeMode(type) {\n  if (valueAttributeDefaultMode.has(type)) {\n    return \"default\";\n  }\n  if (valueAttributeDefaultOnMode.has(type)) {\n    return \"default/on\";\n  }\n  if (type === \"file\") {\n    return \"filename\";\n  }\n  return \"value\";\n}\nfunction getTypeFromAttribute(typeAttribute) {\n  if (typeof typeAttribute !== \"string\") {\n    return \"text\";\n  }\n  const type = asciiLowercase(typeAttribute);\n  return inputAllowedTypes.has(type) ? type : \"text\";\n}\nclass HTMLInputElementImpl extends HTMLElementImpl {\n  constructor(globalObject, args, privateData) {\n    super(globalObject, args, privateData);\n    this._selectionStart = this._selectionEnd = 0;\n    this._selectionDirection = \"none\";\n    this._value = \"\";\n    this._dirtyValue = false;\n    this._checkedness = false;\n    this._dirtyCheckedness = false;\n    this._preCheckedRadioState = null;\n    this._legacyActivationBehaviorPreviousIndeterminateState = false;\n    this.indeterminate = false;\n    this._customValidityErrorMessage = \"\";\n    this._labels = null;\n    this._hasActivationBehavior = true;\n  }\n\n  // https://html.spec.whatwg.org/multipage/input.html#concept-input-value-string-number\n  get _convertStringToNumber() {\n    return convertStringToNumberByType[this.type];\n  }\n  get _convertNumberToString() {\n    return convertNumberToStringByType[this.type];\n  }\n  get _convertDateToString() {\n    return serializeDateByType[this.type];\n  }\n  get _convertStringToDate() {\n    return convertStringToDateByType[this.type];\n  }\n  _isStepAligned(v) {\n    return new Decimal(v).minus(this._stepBase).modulo(this._allowedValueStep).isZero();\n  }\n\n  // Returns a Decimal.\n  _stepAlign(v, roundUp) {\n    const allowedValueStep = this._allowedValueStep;\n    const stepBase = this._stepBase;\n    return new Decimal(v).minus(stepBase).toNearest(allowedValueStep, roundUp ? Decimal.ROUND_UP : Decimal.ROUND_DOWN).add(stepBase);\n  }\n\n  // For <input>, https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#concept-fe-value\n  // is a simple value that is gotten and set, not computed.\n  _getValue() {\n    return this._value;\n  }\n  _legacyPreActivationBehavior() {\n    if (this.type === \"checkbox\") {\n      this.checked = !this.checked;\n      this._legacyActivationBehaviorPreviousIndeterminateState = this.indeterminate;\n      this.indeterminate = false;\n    } else if (this.type === \"radio\") {\n      this._preCheckedRadioState = this.checked;\n      this.checked = true;\n    }\n  }\n  _legacyCanceledActivationBehavior() {\n    if (this.type === \"checkbox\") {\n      this.checked = !this.checked;\n      this.indeterminate = this._legacyActivationBehaviorPreviousIndeterminateState;\n    } else if (this.type === \"radio\") {\n      if (this._preCheckedRadioState !== null) {\n        this.checked = this._preCheckedRadioState;\n        this._preCheckedRadioState = null;\n      }\n    }\n  }\n  _activationBehavior() {\n    if (!this._mutable && this.type !== \"checkbox\" && this.type !== \"radio\") {\n      return;\n    }\n    const {\n      form\n    } = this;\n    if (this.type === \"checkbox\" || this.type === \"radio\" && !this._preCheckedRadioState) {\n      if (this.isConnected) {\n        fireAnEvent(\"input\", this, undefined, {\n          bubbles: true\n        });\n        fireAnEvent(\"change\", this, undefined, {\n          bubbles: true\n        });\n      }\n    } else if (form && this.type === \"submit\") {\n      form._doSubmit();\n    } else if (form && this.type === \"reset\") {\n      form._doReset();\n    }\n  }\n  _attrModified(name, value, oldVal) {\n    const wrapper = idlUtils.wrapperForImpl(this);\n    if (!this._dirtyValue && name === \"value\") {\n      this._value = sanitizeValueByType(this, wrapper.defaultValue);\n    }\n    if (!this._dirtyCheckedness && name === \"checked\") {\n      this._checkedness = wrapper.defaultChecked;\n      if (this._checkedness) {\n        this._removeOtherRadioCheckedness();\n      }\n    }\n    if (name === \"name\" || name === \"type\") {\n      if (this._checkedness) {\n        this._removeOtherRadioCheckedness();\n      }\n    }\n    if (name === \"type\") {\n      const prevType = getTypeFromAttribute(oldVal);\n      const curType = getTypeFromAttribute(value);\n      // When an input element's type attribute changes stateâ€¦\n      if (prevType !== curType) {\n        const prevValueMode = valueAttributeMode(prevType);\n        const curValueMode = valueAttributeMode(curType);\n        if (prevValueMode === \"value\" && this._value !== \"\" && (curValueMode === \"default\" || curValueMode === \"default/on\")) {\n          this.setAttributeNS(null, \"value\", this._value);\n        } else if (prevValueMode !== \"value\" && curValueMode === \"value\") {\n          this._value = this.getAttributeNS(null, \"value\") || \"\";\n          this._dirtyValue = false;\n        } else if (prevValueMode !== \"filename\" && curValueMode === \"filename\") {\n          this._value = \"\";\n        }\n        this._signalATypeChange();\n        this._value = sanitizeValueByType(this, this._value);\n        const previouslySelectable = this._idlMemberApplies(\"setRangeText\", prevType);\n        const nowSelectable = this._idlMemberApplies(\"setRangeText\", curType);\n        if (!previouslySelectable && nowSelectable) {\n          this._selectionStart = 0;\n          this._selectionEnd = 0;\n          this._selectionDirection = \"none\";\n        }\n      }\n    }\n    super._attrModified(name, value, oldVal);\n  }\n\n  // https://html.spec.whatwg.org/multipage/input.html#signal-a-type-change\n  _signalATypeChange() {\n    if (this._checkedness) {\n      this._removeOtherRadioCheckedness();\n    }\n  }\n  _formReset() {\n    const wrapper = idlUtils.wrapperForImpl(this);\n    this._value = sanitizeValueByType(this, wrapper.defaultValue);\n    this._dirtyValue = false;\n    this._checkedness = wrapper.defaultChecked;\n    this._dirtyCheckedness = false;\n    if (this._checkedness) {\n      this._removeOtherRadioCheckedness();\n    }\n  }\n  _changedFormOwner() {\n    if (this._checkedness) {\n      this._removeOtherRadioCheckedness();\n    }\n  }\n  get _otherRadioGroupElements() {\n    const wrapper = idlUtils.wrapperForImpl(this);\n    const root = this._radioButtonGroupRoot;\n    if (!root) {\n      return [];\n    }\n    const result = [];\n    const descendants = domSymbolTree.treeIterator(root);\n    for (const candidate of descendants) {\n      if (candidate._radioButtonGroupRoot !== root) {\n        continue;\n      }\n      const candidateWrapper = idlUtils.wrapperForImpl(candidate);\n      if (!candidateWrapper.name || candidateWrapper.name !== wrapper.name) {\n        continue;\n      }\n      if (candidate !== this) {\n        result.push(candidate);\n      }\n    }\n    return result;\n  }\n  _removeOtherRadioCheckedness() {\n    for (const radioGroupElement of this._otherRadioGroupElements) {\n      radioGroupElement._checkedness = false;\n    }\n  }\n  get _radioButtonGroupRoot() {\n    const wrapper = idlUtils.wrapperForImpl(this);\n    if (this.type !== \"radio\" || !wrapper.name) {\n      return null;\n    }\n    let e = domSymbolTree.parent(this);\n    while (e) {\n      // root node of this home sub tree\n      // or the form element we belong to\n      if (!domSymbolTree.parent(e) || e.nodeName.toUpperCase() === \"FORM\") {\n        return e;\n      }\n      e = domSymbolTree.parent(e);\n    }\n    return null;\n  }\n  _someInRadioGroup(name) {\n    if (this[name]) {\n      return true;\n    }\n    return this._otherRadioGroupElements.some(radioGroupElement => radioGroupElement[name]);\n  }\n  get _mutable() {\n    return !isDisabled(this) && !this._hasAttributeAndApplies(\"readonly\");\n  }\n  get labels() {\n    return getLabelsForLabelable(this);\n  }\n  get form() {\n    return formOwner(this);\n  }\n  get checked() {\n    return this._checkedness;\n  }\n  set checked(checked) {\n    this._checkedness = Boolean(checked);\n    this._dirtyCheckedness = true;\n    if (this._checkedness) {\n      this._removeOtherRadioCheckedness();\n    }\n  }\n  get value() {\n    switch (valueAttributeMode(this.type)) {\n      // https://html.spec.whatwg.org/multipage/input.html#dom-input-value-value\n      case \"value\":\n        return this._getValue();\n      // https://html.spec.whatwg.org/multipage/input.html#dom-input-value-default\n      case \"default\":\n        {\n          const attr = this.getAttributeNS(null, \"value\");\n          return attr !== null ? attr : \"\";\n        }\n      // https://html.spec.whatwg.org/multipage/input.html#dom-input-value-default-on\n      case \"default/on\":\n        {\n          const attr = this.getAttributeNS(null, \"value\");\n          return attr !== null ? attr : \"on\";\n        }\n      // https://html.spec.whatwg.org/multipage/input.html#dom-input-value-filename\n      case \"filename\":\n        return this.files.length ? \"C:\\\\fakepath\\\\\" + this.files[0].name : \"\";\n      default:\n        throw new Error(\"jsdom internal error: unknown value attribute mode\");\n    }\n  }\n  set value(val) {\n    switch (valueAttributeMode(this.type)) {\n      // https://html.spec.whatwg.org/multipage/input.html#dom-input-value-value\n      case \"value\":\n        {\n          const oldValue = this._value;\n          this._value = sanitizeValueByType(this, val);\n          this._dirtyValue = true;\n          if (oldValue !== this._value) {\n            this._selectionStart = this._selectionEnd = this._getValueLength();\n            this._selectionDirection = \"none\";\n          }\n          break;\n        }\n\n      // https://html.spec.whatwg.org/multipage/input.html#dom-input-value-default\n      // https://html.spec.whatwg.org/multipage/input.html#dom-input-value-default-on\n      case \"default\":\n      case \"default/on\":\n        this.setAttributeNS(null, \"value\", val);\n        break;\n\n      // https://html.spec.whatwg.org/multipage/input.html#dom-input-value-filename\n      case \"filename\":\n        if (val === \"\") {\n          this.files.length = 0;\n        } else {\n          throw DOMException.create(this._globalObject, [\"This input element accepts a filename, which may only be programmatically set to the empty string.\", \"InvalidStateError\"]);\n        }\n        break;\n      default:\n        throw new Error(\"jsdom internal error: unknown value attribute mode\");\n    }\n  }\n\n  // https://html.spec.whatwg.org/multipage/input.html#dom-input-valueasdate\n  get valueAsDate() {\n    if (!this._idlMemberApplies(\"valueAsDate\")) {\n      return null;\n    }\n    const window = this._ownerDocument._defaultView;\n    const convertedValue = this._convertStringToDate(this._value);\n    if (convertedValue instanceof Date) {\n      return new window.Date(convertedValue.getTime());\n    }\n    return null;\n  }\n  set valueAsDate(v) {\n    if (!this._idlMemberApplies(\"valueAsDate\")) {\n      throw DOMException.create(this._globalObject, [\"Failed to set the 'valueAsDate' property on 'HTMLInputElement': This input element does not support Date \" + \"values.\", \"InvalidStateError\"]);\n    }\n    if (v !== null && !isDate(v)) {\n      throw new TypeError(\"Failed to set the 'valueAsDate' property on 'HTMLInputElement': The provided value is \" + \"not a Date.\");\n    }\n    if (v === null || isNaN(v)) {\n      this._value = \"\";\n    }\n    this._value = this._convertDateToString(v);\n  }\n\n  // https://html.spec.whatwg.org/multipage/input.html#dom-input-valueasnumber\n  get valueAsNumber() {\n    if (!this._idlMemberApplies(\"valueAsNumber\")) {\n      return NaN;\n    }\n    const parsedValue = this._convertStringToNumber(this._value);\n    return parsedValue !== null ? parsedValue : NaN;\n  }\n  set valueAsNumber(v) {\n    if (!isFinite(v)) {\n      throw new TypeError(\"Failed to set infinite value as Number\");\n    }\n    if (!this._idlMemberApplies(\"valueAsNumber\")) {\n      throw DOMException.create(this._globalObject, [\"Failed to set the 'valueAsNumber' property on 'HTMLInputElement': This input element does not support \" + \"Number values.\", \"InvalidStateError\"]);\n    }\n    this._value = this._convertNumberToString(v);\n  }\n\n  // https://html.spec.whatwg.org/multipage/input.html#dom-input-stepup\n  _stepUpdate(n, isUp) {\n    const methodName = isUp ? \"stepUp\" : \"stepDown\";\n    if (!this._idlMemberApplies(methodName)) {\n      throw DOMException.create(this._globalObject, [`Failed to invoke '${methodName}' method on 'HTMLInputElement': ` + \"This input element does not support Number values.\", \"InvalidStateError\"]);\n    }\n    const allowedValueStep = this._allowedValueStep;\n    if (allowedValueStep === null) {\n      throw DOMException.create(this._globalObject, [`Failed to invoke '${methodName}' method on 'HTMLInputElement': ` + \"This input element does not support value step.\", \"InvalidStateError\"]);\n    }\n    const min = this._minimum;\n    const max = this._maximum;\n    if (min !== null && max !== null) {\n      if (min > max) {\n        return;\n      }\n      const candidateStepValue = this._stepAlign(Decimal.add(min, allowedValueStep), /* roundUp = */false);\n      if (candidateStepValue.lt(min) || candidateStepValue.gt(max)) {\n        return;\n      }\n    }\n    let value = 0;\n    try {\n      value = this.valueAsNumber;\n      if (isNaN(value)) {\n        // Empty value is parsed as NaN.\n        value = 0;\n      }\n    } catch (error) {\n      // Step 5. Default value is 0.\n    }\n    value = new Decimal(value);\n    const valueBeforeStepping = value;\n    if (!this._isStepAligned(value)) {\n      value = this._stepAlign(value, /* roundUp = */isUp);\n    } else {\n      let delta = Decimal.mul(n, allowedValueStep);\n      if (!isUp) {\n        delta = delta.neg();\n      }\n      value = value.add(delta);\n    }\n    if (min !== null && value.lt(min)) {\n      value = this._stepAlign(min, /* roundUp = */true);\n    }\n    if (max !== null && value.gt(max)) {\n      value = this._stepAlign(max, /* roundUp = */false);\n    }\n    if (isUp ? value.lt(valueBeforeStepping) : value.gt(valueBeforeStepping)) {\n      return;\n    }\n    this._value = this._convertNumberToString(value.toNumber());\n  }\n  stepDown() {\n    let n = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n    return this._stepUpdate(n, false);\n  }\n  stepUp() {\n    let n = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n    return this._stepUpdate(n, true);\n  }\n  get files() {\n    if (this.type === \"file\") {\n      this[filesSymbol] = this[filesSymbol] || FileList.createImpl(this._globalObject);\n    } else {\n      this[filesSymbol] = null;\n    }\n    return this[filesSymbol];\n  }\n  set files(value) {\n    if (this.type === \"file\" && value !== null) {\n      this[filesSymbol] = value;\n    }\n  }\n  get type() {\n    const typeAttribute = this.getAttributeNS(null, \"type\");\n    return getTypeFromAttribute(typeAttribute);\n  }\n  set type(type) {\n    this.setAttributeNS(null, \"type\", type);\n  }\n  _dispatchSelectEvent() {\n    fireAnEvent(\"select\", this, undefined, {\n      bubbles: true,\n      cancelable: true\n    });\n  }\n  _getValueLength() {\n    return typeof this.value === \"string\" ? this.value.length : 0;\n  }\n  select() {\n    if (!this._idlMemberApplies(\"select\")) {\n      return;\n    }\n    this._selectionStart = 0;\n    this._selectionEnd = this._getValueLength();\n    this._selectionDirection = \"none\";\n    this._dispatchSelectEvent();\n  }\n  get selectionStart() {\n    if (!this._idlMemberApplies(\"selectionStart\")) {\n      return null;\n    }\n    return this._selectionStart;\n  }\n  set selectionStart(start) {\n    if (!this._idlMemberApplies(\"selectionStart\")) {\n      throw DOMException.create(this._globalObject, [\"The object is in an invalid state.\", \"InvalidStateError\"]);\n    }\n    this.setSelectionRange(start, Math.max(start, this._selectionEnd), this._selectionDirection);\n  }\n  get selectionEnd() {\n    if (!this._idlMemberApplies(\"selectionEnd\")) {\n      return null;\n    }\n    return this._selectionEnd;\n  }\n  set selectionEnd(end) {\n    if (!this._idlMemberApplies(\"selectionEnd\")) {\n      throw DOMException.create(this._globalObject, [\"The object is in an invalid state.\", \"InvalidStateError\"]);\n    }\n    this.setSelectionRange(this._selectionStart, end, this._selectionDirection);\n  }\n  get selectionDirection() {\n    if (!this._idlMemberApplies(\"selectionDirection\")) {\n      return null;\n    }\n    return this._selectionDirection;\n  }\n  set selectionDirection(dir) {\n    if (!this._idlMemberApplies(\"selectionDirection\")) {\n      throw DOMException.create(this._globalObject, [\"The object is in an invalid state.\", \"InvalidStateError\"]);\n    }\n    this.setSelectionRange(this._selectionStart, this._selectionEnd, dir);\n  }\n  setSelectionRange(start, end, dir) {\n    if (!this._idlMemberApplies(\"setSelectionRange\")) {\n      throw DOMException.create(this._globalObject, [\"The object is in an invalid state.\", \"InvalidStateError\"]);\n    }\n    this._selectionEnd = Math.min(end, this._getValueLength());\n    this._selectionStart = Math.min(start, this._selectionEnd);\n    this._selectionDirection = dir === \"forward\" || dir === \"backward\" ? dir : \"none\";\n    this._dispatchSelectEvent();\n  }\n  setRangeText(repl, start, end) {\n    let selectionMode = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : \"preserve\";\n    if (!this._idlMemberApplies(\"setRangeText\")) {\n      throw DOMException.create(this._globalObject, [\"The object is in an invalid state.\", \"InvalidStateError\"]);\n    }\n    if (arguments.length < 2) {\n      start = this._selectionStart;\n      end = this._selectionEnd;\n    } else if (start > end) {\n      throw DOMException.create(this._globalObject, [\"The index is not in the allowed range.\", \"IndexSizeError\"]);\n    }\n    start = Math.min(start, this._getValueLength());\n    end = Math.min(end, this._getValueLength());\n    const val = this.value;\n    let selStart = this._selectionStart;\n    let selEnd = this._selectionEnd;\n    this.value = val.slice(0, start) + repl + val.slice(end);\n    const newEnd = start + this.value.length;\n    if (selectionMode === \"select\") {\n      this.setSelectionRange(start, newEnd);\n    } else if (selectionMode === \"start\") {\n      this.setSelectionRange(start, start);\n    } else if (selectionMode === \"end\") {\n      this.setSelectionRange(newEnd, newEnd);\n    } else {\n      // preserve\n      const delta = repl.length - (end - start);\n      if (selStart > end) {\n        selStart += delta;\n      } else if (selStart > start) {\n        selStart = start;\n      }\n      if (selEnd > end) {\n        selEnd += delta;\n      } else if (selEnd > start) {\n        selEnd = newEnd;\n      }\n      this.setSelectionRange(selStart, selEnd);\n    }\n  }\n\n  // https://html.spec.whatwg.org/multipage/input.html#the-list-attribute\n  get list() {\n    const id = this._getAttributeIfApplies(\"list\");\n    if (!id) {\n      return null;\n    }\n    const el = this.getRootNode({}).getElementById(id);\n    if (el && el.localName === \"datalist\") {\n      return el;\n    }\n    return null;\n  }\n\n  // Reflected IDL attribute does not care about whether the content attribute applies.\n  get maxLength() {\n    if (!this.hasAttributeNS(null, \"maxlength\")) {\n      return 524288; // stole this from chrome\n    }\n\n    return parseInt(this.getAttributeNS(null, \"maxlength\"));\n  }\n  set maxLength(value) {\n    if (value < 0) {\n      throw DOMException.create(this._globalObject, [\"The index is not in the allowed range.\", \"IndexSizeError\"]);\n    }\n    this.setAttributeNS(null, \"maxlength\", String(value));\n  }\n  get minLength() {\n    if (!this.hasAttributeNS(null, \"minlength\")) {\n      return 0;\n    }\n    return parseInt(this.getAttributeNS(null, \"minlength\"));\n  }\n  set minLength(value) {\n    if (value < 0) {\n      throw DOMException.create(this._globalObject, [\"The index is not in the allowed range.\", \"IndexSizeError\"]);\n    }\n    this.setAttributeNS(null, \"minlength\", String(value));\n  }\n  get size() {\n    if (!this.hasAttributeNS(null, \"size\")) {\n      return 20;\n    }\n    return parseInt(this.getAttributeNS(null, \"size\"));\n  }\n  set size(value) {\n    if (value <= 0) {\n      throw DOMException.create(this._globalObject, [\"The index is not in the allowed range.\", \"IndexSizeError\"]);\n    }\n    this.setAttributeNS(null, \"size\", String(value));\n  }\n\n  // https://html.spec.whatwg.org/multipage/input.html#the-min-and-max-attributes\n  get _minimum() {\n    let min = this._defaultMinimum;\n    const attr = this._getAttributeIfApplies(\"min\");\n    if (attr !== null && this._convertStringToNumber !== undefined) {\n      const parsed = this._convertStringToNumber(attr);\n      if (parsed !== null) {\n        min = parsed;\n      }\n    }\n    return min;\n  }\n  get _maximum() {\n    let max = this._defaultMaximum;\n    const attr = this._getAttributeIfApplies(\"max\");\n    if (attr !== null && this._convertStringToNumber !== undefined) {\n      const parsed = this._convertStringToNumber(attr);\n      if (parsed !== null) {\n        max = parsed;\n      }\n    }\n    return max;\n  }\n  get _defaultMinimum() {\n    if (this.type === \"range\") {\n      return 0;\n    }\n    return null;\n  }\n  get _defaultMaximum() {\n    if (this.type === \"range\") {\n      return 100;\n    }\n    return null;\n  }\n\n  // https://html.spec.whatwg.org/multipage/input.html#concept-input-step\n  get _allowedValueStep() {\n    if (!this._contentAttributeApplies(\"step\")) {\n      return null;\n    }\n    const attr = this.getAttributeNS(null, \"step\");\n    if (attr === null) {\n      return this._defaultStep * this._stepScaleFactor;\n    }\n    if (asciiCaseInsensitiveMatch(attr, \"any\")) {\n      return null;\n    }\n    const parsedStep = parseFloatingPointNumber(attr);\n    if (parsedStep === null || parsedStep <= 0) {\n      return this._defaultStep * this._stepScaleFactor;\n    }\n    return parsedStep * this._stepScaleFactor;\n  }\n\n  // https://html.spec.whatwg.org/multipage/input.html#concept-input-step-scale\n  get _stepScaleFactor() {\n    const dayInMilliseconds = 24 * 60 * 60 * 1000;\n    switch (this.type) {\n      case \"week\":\n        return 7 * dayInMilliseconds;\n      case \"date\":\n        return dayInMilliseconds;\n      case \"datetime-local\":\n      case \"datetime\":\n      case \"time\":\n        return 1000;\n    }\n    return 1;\n  }\n\n  // https://html.spec.whatwg.org/multipage/input.html#concept-input-step-default\n  get _defaultStep() {\n    if (this.type === \"datetime-local\" || this.type === \"datetime\" || this.type === \"time\") {\n      return 60;\n    }\n    return 1;\n  }\n\n  // https://html.spec.whatwg.org/multipage/input.html#concept-input-min-zero\n  get _stepBase() {\n    if (this._hasAttributeAndApplies(\"min\")) {\n      const min = this._convertStringToNumber(this.getAttributeNS(null, \"min\"));\n      if (min !== null) {\n        return min;\n      }\n    }\n    if (this.hasAttributeNS(null, \"value\")) {\n      const value = this._convertStringToNumber(this.getAttributeNS(null, \"value\"));\n      if (value !== null) {\n        return value;\n      }\n    }\n    if (this._defaultStepBase !== null) {\n      return this._defaultStepBase;\n    }\n    return 0;\n  }\n\n  // https://html.spec.whatwg.org/multipage/input.html#concept-input-step-default-base\n  get _defaultStepBase() {\n    if (this.type === \"week\") {\n      // The start of week 1970-W01\n      return -259200000;\n    }\n    return null;\n  }\n\n  // https://html.spec.whatwg.org/multipage/input.html#common-input-element-attributes\n  // When an attribute doesn't apply to an input element, user agents must ignore the attribute.\n  _contentAttributeApplies(attribute) {\n    return applicableTypesForContentAttribute[attribute].has(this.type);\n  }\n  _hasAttributeAndApplies(attribute) {\n    return this._contentAttributeApplies(attribute) && this.hasAttributeNS(null, attribute);\n  }\n  _getAttributeIfApplies(attribute) {\n    if (this._contentAttributeApplies(attribute)) {\n      return this.getAttributeNS(null, attribute);\n    }\n    return null;\n  }\n  _idlMemberApplies(member) {\n    let type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.type;\n    return applicableTypesForIDLMember[member].has(type);\n  }\n  _barredFromConstraintValidationSpecialization() {\n    // https://html.spec.whatwg.org/multipage/input.html#hidden-state-(type=hidden)\n    // https://html.spec.whatwg.org/multipage/input.html#reset-button-state-(type=reset)\n    // https://html.spec.whatwg.org/multipage/input.html#button-state-(type=button)\n    const willNotValidateTypes = new Set([\"hidden\", \"reset\", \"button\"]);\n    // https://html.spec.whatwg.org/multipage/input.html#attr-input-readonly\n    const readOnly = this._hasAttributeAndApplies(\"readonly\");\n\n    // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#attr-fe-disabled\n    return willNotValidateTypes.has(this.type) || readOnly;\n  }\n\n  // https://html.spec.whatwg.org/multipage/input.html#concept-input-required\n  get _required() {\n    return this._hasAttributeAndApplies(\"required\");\n  }\n\n  // https://html.spec.whatwg.org/multipage/input.html#has-a-periodic-domain\n  get _hasAPeriodicDomain() {\n    return this.type === \"time\";\n  }\n\n  // https://html.spec.whatwg.org/multipage/input.html#has-a-reversed-range\n  get _hasAReversedRange() {\n    return this._hasAPeriodicDomain && this._maximum < this._minimum;\n  }\n  get validity() {\n    if (!this._validity) {\n      // Constraint validation: When an element has a reversed range, and the result of applying\n      // the algorithm to convert a string to a number to the string given by the element's value\n      // is a number, and the number obtained from that algorithm is more than the maximum and less\n      // than the minimum, the element is simultaneously suffering from an underflow and suffering\n      // from an overflow.\n      const reversedRangeSufferingOverUnderflow = () => {\n        const parsedValue = this._convertStringToNumber(this._value);\n        return parsedValue !== null && parsedValue > this._maximum && parsedValue < this._minimum;\n      };\n      const state = {\n        // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#suffering-from-being-missing\n        valueMissing: () => {\n          // https://html.spec.whatwg.org/multipage/input.html#the-required-attribute\n          // Constraint validation: If the element is required, and its value IDL attribute applies\n          // and is in the mode value, and the element is mutable, and the element's value is the\n          // empty string, then the element is suffering from being missing.\n          //\n          // Note: As of today, the value IDL attribute always applies.\n          if (this._required && valueAttributeMode(this.type) === \"value\" && this._mutable && this._value === \"\") {\n            return true;\n          }\n          switch (this.type) {\n            // https://html.spec.whatwg.org/multipage/input.html#checkbox-state-(type=checkbox)\n            // Constraint validation: If the element is required and its checkedness is\n            // false, then the element is suffering from being missing.\n            case \"checkbox\":\n              if (this._required && !this._checkedness) {\n                return true;\n              }\n              break;\n\n            // https://html.spec.whatwg.org/multipage/input.html#radio-button-state-(type=radio)\n            // Constraint validation: If an element in the radio button group is required,\n            // and all of the input elements in the radio button group have a checkedness\n            // that is false, then the element is suffering from being missing.\n            case \"radio\":\n              if (this._someInRadioGroup(\"_required\") && !this._someInRadioGroup(\"checked\")) {\n                return true;\n              }\n              break;\n\n            // https://html.spec.whatwg.org/multipage/input.html#file-upload-state-(type=file)\n            // Constraint validation: If the element is required and the list of selected files is\n            // empty, then the element is suffering from being missing.\n            case \"file\":\n              if (this._required && this.files.length === 0) {\n                return true;\n              }\n              break;\n          }\n          return false;\n        },\n        // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#suffering-from-being-too-long\n        // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#attr-fe-maxlength\n        // jsdom has no way at the moment to emulate a user interaction, so tooLong/tooShort have\n        // to be set to false.\n        tooLong: () => false,\n        // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#suffering-from-being-too-short\n        // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#attr-fe-minlength\n        tooShort: () => false,\n        // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#suffering-from-an-overflow\n        rangeOverflow: () => {\n          // https://html.spec.whatwg.org/multipage/input.html#the-min-and-max-attributes\n          if (this._hasAReversedRange) {\n            return reversedRangeSufferingOverUnderflow();\n          }\n          // Constraint validation: When the element has a maximum and does not have a reversed\n          // range, and the result of applying the algorithm to convert a string to a number to the\n          // string given by the element's value is a number, and the number obtained from that\n          // algorithm is more than the maximum, the element is suffering from an overflow.\n          if (this._maximum !== null) {\n            const parsedValue = this._convertStringToNumber(this._value);\n            if (parsedValue !== null && parsedValue > this._maximum) {\n              return true;\n            }\n          }\n          return false;\n        },\n        // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#suffering-from-an-underflow\n        rangeUnderflow: () => {\n          // https://html.spec.whatwg.org/multipage/input.html#the-min-and-max-attributes\n          if (this._hasAReversedRange) {\n            return reversedRangeSufferingOverUnderflow();\n          }\n          // Constraint validation: When the element has a minimum and does not have a reversed\n          // range, and the result of applying the algorithm to convert a string to a number to the\n          // string given by the element's value is a number, and the number obtained from that\n          // algorithm is less than the minimum, the element is suffering from an underflow.\n          if (this._minimum !== null) {\n            const parsedValue = this._convertStringToNumber(this._value);\n            if (parsedValue !== null && parsedValue < this._minimum) {\n              return true;\n            }\n          }\n          return false;\n        },\n        // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#suffering-from-a-pattern-mismatch\n        patternMismatch: () => {\n          // https://html.spec.whatwg.org/multipage/input.html#the-pattern-attribute\n          if (this._value === \"\" || !this._hasAttributeAndApplies(\"pattern\")) {\n            return false;\n          }\n          let regExp;\n          try {\n            const pattern = this.getAttributeNS(null, \"pattern\");\n            // The pattern attribute should be matched against the entire value, not just any\n            // subset, so add ^ and $ anchors. But also check the validity of the regex itself\n            // first.\n            new RegExp(pattern, \"u\"); // eslint-disable-line no-new\n            regExp = new RegExp(\"^(?:\" + pattern + \")$\", \"u\");\n          } catch (e) {\n            return false;\n          }\n          if (this._hasAttributeAndApplies(\"multiple\")) {\n            return !splitOnCommas(this._value).every(value => regExp.test(value));\n          }\n          return !regExp.test(this._value);\n        },\n        // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#suffering-from-a-step-mismatch\n        // https://html.spec.whatwg.org/multipage/input.html#attr-input-step\n        stepMismatch: () => {\n          const allowedValueStep = this._allowedValueStep;\n          if (allowedValueStep === null) {\n            return false;\n          }\n          const number = this._convertStringToNumber(this._value);\n          return number !== null && !this._isStepAligned(number);\n        },\n        // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#suffering-from-a-type-mismatch\n        typeMismatch: () => {\n          switch (this.type) {\n            // https://html.spec.whatwg.org/multipage/input.html#url-state-(type=url)\n            // Constraint validation: While the value of the element is neither the empty string\n            // nor a valid absolute URL, the element is suffering from a type mismatch.\n            case \"url\":\n              if (this._value !== \"\" && !isValidAbsoluteURL(this._value)) {\n                return true;\n              }\n              break;\n\n            // https://html.spec.whatwg.org/multipage/input.html#e-mail-state-(type=email)\n            // Constraint validation [multiple=false]: While the value of the element is neither the empty\n            // string nor a single valid e - mail address, the element is suffering from a type mismatch.\n            // Constraint validation [multiple=true]: While the value of the element is not a valid e-mail address list,\n            // the element is suffering from a type mismatch.\n            case \"email\":\n              if (this._value !== \"\" && !isValidEmailAddress(this._getValue(), this.hasAttributeNS(null, \"multiple\"))) {\n                return true;\n              }\n              break;\n          }\n          return false;\n        }\n      };\n      this._validity = ValidityState.createImpl(this._globalObject, [], {\n        element: this,\n        state\n      });\n    }\n    return this._validity;\n  }\n  [cloningSteps](copy, node) {\n    copy._value = node._value;\n    copy._checkedness = node._checkedness;\n    copy._dirtyValue = node._dirtyValue;\n    copy._dirtyCheckedness = node._dirtyCheckedness;\n  }\n}\nmixin(HTMLInputElementImpl.prototype, DefaultConstraintValidationImpl.prototype);\nmodule.exports = {\n  implementation: HTMLInputElementImpl\n};","map":{"version":3,"names":["DOMException","require","FileList","Decimal","HTMLElementImpl","implementation","idlUtils","DefaultConstraintValidationImpl","ValidityState","mixin","domSymbolTree","cloningSteps","getLabelsForLabelable","formOwner","fireAnEvent","isDisabled","isValidEmailAddress","isValidAbsoluteURL","sanitizeValueByType","asciiCaseInsensitiveMatch","asciiLowercase","parseFloatingPointNumber","splitOnCommas","isDate","convertStringToNumberByType","convertStringToDateByType","serializeDateByType","convertNumberToStringByType","filesSymbol","Symbol","inputAllowedTypes","Set","variableLengthSelectionAllowedTypes","numericTypes","applicableTypesForIDLMember","valueAsDate","valueAsNumber","select","selectionStart","selectionEnd","selectionDirection","setRangeText","setSelectionRange","stepDown","stepUp","lengthPatternSizeTypes","readonlyTypes","applicableTypesForContentAttribute","list","max","maxlength","min","minlength","multiple","pattern","readonly","required","step","valueAttributeDefaultMode","valueAttributeDefaultOnMode","valueAttributeMode","type","has","getTypeFromAttribute","typeAttribute","HTMLInputElementImpl","constructor","globalObject","args","privateData","_selectionStart","_selectionEnd","_selectionDirection","_value","_dirtyValue","_checkedness","_dirtyCheckedness","_preCheckedRadioState","_legacyActivationBehaviorPreviousIndeterminateState","indeterminate","_customValidityErrorMessage","_labels","_hasActivationBehavior","_convertStringToNumber","_convertNumberToString","_convertDateToString","_convertStringToDate","_isStepAligned","v","minus","_stepBase","modulo","_allowedValueStep","isZero","_stepAlign","roundUp","allowedValueStep","stepBase","toNearest","ROUND_UP","ROUND_DOWN","add","_getValue","_legacyPreActivationBehavior","checked","_legacyCanceledActivationBehavior","_activationBehavior","_mutable","form","isConnected","undefined","bubbles","_doSubmit","_doReset","_attrModified","name","value","oldVal","wrapper","wrapperForImpl","defaultValue","defaultChecked","_removeOtherRadioCheckedness","prevType","curType","prevValueMode","curValueMode","setAttributeNS","getAttributeNS","_signalATypeChange","previouslySelectable","_idlMemberApplies","nowSelectable","_formReset","_changedFormOwner","_otherRadioGroupElements","root","_radioButtonGroupRoot","result","descendants","treeIterator","candidate","candidateWrapper","push","radioGroupElement","e","parent","nodeName","toUpperCase","_someInRadioGroup","some","_hasAttributeAndApplies","labels","Boolean","attr","files","length","Error","val","oldValue","_getValueLength","create","_globalObject","window","_ownerDocument","_defaultView","convertedValue","Date","getTime","TypeError","isNaN","NaN","parsedValue","isFinite","_stepUpdate","n","isUp","methodName","_minimum","_maximum","candidateStepValue","lt","gt","error","valueBeforeStepping","delta","mul","neg","toNumber","arguments","createImpl","_dispatchSelectEvent","cancelable","start","Math","end","dir","repl","selectionMode","selStart","selEnd","slice","newEnd","id","_getAttributeIfApplies","el","getRootNode","getElementById","localName","maxLength","hasAttributeNS","parseInt","String","minLength","size","_defaultMinimum","parsed","_defaultMaximum","_contentAttributeApplies","_defaultStep","_stepScaleFactor","parsedStep","dayInMilliseconds","_defaultStepBase","attribute","member","_barredFromConstraintValidationSpecialization","willNotValidateTypes","readOnly","_required","_hasAPeriodicDomain","_hasAReversedRange","validity","_validity","reversedRangeSufferingOverUnderflow","state","valueMissing","tooLong","tooShort","rangeOverflow","rangeUnderflow","patternMismatch","regExp","RegExp","every","test","stepMismatch","number","typeMismatch","element","copy","node","prototype","module","exports"],"sources":["C:/Users/noodp/Documents/GitHub/Pensionsrechner/client/node_modules/jsdom/lib/jsdom/living/nodes/HTMLInputElement-impl.js"],"sourcesContent":["\"use strict\";\r\nconst DOMException = require(\"domexception/webidl2js-wrapper\");\r\nconst FileList = require(\"../generated/FileList\");\r\nconst Decimal = require(\"decimal.js\");\r\nconst HTMLElementImpl = require(\"./HTMLElement-impl\").implementation;\r\nconst idlUtils = require(\"../generated/utils\");\r\nconst DefaultConstraintValidationImpl =\r\n  require(\"../constraint-validation/DefaultConstraintValidation-impl\").implementation;\r\nconst ValidityState = require(\"../generated/ValidityState\");\r\nconst { mixin } = require(\"../../utils\");\r\nconst { domSymbolTree, cloningSteps } = require(\"../helpers/internal-constants\");\r\nconst { getLabelsForLabelable, formOwner } = require(\"../helpers/form-controls\");\r\nconst { fireAnEvent } = require(\"../helpers/events\");\r\nconst {\r\n  isDisabled,\r\n  isValidEmailAddress,\r\n  isValidAbsoluteURL,\r\n  sanitizeValueByType\r\n} = require(\"../helpers/form-controls\");\r\nconst {\r\n  asciiCaseInsensitiveMatch,\r\n  asciiLowercase,\r\n  parseFloatingPointNumber,\r\n  splitOnCommas\r\n} = require(\"../helpers/strings\");\r\nconst { isDate } = require(\"../helpers/dates-and-times\");\r\nconst {\r\n  convertStringToNumberByType,\r\n  convertStringToDateByType,\r\n  serializeDateByType,\r\n  convertNumberToStringByType\r\n} = require(\"../helpers/number-and-date-inputs\");\r\n\r\nconst filesSymbol = Symbol(\"files\");\r\n\r\n// https://html.spec.whatwg.org/multipage/input.html#attr-input-type\r\nconst inputAllowedTypes = new Set([\r\n  \"hidden\", \"text\", \"search\", \"tel\", \"url\", \"email\", \"password\", \"date\",\r\n  \"month\", \"week\", \"time\", \"datetime-local\", \"number\", \"range\", \"color\", \"checkbox\", \"radio\",\r\n  \"file\", \"submit\", \"image\", \"reset\", \"button\"\r\n]);\r\n\r\n// https://html.spec.whatwg.org/multipage/input.html#concept-input-apply\r\n\r\nconst variableLengthSelectionAllowedTypes = new Set([\"text\", \"search\", \"url\", \"tel\", \"password\"]);\r\nconst numericTypes = new Set([\"date\", \"month\", \"week\", \"time\", \"datetime-local\", \"number\", \"range\"]);\r\n\r\nconst applicableTypesForIDLMember = {\r\n  valueAsDate: new Set([\"date\", \"month\", \"week\", \"time\"]),\r\n  valueAsNumber: numericTypes,\r\n\r\n  select: new Set([\r\n    \"text\", \"search\", \"url\", \"tel\", \"email\", \"password\", \"date\", \"month\", \"week\",\r\n    \"time\", \"datetime-local\", \"number\", \"color\", \"file\"\r\n  ]),\r\n  selectionStart: variableLengthSelectionAllowedTypes,\r\n  selectionEnd: variableLengthSelectionAllowedTypes,\r\n  selectionDirection: variableLengthSelectionAllowedTypes,\r\n  setRangeText: variableLengthSelectionAllowedTypes,\r\n  setSelectionRange: variableLengthSelectionAllowedTypes,\r\n  stepDown: numericTypes,\r\n  stepUp: numericTypes\r\n};\r\n\r\nconst lengthPatternSizeTypes = new Set([\"text\", \"search\", \"url\", \"tel\", \"email\", \"password\"]);\r\nconst readonlyTypes =\r\n  new Set([...lengthPatternSizeTypes, \"date\", \"month\", \"week\", \"time\", \"datetime-local\", \"number\"]);\r\n\r\nconst applicableTypesForContentAttribute = {\r\n  list: new Set([\"text\", \"search\", \"url\", \"tel\", \"email\", ...numericTypes, \"color\"]),\r\n  max: numericTypes,\r\n  maxlength: lengthPatternSizeTypes,\r\n  min: numericTypes,\r\n  minlength: lengthPatternSizeTypes,\r\n  multiple: new Set([\"email\", \"file\"]),\r\n  pattern: lengthPatternSizeTypes,\r\n  readonly: readonlyTypes,\r\n  required: new Set([...readonlyTypes, \"checkbox\", \"radio\", \"file\"]),\r\n  step: numericTypes\r\n};\r\n\r\nconst valueAttributeDefaultMode = new Set([\"hidden\", \"submit\", \"image\", \"reset\", \"button\"]);\r\nconst valueAttributeDefaultOnMode = new Set([\"checkbox\", \"radio\"]);\r\n\r\nfunction valueAttributeMode(type) {\r\n  if (valueAttributeDefaultMode.has(type)) {\r\n    return \"default\";\r\n  }\r\n  if (valueAttributeDefaultOnMode.has(type)) {\r\n    return \"default/on\";\r\n  }\r\n  if (type === \"file\") {\r\n    return \"filename\";\r\n  }\r\n  return \"value\";\r\n}\r\n\r\nfunction getTypeFromAttribute(typeAttribute) {\r\n  if (typeof typeAttribute !== \"string\") {\r\n    return \"text\";\r\n  }\r\n  const type = asciiLowercase(typeAttribute);\r\n  return inputAllowedTypes.has(type) ? type : \"text\";\r\n}\r\n\r\nclass HTMLInputElementImpl extends HTMLElementImpl {\r\n  constructor(globalObject, args, privateData) {\r\n    super(globalObject, args, privateData);\r\n\r\n    this._selectionStart = this._selectionEnd = 0;\r\n    this._selectionDirection = \"none\";\r\n    this._value = \"\";\r\n    this._dirtyValue = false;\r\n    this._checkedness = false;\r\n    this._dirtyCheckedness = false;\r\n\r\n    this._preCheckedRadioState = null;\r\n    this._legacyActivationBehaviorPreviousIndeterminateState = false;\r\n\r\n    this.indeterminate = false;\r\n\r\n    this._customValidityErrorMessage = \"\";\r\n\r\n    this._labels = null;\r\n\r\n    this._hasActivationBehavior = true;\r\n  }\r\n\r\n  // https://html.spec.whatwg.org/multipage/input.html#concept-input-value-string-number\r\n  get _convertStringToNumber() {\r\n    return convertStringToNumberByType[this.type];\r\n  }\r\n\r\n  get _convertNumberToString() {\r\n    return convertNumberToStringByType[this.type];\r\n  }\r\n\r\n  get _convertDateToString() {\r\n    return serializeDateByType[this.type];\r\n  }\r\n\r\n  get _convertStringToDate() {\r\n    return convertStringToDateByType[this.type];\r\n  }\r\n\r\n  _isStepAligned(v) {\r\n    return new Decimal(v).minus(this._stepBase)\r\n      .modulo(this._allowedValueStep)\r\n      .isZero();\r\n  }\r\n\r\n  // Returns a Decimal.\r\n  _stepAlign(v, roundUp) {\r\n    const allowedValueStep = this._allowedValueStep;\r\n    const stepBase = this._stepBase;\r\n\r\n    return new Decimal(v).minus(stepBase)\r\n      .toNearest(allowedValueStep, roundUp ? Decimal.ROUND_UP : Decimal.ROUND_DOWN)\r\n      .add(stepBase);\r\n  }\r\n\r\n  // For <input>, https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#concept-fe-value\r\n  // is a simple value that is gotten and set, not computed.\r\n  _getValue() {\r\n    return this._value;\r\n  }\r\n\r\n  _legacyPreActivationBehavior() {\r\n    if (this.type === \"checkbox\") {\r\n      this.checked = !this.checked;\r\n      this._legacyActivationBehaviorPreviousIndeterminateState = this.indeterminate;\r\n      this.indeterminate = false;\r\n    } else if (this.type === \"radio\") {\r\n      this._preCheckedRadioState = this.checked;\r\n      this.checked = true;\r\n    }\r\n  }\r\n\r\n  _legacyCanceledActivationBehavior() {\r\n    if (this.type === \"checkbox\") {\r\n      this.checked = !this.checked;\r\n      this.indeterminate = this._legacyActivationBehaviorPreviousIndeterminateState;\r\n    } else if (this.type === \"radio\") {\r\n      if (this._preCheckedRadioState !== null) {\r\n        this.checked = this._preCheckedRadioState;\r\n        this._preCheckedRadioState = null;\r\n      }\r\n    }\r\n  }\r\n\r\n  _activationBehavior() {\r\n    if (!this._mutable && this.type !== \"checkbox\" && this.type !== \"radio\") {\r\n      return;\r\n    }\r\n\r\n    const { form } = this;\r\n\r\n    if (this.type === \"checkbox\" || (this.type === \"radio\" && !this._preCheckedRadioState)) {\r\n      if (this.isConnected) {\r\n        fireAnEvent(\"input\", this, undefined, { bubbles: true });\r\n        fireAnEvent(\"change\", this, undefined, { bubbles: true });\r\n      }\r\n    } else if (form && this.type === \"submit\") {\r\n      form._doSubmit();\r\n    } else if (form && this.type === \"reset\") {\r\n      form._doReset();\r\n    }\r\n  }\r\n\r\n  _attrModified(name, value, oldVal) {\r\n    const wrapper = idlUtils.wrapperForImpl(this);\r\n    if (!this._dirtyValue && name === \"value\") {\r\n      this._value = sanitizeValueByType(this, wrapper.defaultValue);\r\n    }\r\n    if (!this._dirtyCheckedness && name === \"checked\") {\r\n      this._checkedness = wrapper.defaultChecked;\r\n      if (this._checkedness) {\r\n        this._removeOtherRadioCheckedness();\r\n      }\r\n    }\r\n\r\n    if (name === \"name\" || name === \"type\") {\r\n      if (this._checkedness) {\r\n        this._removeOtherRadioCheckedness();\r\n      }\r\n    }\r\n\r\n    if (name === \"type\") {\r\n      const prevType = getTypeFromAttribute(oldVal);\r\n      const curType = getTypeFromAttribute(value);\r\n      // When an input element's type attribute changes stateâ€¦\r\n      if (prevType !== curType) {\r\n        const prevValueMode = valueAttributeMode(prevType);\r\n        const curValueMode = valueAttributeMode(curType);\r\n        if (prevValueMode === \"value\" && this._value !== \"\" &&\r\n            (curValueMode === \"default\" || curValueMode === \"default/on\")) {\r\n          this.setAttributeNS(null, \"value\", this._value);\r\n        } else if (prevValueMode !== \"value\" && curValueMode === \"value\") {\r\n          this._value = this.getAttributeNS(null, \"value\") || \"\";\r\n          this._dirtyValue = false;\r\n        } else if (prevValueMode !== \"filename\" && curValueMode === \"filename\") {\r\n          this._value = \"\";\r\n        }\r\n\r\n        this._signalATypeChange();\r\n\r\n        this._value = sanitizeValueByType(this, this._value);\r\n\r\n        const previouslySelectable = this._idlMemberApplies(\"setRangeText\", prevType);\r\n        const nowSelectable = this._idlMemberApplies(\"setRangeText\", curType);\r\n        if (!previouslySelectable && nowSelectable) {\r\n          this._selectionStart = 0;\r\n          this._selectionEnd = 0;\r\n          this._selectionDirection = \"none\";\r\n        }\r\n      }\r\n    }\r\n\r\n    super._attrModified(name, value, oldVal);\r\n  }\r\n\r\n  // https://html.spec.whatwg.org/multipage/input.html#signal-a-type-change\r\n  _signalATypeChange() {\r\n    if (this._checkedness) {\r\n      this._removeOtherRadioCheckedness();\r\n    }\r\n  }\r\n\r\n  _formReset() {\r\n    const wrapper = idlUtils.wrapperForImpl(this);\r\n    this._value = sanitizeValueByType(this, wrapper.defaultValue);\r\n    this._dirtyValue = false;\r\n    this._checkedness = wrapper.defaultChecked;\r\n    this._dirtyCheckedness = false;\r\n    if (this._checkedness) {\r\n      this._removeOtherRadioCheckedness();\r\n    }\r\n  }\r\n\r\n  _changedFormOwner() {\r\n    if (this._checkedness) {\r\n      this._removeOtherRadioCheckedness();\r\n    }\r\n  }\r\n\r\n  get _otherRadioGroupElements() {\r\n    const wrapper = idlUtils.wrapperForImpl(this);\r\n    const root = this._radioButtonGroupRoot;\r\n    if (!root) {\r\n      return [];\r\n    }\r\n\r\n    const result = [];\r\n\r\n    const descendants = domSymbolTree.treeIterator(root);\r\n    for (const candidate of descendants) {\r\n      if (candidate._radioButtonGroupRoot !== root) {\r\n        continue;\r\n      }\r\n\r\n      const candidateWrapper = idlUtils.wrapperForImpl(candidate);\r\n      if (!candidateWrapper.name || candidateWrapper.name !== wrapper.name) {\r\n        continue;\r\n      }\r\n\r\n      if (candidate !== this) {\r\n        result.push(candidate);\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  _removeOtherRadioCheckedness() {\r\n    for (const radioGroupElement of this._otherRadioGroupElements) {\r\n      radioGroupElement._checkedness = false;\r\n    }\r\n  }\r\n\r\n  get _radioButtonGroupRoot() {\r\n    const wrapper = idlUtils.wrapperForImpl(this);\r\n    if (this.type !== \"radio\" || !wrapper.name) {\r\n      return null;\r\n    }\r\n\r\n    let e = domSymbolTree.parent(this);\r\n    while (e) {\r\n      // root node of this home sub tree\r\n      // or the form element we belong to\r\n      if (!domSymbolTree.parent(e) || e.nodeName.toUpperCase() === \"FORM\") {\r\n        return e;\r\n      }\r\n      e = domSymbolTree.parent(e);\r\n    }\r\n    return null;\r\n  }\r\n\r\n  _someInRadioGroup(name) {\r\n    if (this[name]) {\r\n      return true;\r\n    }\r\n    return this._otherRadioGroupElements.some(radioGroupElement => radioGroupElement[name]);\r\n  }\r\n\r\n  get _mutable() {\r\n    return !isDisabled(this) && !this._hasAttributeAndApplies(\"readonly\");\r\n  }\r\n\r\n  get labels() {\r\n    return getLabelsForLabelable(this);\r\n  }\r\n\r\n  get form() {\r\n    return formOwner(this);\r\n  }\r\n\r\n  get checked() {\r\n    return this._checkedness;\r\n  }\r\n\r\n  set checked(checked) {\r\n    this._checkedness = Boolean(checked);\r\n    this._dirtyCheckedness = true;\r\n    if (this._checkedness) {\r\n      this._removeOtherRadioCheckedness();\r\n    }\r\n  }\r\n\r\n  get value() {\r\n    switch (valueAttributeMode(this.type)) {\r\n      // https://html.spec.whatwg.org/multipage/input.html#dom-input-value-value\r\n      case \"value\":\r\n        return this._getValue();\r\n      // https://html.spec.whatwg.org/multipage/input.html#dom-input-value-default\r\n      case \"default\": {\r\n        const attr = this.getAttributeNS(null, \"value\");\r\n        return attr !== null ? attr : \"\";\r\n      }\r\n      // https://html.spec.whatwg.org/multipage/input.html#dom-input-value-default-on\r\n      case \"default/on\": {\r\n        const attr = this.getAttributeNS(null, \"value\");\r\n        return attr !== null ? attr : \"on\";\r\n      }\r\n      // https://html.spec.whatwg.org/multipage/input.html#dom-input-value-filename\r\n      case \"filename\":\r\n        return this.files.length ? \"C:\\\\fakepath\\\\\" + this.files[0].name : \"\";\r\n      default:\r\n        throw new Error(\"jsdom internal error: unknown value attribute mode\");\r\n    }\r\n  }\r\n\r\n  set value(val) {\r\n    switch (valueAttributeMode(this.type)) {\r\n      // https://html.spec.whatwg.org/multipage/input.html#dom-input-value-value\r\n      case \"value\": {\r\n        const oldValue = this._value;\r\n        this._value = sanitizeValueByType(this, val);\r\n        this._dirtyValue = true;\r\n\r\n        if (oldValue !== this._value) {\r\n          this._selectionStart = this._selectionEnd = this._getValueLength();\r\n          this._selectionDirection = \"none\";\r\n        }\r\n        break;\r\n      }\r\n\r\n      // https://html.spec.whatwg.org/multipage/input.html#dom-input-value-default\r\n      // https://html.spec.whatwg.org/multipage/input.html#dom-input-value-default-on\r\n      case \"default\":\r\n      case \"default/on\":\r\n        this.setAttributeNS(null, \"value\", val);\r\n        break;\r\n\r\n      // https://html.spec.whatwg.org/multipage/input.html#dom-input-value-filename\r\n      case \"filename\":\r\n        if (val === \"\") {\r\n          this.files.length = 0;\r\n        } else {\r\n          throw DOMException.create(this._globalObject, [\r\n            \"This input element accepts a filename, which may only be programmatically set to the empty string.\",\r\n            \"InvalidStateError\"\r\n          ]);\r\n        }\r\n        break;\r\n\r\n      default:\r\n        throw new Error(\"jsdom internal error: unknown value attribute mode\");\r\n    }\r\n  }\r\n\r\n  // https://html.spec.whatwg.org/multipage/input.html#dom-input-valueasdate\r\n  get valueAsDate() {\r\n    if (!this._idlMemberApplies(\"valueAsDate\")) {\r\n      return null;\r\n    }\r\n\r\n    const window = this._ownerDocument._defaultView;\r\n    const convertedValue = this._convertStringToDate(this._value);\r\n\r\n    if (convertedValue instanceof Date) {\r\n      return new window.Date(convertedValue.getTime());\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  set valueAsDate(v) {\r\n    if (!this._idlMemberApplies(\"valueAsDate\")) {\r\n      throw DOMException.create(this._globalObject, [\r\n        \"Failed to set the 'valueAsDate' property on 'HTMLInputElement': This input element does not support Date \" +\r\n        \"values.\",\r\n        \"InvalidStateError\"\r\n      ]);\r\n    }\r\n\r\n    if (v !== null && !isDate(v)) {\r\n      throw new TypeError(\"Failed to set the 'valueAsDate' property on 'HTMLInputElement': The provided value is \" +\r\n        \"not a Date.\");\r\n    }\r\n\r\n    if (v === null || isNaN(v)) {\r\n      this._value = \"\";\r\n    }\r\n\r\n    this._value = this._convertDateToString(v);\r\n  }\r\n\r\n  // https://html.spec.whatwg.org/multipage/input.html#dom-input-valueasnumber\r\n  get valueAsNumber() {\r\n    if (!this._idlMemberApplies(\"valueAsNumber\")) {\r\n      return NaN;\r\n    }\r\n\r\n    const parsedValue = this._convertStringToNumber(this._value);\r\n    return parsedValue !== null ? parsedValue : NaN;\r\n  }\r\n\r\n  set valueAsNumber(v) {\r\n    if (!isFinite(v)) {\r\n      throw new TypeError(\"Failed to set infinite value as Number\");\r\n    }\r\n\r\n    if (!this._idlMemberApplies(\"valueAsNumber\")) {\r\n      throw DOMException.create(this._globalObject, [\r\n        \"Failed to set the 'valueAsNumber' property on 'HTMLInputElement': This input element does not support \" +\r\n        \"Number values.\",\r\n        \"InvalidStateError\"\r\n      ]);\r\n    }\r\n\r\n    this._value = this._convertNumberToString(v);\r\n  }\r\n\r\n  // https://html.spec.whatwg.org/multipage/input.html#dom-input-stepup\r\n  _stepUpdate(n, isUp) {\r\n    const methodName = isUp ? \"stepUp\" : \"stepDown\";\r\n    if (!this._idlMemberApplies(methodName)) {\r\n      throw DOMException.create(this._globalObject, [\r\n        `Failed to invoke '${methodName}' method on 'HTMLInputElement': ` +\r\n        \"This input element does not support Number values.\",\r\n        \"InvalidStateError\"\r\n      ]);\r\n    }\r\n\r\n    const allowedValueStep = this._allowedValueStep;\r\n    if (allowedValueStep === null) {\r\n      throw DOMException.create(this._globalObject, [\r\n        `Failed to invoke '${methodName}' method on 'HTMLInputElement': ` +\r\n        \"This input element does not support value step.\",\r\n        \"InvalidStateError\"\r\n      ]);\r\n    }\r\n\r\n    const min = this._minimum;\r\n    const max = this._maximum;\r\n\r\n    if (min !== null && max !== null) {\r\n      if (min > max) {\r\n        return;\r\n      }\r\n\r\n      const candidateStepValue = this._stepAlign(Decimal.add(min, allowedValueStep), /* roundUp = */ false);\r\n      if (candidateStepValue.lt(min) || candidateStepValue.gt(max)) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    let value = 0;\r\n    try {\r\n      value = this.valueAsNumber;\r\n      if (isNaN(value)) { // Empty value is parsed as NaN.\r\n        value = 0;\r\n      }\r\n    } catch (error) {\r\n      // Step 5. Default value is 0.\r\n    }\r\n    value = new Decimal(value);\r\n\r\n    const valueBeforeStepping = value;\r\n\r\n    if (!this._isStepAligned(value)) {\r\n      value = this._stepAlign(value, /* roundUp = */ isUp);\r\n    } else {\r\n      let delta = Decimal.mul(n, allowedValueStep);\r\n      if (!isUp) {\r\n        delta = delta.neg();\r\n      }\r\n      value = value.add(delta);\r\n    }\r\n\r\n    if (min !== null && value.lt(min)) {\r\n      value = this._stepAlign(min, /* roundUp = */ true);\r\n    }\r\n\r\n    if (max !== null && value.gt(max)) {\r\n      value = this._stepAlign(max, /* roundUp = */ false);\r\n    }\r\n\r\n    if (isUp ? value.lt(valueBeforeStepping) : value.gt(valueBeforeStepping)) {\r\n      return;\r\n    }\r\n\r\n    this._value = this._convertNumberToString(value.toNumber());\r\n  }\r\n\r\n  stepDown(n = 1) {\r\n    return this._stepUpdate(n, false);\r\n  }\r\n\r\n  stepUp(n = 1) {\r\n    return this._stepUpdate(n, true);\r\n  }\r\n\r\n  get files() {\r\n    if (this.type === \"file\") {\r\n      this[filesSymbol] = this[filesSymbol] || FileList.createImpl(this._globalObject);\r\n    } else {\r\n      this[filesSymbol] = null;\r\n    }\r\n    return this[filesSymbol];\r\n  }\r\n\r\n  set files(value) {\r\n    if (this.type === \"file\" && value !== null) {\r\n      this[filesSymbol] = value;\r\n    }\r\n  }\r\n\r\n  get type() {\r\n    const typeAttribute = this.getAttributeNS(null, \"type\");\r\n    return getTypeFromAttribute(typeAttribute);\r\n  }\r\n\r\n  set type(type) {\r\n    this.setAttributeNS(null, \"type\", type);\r\n  }\r\n\r\n  _dispatchSelectEvent() {\r\n    fireAnEvent(\"select\", this, undefined, { bubbles: true, cancelable: true });\r\n  }\r\n\r\n  _getValueLength() {\r\n    return typeof this.value === \"string\" ? this.value.length : 0;\r\n  }\r\n\r\n  select() {\r\n    if (!this._idlMemberApplies(\"select\")) {\r\n      return;\r\n    }\r\n\r\n    this._selectionStart = 0;\r\n    this._selectionEnd = this._getValueLength();\r\n    this._selectionDirection = \"none\";\r\n    this._dispatchSelectEvent();\r\n  }\r\n\r\n  get selectionStart() {\r\n    if (!this._idlMemberApplies(\"selectionStart\")) {\r\n      return null;\r\n    }\r\n\r\n    return this._selectionStart;\r\n  }\r\n\r\n  set selectionStart(start) {\r\n    if (!this._idlMemberApplies(\"selectionStart\")) {\r\n      throw DOMException.create(this._globalObject, [\"The object is in an invalid state.\", \"InvalidStateError\"]);\r\n    }\r\n\r\n    this.setSelectionRange(start, Math.max(start, this._selectionEnd), this._selectionDirection);\r\n  }\r\n\r\n  get selectionEnd() {\r\n    if (!this._idlMemberApplies(\"selectionEnd\")) {\r\n      return null;\r\n    }\r\n\r\n    return this._selectionEnd;\r\n  }\r\n\r\n  set selectionEnd(end) {\r\n    if (!this._idlMemberApplies(\"selectionEnd\")) {\r\n      throw DOMException.create(this._globalObject, [\"The object is in an invalid state.\", \"InvalidStateError\"]);\r\n    }\r\n\r\n    this.setSelectionRange(this._selectionStart, end, this._selectionDirection);\r\n  }\r\n\r\n  get selectionDirection() {\r\n    if (!this._idlMemberApplies(\"selectionDirection\")) {\r\n      return null;\r\n    }\r\n\r\n    return this._selectionDirection;\r\n  }\r\n\r\n  set selectionDirection(dir) {\r\n    if (!this._idlMemberApplies(\"selectionDirection\")) {\r\n      throw DOMException.create(this._globalObject, [\"The object is in an invalid state.\", \"InvalidStateError\"]);\r\n    }\r\n\r\n    this.setSelectionRange(this._selectionStart, this._selectionEnd, dir);\r\n  }\r\n\r\n  setSelectionRange(start, end, dir) {\r\n    if (!this._idlMemberApplies(\"setSelectionRange\")) {\r\n      throw DOMException.create(this._globalObject, [\"The object is in an invalid state.\", \"InvalidStateError\"]);\r\n    }\r\n\r\n    this._selectionEnd = Math.min(end, this._getValueLength());\r\n    this._selectionStart = Math.min(start, this._selectionEnd);\r\n    this._selectionDirection = dir === \"forward\" || dir === \"backward\" ? dir : \"none\";\r\n    this._dispatchSelectEvent();\r\n  }\r\n\r\n  setRangeText(repl, start, end, selectionMode = \"preserve\") {\r\n    if (!this._idlMemberApplies(\"setRangeText\")) {\r\n      throw DOMException.create(this._globalObject, [\"The object is in an invalid state.\", \"InvalidStateError\"]);\r\n    }\r\n\r\n    if (arguments.length < 2) {\r\n      start = this._selectionStart;\r\n      end = this._selectionEnd;\r\n    } else if (start > end) {\r\n      throw DOMException.create(this._globalObject, [\"The index is not in the allowed range.\", \"IndexSizeError\"]);\r\n    }\r\n\r\n    start = Math.min(start, this._getValueLength());\r\n    end = Math.min(end, this._getValueLength());\r\n\r\n    const val = this.value;\r\n    let selStart = this._selectionStart;\r\n    let selEnd = this._selectionEnd;\r\n\r\n    this.value = val.slice(0, start) + repl + val.slice(end);\r\n\r\n    const newEnd = start + this.value.length;\r\n\r\n    if (selectionMode === \"select\") {\r\n      this.setSelectionRange(start, newEnd);\r\n    } else if (selectionMode === \"start\") {\r\n      this.setSelectionRange(start, start);\r\n    } else if (selectionMode === \"end\") {\r\n      this.setSelectionRange(newEnd, newEnd);\r\n    } else { // preserve\r\n      const delta = repl.length - (end - start);\r\n\r\n      if (selStart > end) {\r\n        selStart += delta;\r\n      } else if (selStart > start) {\r\n        selStart = start;\r\n      }\r\n\r\n      if (selEnd > end) {\r\n        selEnd += delta;\r\n      } else if (selEnd > start) {\r\n        selEnd = newEnd;\r\n      }\r\n\r\n      this.setSelectionRange(selStart, selEnd);\r\n    }\r\n  }\r\n\r\n  // https://html.spec.whatwg.org/multipage/input.html#the-list-attribute\r\n  get list() {\r\n    const id = this._getAttributeIfApplies(\"list\");\r\n    if (!id) {\r\n      return null;\r\n    }\r\n\r\n    const el = this.getRootNode({}).getElementById(id);\r\n\r\n    if (el && el.localName === \"datalist\") {\r\n      return el;\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  // Reflected IDL attribute does not care about whether the content attribute applies.\r\n  get maxLength() {\r\n    if (!this.hasAttributeNS(null, \"maxlength\")) {\r\n      return 524288; // stole this from chrome\r\n    }\r\n    return parseInt(this.getAttributeNS(null, \"maxlength\"));\r\n  }\r\n\r\n  set maxLength(value) {\r\n    if (value < 0) {\r\n      throw DOMException.create(this._globalObject, [\"The index is not in the allowed range.\", \"IndexSizeError\"]);\r\n    }\r\n    this.setAttributeNS(null, \"maxlength\", String(value));\r\n  }\r\n\r\n  get minLength() {\r\n    if (!this.hasAttributeNS(null, \"minlength\")) {\r\n      return 0;\r\n    }\r\n    return parseInt(this.getAttributeNS(null, \"minlength\"));\r\n  }\r\n\r\n  set minLength(value) {\r\n    if (value < 0) {\r\n      throw DOMException.create(this._globalObject, [\"The index is not in the allowed range.\", \"IndexSizeError\"]);\r\n    }\r\n    this.setAttributeNS(null, \"minlength\", String(value));\r\n  }\r\n\r\n  get size() {\r\n    if (!this.hasAttributeNS(null, \"size\")) {\r\n      return 20;\r\n    }\r\n    return parseInt(this.getAttributeNS(null, \"size\"));\r\n  }\r\n\r\n  set size(value) {\r\n    if (value <= 0) {\r\n      throw DOMException.create(this._globalObject, [\"The index is not in the allowed range.\", \"IndexSizeError\"]);\r\n    }\r\n    this.setAttributeNS(null, \"size\", String(value));\r\n  }\r\n\r\n  // https://html.spec.whatwg.org/multipage/input.html#the-min-and-max-attributes\r\n  get _minimum() {\r\n    let min = this._defaultMinimum;\r\n    const attr = this._getAttributeIfApplies(\"min\");\r\n    if (attr !== null && this._convertStringToNumber !== undefined) {\r\n      const parsed = this._convertStringToNumber(attr);\r\n      if (parsed !== null) {\r\n        min = parsed;\r\n      }\r\n    }\r\n    return min;\r\n  }\r\n\r\n  get _maximum() {\r\n    let max = this._defaultMaximum;\r\n    const attr = this._getAttributeIfApplies(\"max\");\r\n    if (attr !== null && this._convertStringToNumber !== undefined) {\r\n      const parsed = this._convertStringToNumber(attr);\r\n      if (parsed !== null) {\r\n        max = parsed;\r\n      }\r\n    }\r\n    return max;\r\n  }\r\n\r\n  get _defaultMinimum() {\r\n    if (this.type === \"range\") {\r\n      return 0;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  get _defaultMaximum() {\r\n    if (this.type === \"range\") {\r\n      return 100;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  // https://html.spec.whatwg.org/multipage/input.html#concept-input-step\r\n  get _allowedValueStep() {\r\n    if (!this._contentAttributeApplies(\"step\")) {\r\n      return null;\r\n    }\r\n    const attr = this.getAttributeNS(null, \"step\");\r\n    if (attr === null) {\r\n      return this._defaultStep * this._stepScaleFactor;\r\n    }\r\n    if (asciiCaseInsensitiveMatch(attr, \"any\")) {\r\n      return null;\r\n    }\r\n    const parsedStep = parseFloatingPointNumber(attr);\r\n    if (parsedStep === null || parsedStep <= 0) {\r\n      return this._defaultStep * this._stepScaleFactor;\r\n    }\r\n    return parsedStep * this._stepScaleFactor;\r\n  }\r\n\r\n  // https://html.spec.whatwg.org/multipage/input.html#concept-input-step-scale\r\n  get _stepScaleFactor() {\r\n    const dayInMilliseconds = 24 * 60 * 60 * 1000;\r\n    switch (this.type) {\r\n      case \"week\":\r\n        return 7 * dayInMilliseconds;\r\n      case \"date\":\r\n        return dayInMilliseconds;\r\n      case \"datetime-local\":\r\n      case \"datetime\":\r\n      case \"time\":\r\n        return 1000;\r\n    }\r\n    return 1;\r\n  }\r\n\r\n  // https://html.spec.whatwg.org/multipage/input.html#concept-input-step-default\r\n  get _defaultStep() {\r\n    if (this.type === \"datetime-local\" || this.type === \"datetime\" || this.type === \"time\") {\r\n      return 60;\r\n    }\r\n    return 1;\r\n  }\r\n\r\n  // https://html.spec.whatwg.org/multipage/input.html#concept-input-min-zero\r\n  get _stepBase() {\r\n    if (this._hasAttributeAndApplies(\"min\")) {\r\n      const min = this._convertStringToNumber(this.getAttributeNS(null, \"min\"));\r\n      if (min !== null) {\r\n        return min;\r\n      }\r\n    }\r\n    if (this.hasAttributeNS(null, \"value\")) {\r\n      const value = this._convertStringToNumber(this.getAttributeNS(null, \"value\"));\r\n      if (value !== null) {\r\n        return value;\r\n      }\r\n    }\r\n    if (this._defaultStepBase !== null) {\r\n      return this._defaultStepBase;\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  // https://html.spec.whatwg.org/multipage/input.html#concept-input-step-default-base\r\n  get _defaultStepBase() {\r\n    if (this.type === \"week\") {\r\n      // The start of week 1970-W01\r\n      return -259200000;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  // https://html.spec.whatwg.org/multipage/input.html#common-input-element-attributes\r\n  // When an attribute doesn't apply to an input element, user agents must ignore the attribute.\r\n  _contentAttributeApplies(attribute) {\r\n    return applicableTypesForContentAttribute[attribute].has(this.type);\r\n  }\r\n\r\n  _hasAttributeAndApplies(attribute) {\r\n    return this._contentAttributeApplies(attribute) && this.hasAttributeNS(null, attribute);\r\n  }\r\n\r\n  _getAttributeIfApplies(attribute) {\r\n    if (this._contentAttributeApplies(attribute)) {\r\n      return this.getAttributeNS(null, attribute);\r\n    }\r\n    return null;\r\n  }\r\n\r\n  _idlMemberApplies(member, type = this.type) {\r\n    return applicableTypesForIDLMember[member].has(type);\r\n  }\r\n\r\n  _barredFromConstraintValidationSpecialization() {\r\n    // https://html.spec.whatwg.org/multipage/input.html#hidden-state-(type=hidden)\r\n    // https://html.spec.whatwg.org/multipage/input.html#reset-button-state-(type=reset)\r\n    // https://html.spec.whatwg.org/multipage/input.html#button-state-(type=button)\r\n    const willNotValidateTypes = new Set([\"hidden\", \"reset\", \"button\"]);\r\n    // https://html.spec.whatwg.org/multipage/input.html#attr-input-readonly\r\n    const readOnly = this._hasAttributeAndApplies(\"readonly\");\r\n\r\n    // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#attr-fe-disabled\r\n    return willNotValidateTypes.has(this.type) || readOnly;\r\n  }\r\n\r\n  // https://html.spec.whatwg.org/multipage/input.html#concept-input-required\r\n  get _required() {\r\n    return this._hasAttributeAndApplies(\"required\");\r\n  }\r\n\r\n  // https://html.spec.whatwg.org/multipage/input.html#has-a-periodic-domain\r\n  get _hasAPeriodicDomain() {\r\n    return this.type === \"time\";\r\n  }\r\n\r\n  // https://html.spec.whatwg.org/multipage/input.html#has-a-reversed-range\r\n  get _hasAReversedRange() {\r\n    return this._hasAPeriodicDomain && this._maximum < this._minimum;\r\n  }\r\n\r\n  get validity() {\r\n    if (!this._validity) {\r\n      // Constraint validation: When an element has a reversed range, and the result of applying\r\n      // the algorithm to convert a string to a number to the string given by the element's value\r\n      // is a number, and the number obtained from that algorithm is more than the maximum and less\r\n      // than the minimum, the element is simultaneously suffering from an underflow and suffering\r\n      // from an overflow.\r\n      const reversedRangeSufferingOverUnderflow = () => {\r\n        const parsedValue = this._convertStringToNumber(this._value);\r\n        return parsedValue !== null && parsedValue > this._maximum && parsedValue < this._minimum;\r\n      };\r\n\r\n      const state = {\r\n        // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#suffering-from-being-missing\r\n        valueMissing: () => {\r\n          // https://html.spec.whatwg.org/multipage/input.html#the-required-attribute\r\n          // Constraint validation: If the element is required, and its value IDL attribute applies\r\n          // and is in the mode value, and the element is mutable, and the element's value is the\r\n          // empty string, then the element is suffering from being missing.\r\n          //\r\n          // Note: As of today, the value IDL attribute always applies.\r\n          if (this._required && valueAttributeMode(this.type) === \"value\" && this._mutable && this._value === \"\") {\r\n            return true;\r\n          }\r\n\r\n          switch (this.type) {\r\n            // https://html.spec.whatwg.org/multipage/input.html#checkbox-state-(type=checkbox)\r\n            // Constraint validation: If the element is required and its checkedness is\r\n            // false, then the element is suffering from being missing.\r\n            case \"checkbox\":\r\n              if (this._required && !this._checkedness) {\r\n                return true;\r\n              }\r\n              break;\r\n\r\n            // https://html.spec.whatwg.org/multipage/input.html#radio-button-state-(type=radio)\r\n            // Constraint validation: If an element in the radio button group is required,\r\n            // and all of the input elements in the radio button group have a checkedness\r\n            // that is false, then the element is suffering from being missing.\r\n            case \"radio\":\r\n              if (this._someInRadioGroup(\"_required\") && !this._someInRadioGroup(\"checked\")) {\r\n                return true;\r\n              }\r\n              break;\r\n\r\n            // https://html.spec.whatwg.org/multipage/input.html#file-upload-state-(type=file)\r\n            // Constraint validation: If the element is required and the list of selected files is\r\n            // empty, then the element is suffering from being missing.\r\n            case \"file\":\r\n              if (this._required && this.files.length === 0) {\r\n                return true;\r\n              }\r\n              break;\r\n          }\r\n\r\n          return false;\r\n        },\r\n\r\n        // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#suffering-from-being-too-long\r\n        // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#attr-fe-maxlength\r\n        // jsdom has no way at the moment to emulate a user interaction, so tooLong/tooShort have\r\n        // to be set to false.\r\n        tooLong: () => false,\r\n\r\n        // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#suffering-from-being-too-short\r\n        // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#attr-fe-minlength\r\n        tooShort: () => false,\r\n\r\n        // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#suffering-from-an-overflow\r\n        rangeOverflow: () => {\r\n          // https://html.spec.whatwg.org/multipage/input.html#the-min-and-max-attributes\r\n          if (this._hasAReversedRange) {\r\n            return reversedRangeSufferingOverUnderflow();\r\n          }\r\n          // Constraint validation: When the element has a maximum and does not have a reversed\r\n          // range, and the result of applying the algorithm to convert a string to a number to the\r\n          // string given by the element's value is a number, and the number obtained from that\r\n          // algorithm is more than the maximum, the element is suffering from an overflow.\r\n          if (this._maximum !== null) {\r\n            const parsedValue = this._convertStringToNumber(this._value);\r\n            if (parsedValue !== null && parsedValue > this._maximum) {\r\n              return true;\r\n            }\r\n          }\r\n          return false;\r\n        },\r\n\r\n        // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#suffering-from-an-underflow\r\n        rangeUnderflow: () => {\r\n          // https://html.spec.whatwg.org/multipage/input.html#the-min-and-max-attributes\r\n          if (this._hasAReversedRange) {\r\n            return reversedRangeSufferingOverUnderflow();\r\n          }\r\n          // Constraint validation: When the element has a minimum and does not have a reversed\r\n          // range, and the result of applying the algorithm to convert a string to a number to the\r\n          // string given by the element's value is a number, and the number obtained from that\r\n          // algorithm is less than the minimum, the element is suffering from an underflow.\r\n          if (this._minimum !== null) {\r\n            const parsedValue = this._convertStringToNumber(this._value);\r\n            if (parsedValue !== null && parsedValue < this._minimum) {\r\n              return true;\r\n            }\r\n          }\r\n          return false;\r\n        },\r\n\r\n        // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#suffering-from-a-pattern-mismatch\r\n        patternMismatch: () => {\r\n          // https://html.spec.whatwg.org/multipage/input.html#the-pattern-attribute\r\n          if (this._value === \"\" || !this._hasAttributeAndApplies(\"pattern\")) {\r\n            return false;\r\n          }\r\n          let regExp;\r\n          try {\r\n            const pattern = this.getAttributeNS(null, \"pattern\");\r\n            // The pattern attribute should be matched against the entire value, not just any\r\n            // subset, so add ^ and $ anchors. But also check the validity of the regex itself\r\n            // first.\r\n            new RegExp(pattern, \"u\"); // eslint-disable-line no-new\r\n            regExp = new RegExp(\"^(?:\" + pattern + \")$\", \"u\");\r\n          } catch (e) {\r\n            return false;\r\n          }\r\n          if (this._hasAttributeAndApplies(\"multiple\")) {\r\n            return !splitOnCommas(this._value).every(value => regExp.test(value));\r\n          }\r\n          return !regExp.test(this._value);\r\n        },\r\n\r\n        // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#suffering-from-a-step-mismatch\r\n        // https://html.spec.whatwg.org/multipage/input.html#attr-input-step\r\n        stepMismatch: () => {\r\n          const allowedValueStep = this._allowedValueStep;\r\n          if (allowedValueStep === null) {\r\n            return false;\r\n          }\r\n          const number = this._convertStringToNumber(this._value);\r\n          return number !== null && !this._isStepAligned(number);\r\n        },\r\n\r\n        // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#suffering-from-a-type-mismatch\r\n        typeMismatch: () => {\r\n          switch (this.type) {\r\n            // https://html.spec.whatwg.org/multipage/input.html#url-state-(type=url)\r\n            // Constraint validation: While the value of the element is neither the empty string\r\n            // nor a valid absolute URL, the element is suffering from a type mismatch.\r\n            case \"url\":\r\n              if (this._value !== \"\" && !isValidAbsoluteURL(this._value)) {\r\n                return true;\r\n              }\r\n              break;\r\n\r\n            // https://html.spec.whatwg.org/multipage/input.html#e-mail-state-(type=email)\r\n            // Constraint validation [multiple=false]: While the value of the element is neither the empty\r\n            // string nor a single valid e - mail address, the element is suffering from a type mismatch.\r\n            // Constraint validation [multiple=true]: While the value of the element is not a valid e-mail address list,\r\n            // the element is suffering from a type mismatch.\r\n            case \"email\":\r\n              if (this._value !== \"\" && !isValidEmailAddress(this._getValue(), this.hasAttributeNS(null, \"multiple\"))) {\r\n                return true;\r\n              }\r\n              break;\r\n          }\r\n          return false;\r\n        }\r\n      };\r\n\r\n      this._validity = ValidityState.createImpl(this._globalObject, [], {\r\n        element: this,\r\n        state\r\n      });\r\n    }\r\n    return this._validity;\r\n  }\r\n\r\n  [cloningSteps](copy, node) {\r\n    copy._value = node._value;\r\n    copy._checkedness = node._checkedness;\r\n    copy._dirtyValue = node._dirtyValue;\r\n    copy._dirtyCheckedness = node._dirtyCheckedness;\r\n  }\r\n}\r\n\r\nmixin(HTMLInputElementImpl.prototype, DefaultConstraintValidationImpl.prototype);\r\n\r\nmodule.exports = {\r\n  implementation: HTMLInputElementImpl\r\n};\r\n"],"mappings":"AAAA,YAAY;;AACZ,MAAMA,YAAY,GAAGC,OAAO,CAAC,gCAAgC,CAAC;AAC9D,MAAMC,QAAQ,GAAGD,OAAO,CAAC,uBAAuB,CAAC;AACjD,MAAME,OAAO,GAAGF,OAAO,CAAC,YAAY,CAAC;AACrC,MAAMG,eAAe,GAAGH,OAAO,CAAC,oBAAoB,CAAC,CAACI,cAAc;AACpE,MAAMC,QAAQ,GAAGL,OAAO,CAAC,oBAAoB,CAAC;AAC9C,MAAMM,+BAA+B,GACnCN,OAAO,CAAC,2DAA2D,CAAC,CAACI,cAAc;AACrF,MAAMG,aAAa,GAAGP,OAAO,CAAC,4BAA4B,CAAC;AAC3D,MAAM;EAAEQ;AAAM,CAAC,GAAGR,OAAO,CAAC,aAAa,CAAC;AACxC,MAAM;EAAES,aAAa;EAAEC;AAAa,CAAC,GAAGV,OAAO,CAAC,+BAA+B,CAAC;AAChF,MAAM;EAAEW,qBAAqB;EAAEC;AAAU,CAAC,GAAGZ,OAAO,CAAC,0BAA0B,CAAC;AAChF,MAAM;EAAEa;AAAY,CAAC,GAAGb,OAAO,CAAC,mBAAmB,CAAC;AACpD,MAAM;EACJc,UAAU;EACVC,mBAAmB;EACnBC,kBAAkB;EAClBC;AACF,CAAC,GAAGjB,OAAO,CAAC,0BAA0B,CAAC;AACvC,MAAM;EACJkB,yBAAyB;EACzBC,cAAc;EACdC,wBAAwB;EACxBC;AACF,CAAC,GAAGrB,OAAO,CAAC,oBAAoB,CAAC;AACjC,MAAM;EAAEsB;AAAO,CAAC,GAAGtB,OAAO,CAAC,4BAA4B,CAAC;AACxD,MAAM;EACJuB,2BAA2B;EAC3BC,yBAAyB;EACzBC,mBAAmB;EACnBC;AACF,CAAC,GAAG1B,OAAO,CAAC,mCAAmC,CAAC;AAEhD,MAAM2B,WAAW,GAAGC,MAAM,CAAC,OAAO,CAAC;;AAEnC;AACA,MAAMC,iBAAiB,GAAG,IAAIC,GAAG,CAAC,CAChC,QAAQ,EAAE,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,KAAK,EAAE,OAAO,EAAE,UAAU,EAAE,MAAM,EACrE,OAAO,EAAE,MAAM,EAAE,MAAM,EAAE,gBAAgB,EAAE,QAAQ,EAAE,OAAO,EAAE,OAAO,EAAE,UAAU,EAAE,OAAO,EAC1F,MAAM,EAAE,QAAQ,EAAE,OAAO,EAAE,OAAO,EAAE,QAAQ,CAC7C,CAAC;;AAEF;;AAEA,MAAMC,mCAAmC,GAAG,IAAID,GAAG,CAAC,CAAC,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,KAAK,EAAE,UAAU,CAAC,CAAC;AACjG,MAAME,YAAY,GAAG,IAAIF,GAAG,CAAC,CAAC,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,EAAE,gBAAgB,EAAE,QAAQ,EAAE,OAAO,CAAC,CAAC;AAEpG,MAAMG,2BAA2B,GAAG;EAClCC,WAAW,EAAE,IAAIJ,GAAG,CAAC,CAAC,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC;EACvDK,aAAa,EAAEH,YAAY;EAE3BI,MAAM,EAAE,IAAIN,GAAG,CAAC,CACd,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,KAAK,EAAE,OAAO,EAAE,UAAU,EAAE,MAAM,EAAE,OAAO,EAAE,MAAM,EAC5E,MAAM,EAAE,gBAAgB,EAAE,QAAQ,EAAE,OAAO,EAAE,MAAM,CACpD,CAAC;EACFO,cAAc,EAAEN,mCAAmC;EACnDO,YAAY,EAAEP,mCAAmC;EACjDQ,kBAAkB,EAAER,mCAAmC;EACvDS,YAAY,EAAET,mCAAmC;EACjDU,iBAAiB,EAAEV,mCAAmC;EACtDW,QAAQ,EAAEV,YAAY;EACtBW,MAAM,EAAEX;AACV,CAAC;AAED,MAAMY,sBAAsB,GAAG,IAAId,GAAG,CAAC,CAAC,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,KAAK,EAAE,OAAO,EAAE,UAAU,CAAC,CAAC;AAC7F,MAAMe,aAAa,GACjB,IAAIf,GAAG,CAAC,CAAC,GAAGc,sBAAsB,EAAE,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,EAAE,gBAAgB,EAAE,QAAQ,CAAC,CAAC;AAEnG,MAAME,kCAAkC,GAAG;EACzCC,IAAI,EAAE,IAAIjB,GAAG,CAAC,CAAC,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,KAAK,EAAE,OAAO,EAAE,GAAGE,YAAY,EAAE,OAAO,CAAC,CAAC;EAClFgB,GAAG,EAAEhB,YAAY;EACjBiB,SAAS,EAAEL,sBAAsB;EACjCM,GAAG,EAAElB,YAAY;EACjBmB,SAAS,EAAEP,sBAAsB;EACjCQ,QAAQ,EAAE,IAAItB,GAAG,CAAC,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;EACpCuB,OAAO,EAAET,sBAAsB;EAC/BU,QAAQ,EAAET,aAAa;EACvBU,QAAQ,EAAE,IAAIzB,GAAG,CAAC,CAAC,GAAGe,aAAa,EAAE,UAAU,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;EAClEW,IAAI,EAAExB;AACR,CAAC;AAED,MAAMyB,yBAAyB,GAAG,IAAI3B,GAAG,CAAC,CAAC,QAAQ,EAAE,QAAQ,EAAE,OAAO,EAAE,OAAO,EAAE,QAAQ,CAAC,CAAC;AAC3F,MAAM4B,2BAA2B,GAAG,IAAI5B,GAAG,CAAC,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;AAElE,SAAS6B,kBAAkBA,CAACC,IAAI,EAAE;EAChC,IAAIH,yBAAyB,CAACI,GAAG,CAACD,IAAI,CAAC,EAAE;IACvC,OAAO,SAAS;EAClB;EACA,IAAIF,2BAA2B,CAACG,GAAG,CAACD,IAAI,CAAC,EAAE;IACzC,OAAO,YAAY;EACrB;EACA,IAAIA,IAAI,KAAK,MAAM,EAAE;IACnB,OAAO,UAAU;EACnB;EACA,OAAO,OAAO;AAChB;AAEA,SAASE,oBAAoBA,CAACC,aAAa,EAAE;EAC3C,IAAI,OAAOA,aAAa,KAAK,QAAQ,EAAE;IACrC,OAAO,MAAM;EACf;EACA,MAAMH,IAAI,GAAGzC,cAAc,CAAC4C,aAAa,CAAC;EAC1C,OAAOlC,iBAAiB,CAACgC,GAAG,CAACD,IAAI,CAAC,GAAGA,IAAI,GAAG,MAAM;AACpD;AAEA,MAAMI,oBAAoB,SAAS7D,eAAe,CAAC;EACjD8D,WAAWA,CAACC,YAAY,EAAEC,IAAI,EAAEC,WAAW,EAAE;IAC3C,KAAK,CAACF,YAAY,EAAEC,IAAI,EAAEC,WAAW,CAAC;IAEtC,IAAI,CAACC,eAAe,GAAG,IAAI,CAACC,aAAa,GAAG,CAAC;IAC7C,IAAI,CAACC,mBAAmB,GAAG,MAAM;IACjC,IAAI,CAACC,MAAM,GAAG,EAAE;IAChB,IAAI,CAACC,WAAW,GAAG,KAAK;IACxB,IAAI,CAACC,YAAY,GAAG,KAAK;IACzB,IAAI,CAACC,iBAAiB,GAAG,KAAK;IAE9B,IAAI,CAACC,qBAAqB,GAAG,IAAI;IACjC,IAAI,CAACC,mDAAmD,GAAG,KAAK;IAEhE,IAAI,CAACC,aAAa,GAAG,KAAK;IAE1B,IAAI,CAACC,2BAA2B,GAAG,EAAE;IAErC,IAAI,CAACC,OAAO,GAAG,IAAI;IAEnB,IAAI,CAACC,sBAAsB,GAAG,IAAI;EACpC;;EAEA;EACA,IAAIC,sBAAsBA,CAAA,EAAG;IAC3B,OAAO3D,2BAA2B,CAAC,IAAI,CAACqC,IAAI,CAAC;EAC/C;EAEA,IAAIuB,sBAAsBA,CAAA,EAAG;IAC3B,OAAOzD,2BAA2B,CAAC,IAAI,CAACkC,IAAI,CAAC;EAC/C;EAEA,IAAIwB,oBAAoBA,CAAA,EAAG;IACzB,OAAO3D,mBAAmB,CAAC,IAAI,CAACmC,IAAI,CAAC;EACvC;EAEA,IAAIyB,oBAAoBA,CAAA,EAAG;IACzB,OAAO7D,yBAAyB,CAAC,IAAI,CAACoC,IAAI,CAAC;EAC7C;EAEA0B,cAAcA,CAACC,CAAC,EAAE;IAChB,OAAO,IAAIrF,OAAO,CAACqF,CAAC,CAAC,CAACC,KAAK,CAAC,IAAI,CAACC,SAAS,CAAC,CACxCC,MAAM,CAAC,IAAI,CAACC,iBAAiB,CAAC,CAC9BC,MAAM,EAAE;EACb;;EAEA;EACAC,UAAUA,CAACN,CAAC,EAAEO,OAAO,EAAE;IACrB,MAAMC,gBAAgB,GAAG,IAAI,CAACJ,iBAAiB;IAC/C,MAAMK,QAAQ,GAAG,IAAI,CAACP,SAAS;IAE/B,OAAO,IAAIvF,OAAO,CAACqF,CAAC,CAAC,CAACC,KAAK,CAACQ,QAAQ,CAAC,CAClCC,SAAS,CAACF,gBAAgB,EAAED,OAAO,GAAG5F,OAAO,CAACgG,QAAQ,GAAGhG,OAAO,CAACiG,UAAU,CAAC,CAC5EC,GAAG,CAACJ,QAAQ,CAAC;EAClB;;EAEA;EACA;EACAK,SAASA,CAAA,EAAG;IACV,OAAO,IAAI,CAAC7B,MAAM;EACpB;EAEA8B,4BAA4BA,CAAA,EAAG;IAC7B,IAAI,IAAI,CAAC1C,IAAI,KAAK,UAAU,EAAE;MAC5B,IAAI,CAAC2C,OAAO,GAAG,CAAC,IAAI,CAACA,OAAO;MAC5B,IAAI,CAAC1B,mDAAmD,GAAG,IAAI,CAACC,aAAa;MAC7E,IAAI,CAACA,aAAa,GAAG,KAAK;IAC5B,CAAC,MAAM,IAAI,IAAI,CAAClB,IAAI,KAAK,OAAO,EAAE;MAChC,IAAI,CAACgB,qBAAqB,GAAG,IAAI,CAAC2B,OAAO;MACzC,IAAI,CAACA,OAAO,GAAG,IAAI;IACrB;EACF;EAEAC,iCAAiCA,CAAA,EAAG;IAClC,IAAI,IAAI,CAAC5C,IAAI,KAAK,UAAU,EAAE;MAC5B,IAAI,CAAC2C,OAAO,GAAG,CAAC,IAAI,CAACA,OAAO;MAC5B,IAAI,CAACzB,aAAa,GAAG,IAAI,CAACD,mDAAmD;IAC/E,CAAC,MAAM,IAAI,IAAI,CAACjB,IAAI,KAAK,OAAO,EAAE;MAChC,IAAI,IAAI,CAACgB,qBAAqB,KAAK,IAAI,EAAE;QACvC,IAAI,CAAC2B,OAAO,GAAG,IAAI,CAAC3B,qBAAqB;QACzC,IAAI,CAACA,qBAAqB,GAAG,IAAI;MACnC;IACF;EACF;EAEA6B,mBAAmBA,CAAA,EAAG;IACpB,IAAI,CAAC,IAAI,CAACC,QAAQ,IAAI,IAAI,CAAC9C,IAAI,KAAK,UAAU,IAAI,IAAI,CAACA,IAAI,KAAK,OAAO,EAAE;MACvE;IACF;IAEA,MAAM;MAAE+C;IAAK,CAAC,GAAG,IAAI;IAErB,IAAI,IAAI,CAAC/C,IAAI,KAAK,UAAU,IAAK,IAAI,CAACA,IAAI,KAAK,OAAO,IAAI,CAAC,IAAI,CAACgB,qBAAsB,EAAE;MACtF,IAAI,IAAI,CAACgC,WAAW,EAAE;QACpB/F,WAAW,CAAC,OAAO,EAAE,IAAI,EAAEgG,SAAS,EAAE;UAAEC,OAAO,EAAE;QAAK,CAAC,CAAC;QACxDjG,WAAW,CAAC,QAAQ,EAAE,IAAI,EAAEgG,SAAS,EAAE;UAAEC,OAAO,EAAE;QAAK,CAAC,CAAC;MAC3D;IACF,CAAC,MAAM,IAAIH,IAAI,IAAI,IAAI,CAAC/C,IAAI,KAAK,QAAQ,EAAE;MACzC+C,IAAI,CAACI,SAAS,EAAE;IAClB,CAAC,MAAM,IAAIJ,IAAI,IAAI,IAAI,CAAC/C,IAAI,KAAK,OAAO,EAAE;MACxC+C,IAAI,CAACK,QAAQ,EAAE;IACjB;EACF;EAEAC,aAAaA,CAACC,IAAI,EAAEC,KAAK,EAAEC,MAAM,EAAE;IACjC,MAAMC,OAAO,GAAGhH,QAAQ,CAACiH,cAAc,CAAC,IAAI,CAAC;IAC7C,IAAI,CAAC,IAAI,CAAC7C,WAAW,IAAIyC,IAAI,KAAK,OAAO,EAAE;MACzC,IAAI,CAAC1C,MAAM,GAAGvD,mBAAmB,CAAC,IAAI,EAAEoG,OAAO,CAACE,YAAY,CAAC;IAC/D;IACA,IAAI,CAAC,IAAI,CAAC5C,iBAAiB,IAAIuC,IAAI,KAAK,SAAS,EAAE;MACjD,IAAI,CAACxC,YAAY,GAAG2C,OAAO,CAACG,cAAc;MAC1C,IAAI,IAAI,CAAC9C,YAAY,EAAE;QACrB,IAAI,CAAC+C,4BAA4B,EAAE;MACrC;IACF;IAEA,IAAIP,IAAI,KAAK,MAAM,IAAIA,IAAI,KAAK,MAAM,EAAE;MACtC,IAAI,IAAI,CAACxC,YAAY,EAAE;QACrB,IAAI,CAAC+C,4BAA4B,EAAE;MACrC;IACF;IAEA,IAAIP,IAAI,KAAK,MAAM,EAAE;MACnB,MAAMQ,QAAQ,GAAG5D,oBAAoB,CAACsD,MAAM,CAAC;MAC7C,MAAMO,OAAO,GAAG7D,oBAAoB,CAACqD,KAAK,CAAC;MAC3C;MACA,IAAIO,QAAQ,KAAKC,OAAO,EAAE;QACxB,MAAMC,aAAa,GAAGjE,kBAAkB,CAAC+D,QAAQ,CAAC;QAClD,MAAMG,YAAY,GAAGlE,kBAAkB,CAACgE,OAAO,CAAC;QAChD,IAAIC,aAAa,KAAK,OAAO,IAAI,IAAI,CAACpD,MAAM,KAAK,EAAE,KAC9CqD,YAAY,KAAK,SAAS,IAAIA,YAAY,KAAK,YAAY,CAAC,EAAE;UACjE,IAAI,CAACC,cAAc,CAAC,IAAI,EAAE,OAAO,EAAE,IAAI,CAACtD,MAAM,CAAC;QACjD,CAAC,MAAM,IAAIoD,aAAa,KAAK,OAAO,IAAIC,YAAY,KAAK,OAAO,EAAE;UAChE,IAAI,CAACrD,MAAM,GAAG,IAAI,CAACuD,cAAc,CAAC,IAAI,EAAE,OAAO,CAAC,IAAI,EAAE;UACtD,IAAI,CAACtD,WAAW,GAAG,KAAK;QAC1B,CAAC,MAAM,IAAImD,aAAa,KAAK,UAAU,IAAIC,YAAY,KAAK,UAAU,EAAE;UACtE,IAAI,CAACrD,MAAM,GAAG,EAAE;QAClB;QAEA,IAAI,CAACwD,kBAAkB,EAAE;QAEzB,IAAI,CAACxD,MAAM,GAAGvD,mBAAmB,CAAC,IAAI,EAAE,IAAI,CAACuD,MAAM,CAAC;QAEpD,MAAMyD,oBAAoB,GAAG,IAAI,CAACC,iBAAiB,CAAC,cAAc,EAAER,QAAQ,CAAC;QAC7E,MAAMS,aAAa,GAAG,IAAI,CAACD,iBAAiB,CAAC,cAAc,EAAEP,OAAO,CAAC;QACrE,IAAI,CAACM,oBAAoB,IAAIE,aAAa,EAAE;UAC1C,IAAI,CAAC9D,eAAe,GAAG,CAAC;UACxB,IAAI,CAACC,aAAa,GAAG,CAAC;UACtB,IAAI,CAACC,mBAAmB,GAAG,MAAM;QACnC;MACF;IACF;IAEA,KAAK,CAAC0C,aAAa,CAACC,IAAI,EAAEC,KAAK,EAAEC,MAAM,CAAC;EAC1C;;EAEA;EACAY,kBAAkBA,CAAA,EAAG;IACnB,IAAI,IAAI,CAACtD,YAAY,EAAE;MACrB,IAAI,CAAC+C,4BAA4B,EAAE;IACrC;EACF;EAEAW,UAAUA,CAAA,EAAG;IACX,MAAMf,OAAO,GAAGhH,QAAQ,CAACiH,cAAc,CAAC,IAAI,CAAC;IAC7C,IAAI,CAAC9C,MAAM,GAAGvD,mBAAmB,CAAC,IAAI,EAAEoG,OAAO,CAACE,YAAY,CAAC;IAC7D,IAAI,CAAC9C,WAAW,GAAG,KAAK;IACxB,IAAI,CAACC,YAAY,GAAG2C,OAAO,CAACG,cAAc;IAC1C,IAAI,CAAC7C,iBAAiB,GAAG,KAAK;IAC9B,IAAI,IAAI,CAACD,YAAY,EAAE;MACrB,IAAI,CAAC+C,4BAA4B,EAAE;IACrC;EACF;EAEAY,iBAAiBA,CAAA,EAAG;IAClB,IAAI,IAAI,CAAC3D,YAAY,EAAE;MACrB,IAAI,CAAC+C,4BAA4B,EAAE;IACrC;EACF;EAEA,IAAIa,wBAAwBA,CAAA,EAAG;IAC7B,MAAMjB,OAAO,GAAGhH,QAAQ,CAACiH,cAAc,CAAC,IAAI,CAAC;IAC7C,MAAMiB,IAAI,GAAG,IAAI,CAACC,qBAAqB;IACvC,IAAI,CAACD,IAAI,EAAE;MACT,OAAO,EAAE;IACX;IAEA,MAAME,MAAM,GAAG,EAAE;IAEjB,MAAMC,WAAW,GAAGjI,aAAa,CAACkI,YAAY,CAACJ,IAAI,CAAC;IACpD,KAAK,MAAMK,SAAS,IAAIF,WAAW,EAAE;MACnC,IAAIE,SAAS,CAACJ,qBAAqB,KAAKD,IAAI,EAAE;QAC5C;MACF;MAEA,MAAMM,gBAAgB,GAAGxI,QAAQ,CAACiH,cAAc,CAACsB,SAAS,CAAC;MAC3D,IAAI,CAACC,gBAAgB,CAAC3B,IAAI,IAAI2B,gBAAgB,CAAC3B,IAAI,KAAKG,OAAO,CAACH,IAAI,EAAE;QACpE;MACF;MAEA,IAAI0B,SAAS,KAAK,IAAI,EAAE;QACtBH,MAAM,CAACK,IAAI,CAACF,SAAS,CAAC;MACxB;IACF;IACA,OAAOH,MAAM;EACf;EAEAhB,4BAA4BA,CAAA,EAAG;IAC7B,KAAK,MAAMsB,iBAAiB,IAAI,IAAI,CAACT,wBAAwB,EAAE;MAC7DS,iBAAiB,CAACrE,YAAY,GAAG,KAAK;IACxC;EACF;EAEA,IAAI8D,qBAAqBA,CAAA,EAAG;IAC1B,MAAMnB,OAAO,GAAGhH,QAAQ,CAACiH,cAAc,CAAC,IAAI,CAAC;IAC7C,IAAI,IAAI,CAAC1D,IAAI,KAAK,OAAO,IAAI,CAACyD,OAAO,CAACH,IAAI,EAAE;MAC1C,OAAO,IAAI;IACb;IAEA,IAAI8B,CAAC,GAAGvI,aAAa,CAACwI,MAAM,CAAC,IAAI,CAAC;IAClC,OAAOD,CAAC,EAAE;MACR;MACA;MACA,IAAI,CAACvI,aAAa,CAACwI,MAAM,CAACD,CAAC,CAAC,IAAIA,CAAC,CAACE,QAAQ,CAACC,WAAW,EAAE,KAAK,MAAM,EAAE;QACnE,OAAOH,CAAC;MACV;MACAA,CAAC,GAAGvI,aAAa,CAACwI,MAAM,CAACD,CAAC,CAAC;IAC7B;IACA,OAAO,IAAI;EACb;EAEAI,iBAAiBA,CAAClC,IAAI,EAAE;IACtB,IAAI,IAAI,CAACA,IAAI,CAAC,EAAE;MACd,OAAO,IAAI;IACb;IACA,OAAO,IAAI,CAACoB,wBAAwB,CAACe,IAAI,CAACN,iBAAiB,IAAIA,iBAAiB,CAAC7B,IAAI,CAAC,CAAC;EACzF;EAEA,IAAIR,QAAQA,CAAA,EAAG;IACb,OAAO,CAAC5F,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAACwI,uBAAuB,CAAC,UAAU,CAAC;EACvE;EAEA,IAAIC,MAAMA,CAAA,EAAG;IACX,OAAO5I,qBAAqB,CAAC,IAAI,CAAC;EACpC;EAEA,IAAIgG,IAAIA,CAAA,EAAG;IACT,OAAO/F,SAAS,CAAC,IAAI,CAAC;EACxB;EAEA,IAAI2F,OAAOA,CAAA,EAAG;IACZ,OAAO,IAAI,CAAC7B,YAAY;EAC1B;EAEA,IAAI6B,OAAOA,CAACA,OAAO,EAAE;IACnB,IAAI,CAAC7B,YAAY,GAAG8E,OAAO,CAACjD,OAAO,CAAC;IACpC,IAAI,CAAC5B,iBAAiB,GAAG,IAAI;IAC7B,IAAI,IAAI,CAACD,YAAY,EAAE;MACrB,IAAI,CAAC+C,4BAA4B,EAAE;IACrC;EACF;EAEA,IAAIN,KAAKA,CAAA,EAAG;IACV,QAAQxD,kBAAkB,CAAC,IAAI,CAACC,IAAI,CAAC;MACnC;MACA,KAAK,OAAO;QACV,OAAO,IAAI,CAACyC,SAAS,EAAE;MACzB;MACA,KAAK,SAAS;QAAE;UACd,MAAMoD,IAAI,GAAG,IAAI,CAAC1B,cAAc,CAAC,IAAI,EAAE,OAAO,CAAC;UAC/C,OAAO0B,IAAI,KAAK,IAAI,GAAGA,IAAI,GAAG,EAAE;QAClC;MACA;MACA,KAAK,YAAY;QAAE;UACjB,MAAMA,IAAI,GAAG,IAAI,CAAC1B,cAAc,CAAC,IAAI,EAAE,OAAO,CAAC;UAC/C,OAAO0B,IAAI,KAAK,IAAI,GAAGA,IAAI,GAAG,IAAI;QACpC;MACA;MACA,KAAK,UAAU;QACb,OAAO,IAAI,CAACC,KAAK,CAACC,MAAM,GAAG,gBAAgB,GAAG,IAAI,CAACD,KAAK,CAAC,CAAC,CAAC,CAACxC,IAAI,GAAG,EAAE;MACvE;QACE,MAAM,IAAI0C,KAAK,CAAC,oDAAoD,CAAC;IAAC;EAE5E;EAEA,IAAIzC,KAAKA,CAAC0C,GAAG,EAAE;IACb,QAAQlG,kBAAkB,CAAC,IAAI,CAACC,IAAI,CAAC;MACnC;MACA,KAAK,OAAO;QAAE;UACZ,MAAMkG,QAAQ,GAAG,IAAI,CAACtF,MAAM;UAC5B,IAAI,CAACA,MAAM,GAAGvD,mBAAmB,CAAC,IAAI,EAAE4I,GAAG,CAAC;UAC5C,IAAI,CAACpF,WAAW,GAAG,IAAI;UAEvB,IAAIqF,QAAQ,KAAK,IAAI,CAACtF,MAAM,EAAE;YAC5B,IAAI,CAACH,eAAe,GAAG,IAAI,CAACC,aAAa,GAAG,IAAI,CAACyF,eAAe,EAAE;YAClE,IAAI,CAACxF,mBAAmB,GAAG,MAAM;UACnC;UACA;QACF;;MAEA;MACA;MACA,KAAK,SAAS;MACd,KAAK,YAAY;QACf,IAAI,CAACuD,cAAc,CAAC,IAAI,EAAE,OAAO,EAAE+B,GAAG,CAAC;QACvC;;MAEF;MACA,KAAK,UAAU;QACb,IAAIA,GAAG,KAAK,EAAE,EAAE;UACd,IAAI,CAACH,KAAK,CAACC,MAAM,GAAG,CAAC;QACvB,CAAC,MAAM;UACL,MAAM5J,YAAY,CAACiK,MAAM,CAAC,IAAI,CAACC,aAAa,EAAE,CAC5C,oGAAoG,EACpG,mBAAmB,CACpB,CAAC;QACJ;QACA;MAEF;QACE,MAAM,IAAIL,KAAK,CAAC,oDAAoD,CAAC;IAAC;EAE5E;;EAEA;EACA,IAAI1H,WAAWA,CAAA,EAAG;IAChB,IAAI,CAAC,IAAI,CAACgG,iBAAiB,CAAC,aAAa,CAAC,EAAE;MAC1C,OAAO,IAAI;IACb;IAEA,MAAMgC,MAAM,GAAG,IAAI,CAACC,cAAc,CAACC,YAAY;IAC/C,MAAMC,cAAc,GAAG,IAAI,CAAChF,oBAAoB,CAAC,IAAI,CAACb,MAAM,CAAC;IAE7D,IAAI6F,cAAc,YAAYC,IAAI,EAAE;MAClC,OAAO,IAAIJ,MAAM,CAACI,IAAI,CAACD,cAAc,CAACE,OAAO,EAAE,CAAC;IAClD;IAEA,OAAO,IAAI;EACb;EAEA,IAAIrI,WAAWA,CAACqD,CAAC,EAAE;IACjB,IAAI,CAAC,IAAI,CAAC2C,iBAAiB,CAAC,aAAa,CAAC,EAAE;MAC1C,MAAMnI,YAAY,CAACiK,MAAM,CAAC,IAAI,CAACC,aAAa,EAAE,CAC5C,2GAA2G,GAC3G,SAAS,EACT,mBAAmB,CACpB,CAAC;IACJ;IAEA,IAAI1E,CAAC,KAAK,IAAI,IAAI,CAACjE,MAAM,CAACiE,CAAC,CAAC,EAAE;MAC5B,MAAM,IAAIiF,SAAS,CAAC,wFAAwF,GAC1G,aAAa,CAAC;IAClB;IAEA,IAAIjF,CAAC,KAAK,IAAI,IAAIkF,KAAK,CAAClF,CAAC,CAAC,EAAE;MAC1B,IAAI,CAACf,MAAM,GAAG,EAAE;IAClB;IAEA,IAAI,CAACA,MAAM,GAAG,IAAI,CAACY,oBAAoB,CAACG,CAAC,CAAC;EAC5C;;EAEA;EACA,IAAIpD,aAAaA,CAAA,EAAG;IAClB,IAAI,CAAC,IAAI,CAAC+F,iBAAiB,CAAC,eAAe,CAAC,EAAE;MAC5C,OAAOwC,GAAG;IACZ;IAEA,MAAMC,WAAW,GAAG,IAAI,CAACzF,sBAAsB,CAAC,IAAI,CAACV,MAAM,CAAC;IAC5D,OAAOmG,WAAW,KAAK,IAAI,GAAGA,WAAW,GAAGD,GAAG;EACjD;EAEA,IAAIvI,aAAaA,CAACoD,CAAC,EAAE;IACnB,IAAI,CAACqF,QAAQ,CAACrF,CAAC,CAAC,EAAE;MAChB,MAAM,IAAIiF,SAAS,CAAC,wCAAwC,CAAC;IAC/D;IAEA,IAAI,CAAC,IAAI,CAACtC,iBAAiB,CAAC,eAAe,CAAC,EAAE;MAC5C,MAAMnI,YAAY,CAACiK,MAAM,CAAC,IAAI,CAACC,aAAa,EAAE,CAC5C,wGAAwG,GACxG,gBAAgB,EAChB,mBAAmB,CACpB,CAAC;IACJ;IAEA,IAAI,CAACzF,MAAM,GAAG,IAAI,CAACW,sBAAsB,CAACI,CAAC,CAAC;EAC9C;;EAEA;EACAsF,WAAWA,CAACC,CAAC,EAAEC,IAAI,EAAE;IACnB,MAAMC,UAAU,GAAGD,IAAI,GAAG,QAAQ,GAAG,UAAU;IAC/C,IAAI,CAAC,IAAI,CAAC7C,iBAAiB,CAAC8C,UAAU,CAAC,EAAE;MACvC,MAAMjL,YAAY,CAACiK,MAAM,CAAC,IAAI,CAACC,aAAa,EAAE,CAC3C,qBAAoBe,UAAW,kCAAiC,GACjE,oDAAoD,EACpD,mBAAmB,CACpB,CAAC;IACJ;IAEA,MAAMjF,gBAAgB,GAAG,IAAI,CAACJ,iBAAiB;IAC/C,IAAII,gBAAgB,KAAK,IAAI,EAAE;MAC7B,MAAMhG,YAAY,CAACiK,MAAM,CAAC,IAAI,CAACC,aAAa,EAAE,CAC3C,qBAAoBe,UAAW,kCAAiC,GACjE,iDAAiD,EACjD,mBAAmB,CACpB,CAAC;IACJ;IAEA,MAAM9H,GAAG,GAAG,IAAI,CAAC+H,QAAQ;IACzB,MAAMjI,GAAG,GAAG,IAAI,CAACkI,QAAQ;IAEzB,IAAIhI,GAAG,KAAK,IAAI,IAAIF,GAAG,KAAK,IAAI,EAAE;MAChC,IAAIE,GAAG,GAAGF,GAAG,EAAE;QACb;MACF;MAEA,MAAMmI,kBAAkB,GAAG,IAAI,CAACtF,UAAU,CAAC3F,OAAO,CAACkG,GAAG,CAAClD,GAAG,EAAE6C,gBAAgB,CAAC,EAAE,eAAgB,KAAK,CAAC;MACrG,IAAIoF,kBAAkB,CAACC,EAAE,CAAClI,GAAG,CAAC,IAAIiI,kBAAkB,CAACE,EAAE,CAACrI,GAAG,CAAC,EAAE;QAC5D;MACF;IACF;IAEA,IAAImE,KAAK,GAAG,CAAC;IACb,IAAI;MACFA,KAAK,GAAG,IAAI,CAAChF,aAAa;MAC1B,IAAIsI,KAAK,CAACtD,KAAK,CAAC,EAAE;QAAE;QAClBA,KAAK,GAAG,CAAC;MACX;IACF,CAAC,CAAC,OAAOmE,KAAK,EAAE;MACd;IAAA;IAEFnE,KAAK,GAAG,IAAIjH,OAAO,CAACiH,KAAK,CAAC;IAE1B,MAAMoE,mBAAmB,GAAGpE,KAAK;IAEjC,IAAI,CAAC,IAAI,CAAC7B,cAAc,CAAC6B,KAAK,CAAC,EAAE;MAC/BA,KAAK,GAAG,IAAI,CAACtB,UAAU,CAACsB,KAAK,EAAE,eAAgB4D,IAAI,CAAC;IACtD,CAAC,MAAM;MACL,IAAIS,KAAK,GAAGtL,OAAO,CAACuL,GAAG,CAACX,CAAC,EAAE/E,gBAAgB,CAAC;MAC5C,IAAI,CAACgF,IAAI,EAAE;QACTS,KAAK,GAAGA,KAAK,CAACE,GAAG,EAAE;MACrB;MACAvE,KAAK,GAAGA,KAAK,CAACf,GAAG,CAACoF,KAAK,CAAC;IAC1B;IAEA,IAAItI,GAAG,KAAK,IAAI,IAAIiE,KAAK,CAACiE,EAAE,CAAClI,GAAG,CAAC,EAAE;MACjCiE,KAAK,GAAG,IAAI,CAACtB,UAAU,CAAC3C,GAAG,EAAE,eAAgB,IAAI,CAAC;IACpD;IAEA,IAAIF,GAAG,KAAK,IAAI,IAAImE,KAAK,CAACkE,EAAE,CAACrI,GAAG,CAAC,EAAE;MACjCmE,KAAK,GAAG,IAAI,CAACtB,UAAU,CAAC7C,GAAG,EAAE,eAAgB,KAAK,CAAC;IACrD;IAEA,IAAI+H,IAAI,GAAG5D,KAAK,CAACiE,EAAE,CAACG,mBAAmB,CAAC,GAAGpE,KAAK,CAACkE,EAAE,CAACE,mBAAmB,CAAC,EAAE;MACxE;IACF;IAEA,IAAI,CAAC/G,MAAM,GAAG,IAAI,CAACW,sBAAsB,CAACgC,KAAK,CAACwE,QAAQ,EAAE,CAAC;EAC7D;EAEAjJ,QAAQA,CAAA,EAAQ;IAAA,IAAPoI,CAAC,GAAAc,SAAA,CAAAjC,MAAA,QAAAiC,SAAA,QAAA/E,SAAA,GAAA+E,SAAA,MAAG,CAAC;IACZ,OAAO,IAAI,CAACf,WAAW,CAACC,CAAC,EAAE,KAAK,CAAC;EACnC;EAEAnI,MAAMA,CAAA,EAAQ;IAAA,IAAPmI,CAAC,GAAAc,SAAA,CAAAjC,MAAA,QAAAiC,SAAA,QAAA/E,SAAA,GAAA+E,SAAA,MAAG,CAAC;IACV,OAAO,IAAI,CAACf,WAAW,CAACC,CAAC,EAAE,IAAI,CAAC;EAClC;EAEA,IAAIpB,KAAKA,CAAA,EAAG;IACV,IAAI,IAAI,CAAC9F,IAAI,KAAK,MAAM,EAAE;MACxB,IAAI,CAACjC,WAAW,CAAC,GAAG,IAAI,CAACA,WAAW,CAAC,IAAI1B,QAAQ,CAAC4L,UAAU,CAAC,IAAI,CAAC5B,aAAa,CAAC;IAClF,CAAC,MAAM;MACL,IAAI,CAACtI,WAAW,CAAC,GAAG,IAAI;IAC1B;IACA,OAAO,IAAI,CAACA,WAAW,CAAC;EAC1B;EAEA,IAAI+H,KAAKA,CAACvC,KAAK,EAAE;IACf,IAAI,IAAI,CAACvD,IAAI,KAAK,MAAM,IAAIuD,KAAK,KAAK,IAAI,EAAE;MAC1C,IAAI,CAACxF,WAAW,CAAC,GAAGwF,KAAK;IAC3B;EACF;EAEA,IAAIvD,IAAIA,CAAA,EAAG;IACT,MAAMG,aAAa,GAAG,IAAI,CAACgE,cAAc,CAAC,IAAI,EAAE,MAAM,CAAC;IACvD,OAAOjE,oBAAoB,CAACC,aAAa,CAAC;EAC5C;EAEA,IAAIH,IAAIA,CAACA,IAAI,EAAE;IACb,IAAI,CAACkE,cAAc,CAAC,IAAI,EAAE,MAAM,EAAElE,IAAI,CAAC;EACzC;EAEAkI,oBAAoBA,CAAA,EAAG;IACrBjL,WAAW,CAAC,QAAQ,EAAE,IAAI,EAAEgG,SAAS,EAAE;MAAEC,OAAO,EAAE,IAAI;MAAEiF,UAAU,EAAE;IAAK,CAAC,CAAC;EAC7E;EAEAhC,eAAeA,CAAA,EAAG;IAChB,OAAO,OAAO,IAAI,CAAC5C,KAAK,KAAK,QAAQ,GAAG,IAAI,CAACA,KAAK,CAACwC,MAAM,GAAG,CAAC;EAC/D;EAEAvH,MAAMA,CAAA,EAAG;IACP,IAAI,CAAC,IAAI,CAAC8F,iBAAiB,CAAC,QAAQ,CAAC,EAAE;MACrC;IACF;IAEA,IAAI,CAAC7D,eAAe,GAAG,CAAC;IACxB,IAAI,CAACC,aAAa,GAAG,IAAI,CAACyF,eAAe,EAAE;IAC3C,IAAI,CAACxF,mBAAmB,GAAG,MAAM;IACjC,IAAI,CAACuH,oBAAoB,EAAE;EAC7B;EAEA,IAAIzJ,cAAcA,CAAA,EAAG;IACnB,IAAI,CAAC,IAAI,CAAC6F,iBAAiB,CAAC,gBAAgB,CAAC,EAAE;MAC7C,OAAO,IAAI;IACb;IAEA,OAAO,IAAI,CAAC7D,eAAe;EAC7B;EAEA,IAAIhC,cAAcA,CAAC2J,KAAK,EAAE;IACxB,IAAI,CAAC,IAAI,CAAC9D,iBAAiB,CAAC,gBAAgB,CAAC,EAAE;MAC7C,MAAMnI,YAAY,CAACiK,MAAM,CAAC,IAAI,CAACC,aAAa,EAAE,CAAC,oCAAoC,EAAE,mBAAmB,CAAC,CAAC;IAC5G;IAEA,IAAI,CAACxH,iBAAiB,CAACuJ,KAAK,EAAEC,IAAI,CAACjJ,GAAG,CAACgJ,KAAK,EAAE,IAAI,CAAC1H,aAAa,CAAC,EAAE,IAAI,CAACC,mBAAmB,CAAC;EAC9F;EAEA,IAAIjC,YAAYA,CAAA,EAAG;IACjB,IAAI,CAAC,IAAI,CAAC4F,iBAAiB,CAAC,cAAc,CAAC,EAAE;MAC3C,OAAO,IAAI;IACb;IAEA,OAAO,IAAI,CAAC5D,aAAa;EAC3B;EAEA,IAAIhC,YAAYA,CAAC4J,GAAG,EAAE;IACpB,IAAI,CAAC,IAAI,CAAChE,iBAAiB,CAAC,cAAc,CAAC,EAAE;MAC3C,MAAMnI,YAAY,CAACiK,MAAM,CAAC,IAAI,CAACC,aAAa,EAAE,CAAC,oCAAoC,EAAE,mBAAmB,CAAC,CAAC;IAC5G;IAEA,IAAI,CAACxH,iBAAiB,CAAC,IAAI,CAAC4B,eAAe,EAAE6H,GAAG,EAAE,IAAI,CAAC3H,mBAAmB,CAAC;EAC7E;EAEA,IAAIhC,kBAAkBA,CAAA,EAAG;IACvB,IAAI,CAAC,IAAI,CAAC2F,iBAAiB,CAAC,oBAAoB,CAAC,EAAE;MACjD,OAAO,IAAI;IACb;IAEA,OAAO,IAAI,CAAC3D,mBAAmB;EACjC;EAEA,IAAIhC,kBAAkBA,CAAC4J,GAAG,EAAE;IAC1B,IAAI,CAAC,IAAI,CAACjE,iBAAiB,CAAC,oBAAoB,CAAC,EAAE;MACjD,MAAMnI,YAAY,CAACiK,MAAM,CAAC,IAAI,CAACC,aAAa,EAAE,CAAC,oCAAoC,EAAE,mBAAmB,CAAC,CAAC;IAC5G;IAEA,IAAI,CAACxH,iBAAiB,CAAC,IAAI,CAAC4B,eAAe,EAAE,IAAI,CAACC,aAAa,EAAE6H,GAAG,CAAC;EACvE;EAEA1J,iBAAiBA,CAACuJ,KAAK,EAAEE,GAAG,EAAEC,GAAG,EAAE;IACjC,IAAI,CAAC,IAAI,CAACjE,iBAAiB,CAAC,mBAAmB,CAAC,EAAE;MAChD,MAAMnI,YAAY,CAACiK,MAAM,CAAC,IAAI,CAACC,aAAa,EAAE,CAAC,oCAAoC,EAAE,mBAAmB,CAAC,CAAC;IAC5G;IAEA,IAAI,CAAC3F,aAAa,GAAG2H,IAAI,CAAC/I,GAAG,CAACgJ,GAAG,EAAE,IAAI,CAACnC,eAAe,EAAE,CAAC;IAC1D,IAAI,CAAC1F,eAAe,GAAG4H,IAAI,CAAC/I,GAAG,CAAC8I,KAAK,EAAE,IAAI,CAAC1H,aAAa,CAAC;IAC1D,IAAI,CAACC,mBAAmB,GAAG4H,GAAG,KAAK,SAAS,IAAIA,GAAG,KAAK,UAAU,GAAGA,GAAG,GAAG,MAAM;IACjF,IAAI,CAACL,oBAAoB,EAAE;EAC7B;EAEAtJ,YAAYA,CAAC4J,IAAI,EAAEJ,KAAK,EAAEE,GAAG,EAA8B;IAAA,IAA5BG,aAAa,GAAAT,SAAA,CAAAjC,MAAA,QAAAiC,SAAA,QAAA/E,SAAA,GAAA+E,SAAA,MAAG,UAAU;IACvD,IAAI,CAAC,IAAI,CAAC1D,iBAAiB,CAAC,cAAc,CAAC,EAAE;MAC3C,MAAMnI,YAAY,CAACiK,MAAM,CAAC,IAAI,CAACC,aAAa,EAAE,CAAC,oCAAoC,EAAE,mBAAmB,CAAC,CAAC;IAC5G;IAEA,IAAI2B,SAAS,CAACjC,MAAM,GAAG,CAAC,EAAE;MACxBqC,KAAK,GAAG,IAAI,CAAC3H,eAAe;MAC5B6H,GAAG,GAAG,IAAI,CAAC5H,aAAa;IAC1B,CAAC,MAAM,IAAI0H,KAAK,GAAGE,GAAG,EAAE;MACtB,MAAMnM,YAAY,CAACiK,MAAM,CAAC,IAAI,CAACC,aAAa,EAAE,CAAC,wCAAwC,EAAE,gBAAgB,CAAC,CAAC;IAC7G;IAEA+B,KAAK,GAAGC,IAAI,CAAC/I,GAAG,CAAC8I,KAAK,EAAE,IAAI,CAACjC,eAAe,EAAE,CAAC;IAC/CmC,GAAG,GAAGD,IAAI,CAAC/I,GAAG,CAACgJ,GAAG,EAAE,IAAI,CAACnC,eAAe,EAAE,CAAC;IAE3C,MAAMF,GAAG,GAAG,IAAI,CAAC1C,KAAK;IACtB,IAAImF,QAAQ,GAAG,IAAI,CAACjI,eAAe;IACnC,IAAIkI,MAAM,GAAG,IAAI,CAACjI,aAAa;IAE/B,IAAI,CAAC6C,KAAK,GAAG0C,GAAG,CAAC2C,KAAK,CAAC,CAAC,EAAER,KAAK,CAAC,GAAGI,IAAI,GAAGvC,GAAG,CAAC2C,KAAK,CAACN,GAAG,CAAC;IAExD,MAAMO,MAAM,GAAGT,KAAK,GAAG,IAAI,CAAC7E,KAAK,CAACwC,MAAM;IAExC,IAAI0C,aAAa,KAAK,QAAQ,EAAE;MAC9B,IAAI,CAAC5J,iBAAiB,CAACuJ,KAAK,EAAES,MAAM,CAAC;IACvC,CAAC,MAAM,IAAIJ,aAAa,KAAK,OAAO,EAAE;MACpC,IAAI,CAAC5J,iBAAiB,CAACuJ,KAAK,EAAEA,KAAK,CAAC;IACtC,CAAC,MAAM,IAAIK,aAAa,KAAK,KAAK,EAAE;MAClC,IAAI,CAAC5J,iBAAiB,CAACgK,MAAM,EAAEA,MAAM,CAAC;IACxC,CAAC,MAAM;MAAE;MACP,MAAMjB,KAAK,GAAGY,IAAI,CAACzC,MAAM,IAAIuC,GAAG,GAAGF,KAAK,CAAC;MAEzC,IAAIM,QAAQ,GAAGJ,GAAG,EAAE;QAClBI,QAAQ,IAAId,KAAK;MACnB,CAAC,MAAM,IAAIc,QAAQ,GAAGN,KAAK,EAAE;QAC3BM,QAAQ,GAAGN,KAAK;MAClB;MAEA,IAAIO,MAAM,GAAGL,GAAG,EAAE;QAChBK,MAAM,IAAIf,KAAK;MACjB,CAAC,MAAM,IAAIe,MAAM,GAAGP,KAAK,EAAE;QACzBO,MAAM,GAAGE,MAAM;MACjB;MAEA,IAAI,CAAChK,iBAAiB,CAAC6J,QAAQ,EAAEC,MAAM,CAAC;IAC1C;EACF;;EAEA;EACA,IAAIxJ,IAAIA,CAAA,EAAG;IACT,MAAM2J,EAAE,GAAG,IAAI,CAACC,sBAAsB,CAAC,MAAM,CAAC;IAC9C,IAAI,CAACD,EAAE,EAAE;MACP,OAAO,IAAI;IACb;IAEA,MAAME,EAAE,GAAG,IAAI,CAACC,WAAW,CAAC,CAAC,CAAC,CAAC,CAACC,cAAc,CAACJ,EAAE,CAAC;IAElD,IAAIE,EAAE,IAAIA,EAAE,CAACG,SAAS,KAAK,UAAU,EAAE;MACrC,OAAOH,EAAE;IACX;IAEA,OAAO,IAAI;EACb;;EAEA;EACA,IAAII,SAASA,CAAA,EAAG;IACd,IAAI,CAAC,IAAI,CAACC,cAAc,CAAC,IAAI,EAAE,WAAW,CAAC,EAAE;MAC3C,OAAO,MAAM,CAAC,CAAC;IACjB;;IACA,OAAOC,QAAQ,CAAC,IAAI,CAACnF,cAAc,CAAC,IAAI,EAAE,WAAW,CAAC,CAAC;EACzD;EAEA,IAAIiF,SAASA,CAAC7F,KAAK,EAAE;IACnB,IAAIA,KAAK,GAAG,CAAC,EAAE;MACb,MAAMpH,YAAY,CAACiK,MAAM,CAAC,IAAI,CAACC,aAAa,EAAE,CAAC,wCAAwC,EAAE,gBAAgB,CAAC,CAAC;IAC7G;IACA,IAAI,CAACnC,cAAc,CAAC,IAAI,EAAE,WAAW,EAAEqF,MAAM,CAAChG,KAAK,CAAC,CAAC;EACvD;EAEA,IAAIiG,SAASA,CAAA,EAAG;IACd,IAAI,CAAC,IAAI,CAACH,cAAc,CAAC,IAAI,EAAE,WAAW,CAAC,EAAE;MAC3C,OAAO,CAAC;IACV;IACA,OAAOC,QAAQ,CAAC,IAAI,CAACnF,cAAc,CAAC,IAAI,EAAE,WAAW,CAAC,CAAC;EACzD;EAEA,IAAIqF,SAASA,CAACjG,KAAK,EAAE;IACnB,IAAIA,KAAK,GAAG,CAAC,EAAE;MACb,MAAMpH,YAAY,CAACiK,MAAM,CAAC,IAAI,CAACC,aAAa,EAAE,CAAC,wCAAwC,EAAE,gBAAgB,CAAC,CAAC;IAC7G;IACA,IAAI,CAACnC,cAAc,CAAC,IAAI,EAAE,WAAW,EAAEqF,MAAM,CAAChG,KAAK,CAAC,CAAC;EACvD;EAEA,IAAIkG,IAAIA,CAAA,EAAG;IACT,IAAI,CAAC,IAAI,CAACJ,cAAc,CAAC,IAAI,EAAE,MAAM,CAAC,EAAE;MACtC,OAAO,EAAE;IACX;IACA,OAAOC,QAAQ,CAAC,IAAI,CAACnF,cAAc,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;EACpD;EAEA,IAAIsF,IAAIA,CAAClG,KAAK,EAAE;IACd,IAAIA,KAAK,IAAI,CAAC,EAAE;MACd,MAAMpH,YAAY,CAACiK,MAAM,CAAC,IAAI,CAACC,aAAa,EAAE,CAAC,wCAAwC,EAAE,gBAAgB,CAAC,CAAC;IAC7G;IACA,IAAI,CAACnC,cAAc,CAAC,IAAI,EAAE,MAAM,EAAEqF,MAAM,CAAChG,KAAK,CAAC,CAAC;EAClD;;EAEA;EACA,IAAI8D,QAAQA,CAAA,EAAG;IACb,IAAI/H,GAAG,GAAG,IAAI,CAACoK,eAAe;IAC9B,MAAM7D,IAAI,GAAG,IAAI,CAACkD,sBAAsB,CAAC,KAAK,CAAC;IAC/C,IAAIlD,IAAI,KAAK,IAAI,IAAI,IAAI,CAACvE,sBAAsB,KAAK2B,SAAS,EAAE;MAC9D,MAAM0G,MAAM,GAAG,IAAI,CAACrI,sBAAsB,CAACuE,IAAI,CAAC;MAChD,IAAI8D,MAAM,KAAK,IAAI,EAAE;QACnBrK,GAAG,GAAGqK,MAAM;MACd;IACF;IACA,OAAOrK,GAAG;EACZ;EAEA,IAAIgI,QAAQA,CAAA,EAAG;IACb,IAAIlI,GAAG,GAAG,IAAI,CAACwK,eAAe;IAC9B,MAAM/D,IAAI,GAAG,IAAI,CAACkD,sBAAsB,CAAC,KAAK,CAAC;IAC/C,IAAIlD,IAAI,KAAK,IAAI,IAAI,IAAI,CAACvE,sBAAsB,KAAK2B,SAAS,EAAE;MAC9D,MAAM0G,MAAM,GAAG,IAAI,CAACrI,sBAAsB,CAACuE,IAAI,CAAC;MAChD,IAAI8D,MAAM,KAAK,IAAI,EAAE;QACnBvK,GAAG,GAAGuK,MAAM;MACd;IACF;IACA,OAAOvK,GAAG;EACZ;EAEA,IAAIsK,eAAeA,CAAA,EAAG;IACpB,IAAI,IAAI,CAAC1J,IAAI,KAAK,OAAO,EAAE;MACzB,OAAO,CAAC;IACV;IACA,OAAO,IAAI;EACb;EAEA,IAAI4J,eAAeA,CAAA,EAAG;IACpB,IAAI,IAAI,CAAC5J,IAAI,KAAK,OAAO,EAAE;MACzB,OAAO,GAAG;IACZ;IACA,OAAO,IAAI;EACb;;EAEA;EACA,IAAI+B,iBAAiBA,CAAA,EAAG;IACtB,IAAI,CAAC,IAAI,CAAC8H,wBAAwB,CAAC,MAAM,CAAC,EAAE;MAC1C,OAAO,IAAI;IACb;IACA,MAAMhE,IAAI,GAAG,IAAI,CAAC1B,cAAc,CAAC,IAAI,EAAE,MAAM,CAAC;IAC9C,IAAI0B,IAAI,KAAK,IAAI,EAAE;MACjB,OAAO,IAAI,CAACiE,YAAY,GAAG,IAAI,CAACC,gBAAgB;IAClD;IACA,IAAIzM,yBAAyB,CAACuI,IAAI,EAAE,KAAK,CAAC,EAAE;MAC1C,OAAO,IAAI;IACb;IACA,MAAMmE,UAAU,GAAGxM,wBAAwB,CAACqI,IAAI,CAAC;IACjD,IAAImE,UAAU,KAAK,IAAI,IAAIA,UAAU,IAAI,CAAC,EAAE;MAC1C,OAAO,IAAI,CAACF,YAAY,GAAG,IAAI,CAACC,gBAAgB;IAClD;IACA,OAAOC,UAAU,GAAG,IAAI,CAACD,gBAAgB;EAC3C;;EAEA;EACA,IAAIA,gBAAgBA,CAAA,EAAG;IACrB,MAAME,iBAAiB,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI;IAC7C,QAAQ,IAAI,CAACjK,IAAI;MACf,KAAK,MAAM;QACT,OAAO,CAAC,GAAGiK,iBAAiB;MAC9B,KAAK,MAAM;QACT,OAAOA,iBAAiB;MAC1B,KAAK,gBAAgB;MACrB,KAAK,UAAU;MACf,KAAK,MAAM;QACT,OAAO,IAAI;IAAC;IAEhB,OAAO,CAAC;EACV;;EAEA;EACA,IAAIH,YAAYA,CAAA,EAAG;IACjB,IAAI,IAAI,CAAC9J,IAAI,KAAK,gBAAgB,IAAI,IAAI,CAACA,IAAI,KAAK,UAAU,IAAI,IAAI,CAACA,IAAI,KAAK,MAAM,EAAE;MACtF,OAAO,EAAE;IACX;IACA,OAAO,CAAC;EACV;;EAEA;EACA,IAAI6B,SAASA,CAAA,EAAG;IACd,IAAI,IAAI,CAAC6D,uBAAuB,CAAC,KAAK,CAAC,EAAE;MACvC,MAAMpG,GAAG,GAAG,IAAI,CAACgC,sBAAsB,CAAC,IAAI,CAAC6C,cAAc,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;MACzE,IAAI7E,GAAG,KAAK,IAAI,EAAE;QAChB,OAAOA,GAAG;MACZ;IACF;IACA,IAAI,IAAI,CAAC+J,cAAc,CAAC,IAAI,EAAE,OAAO,CAAC,EAAE;MACtC,MAAM9F,KAAK,GAAG,IAAI,CAACjC,sBAAsB,CAAC,IAAI,CAAC6C,cAAc,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;MAC7E,IAAIZ,KAAK,KAAK,IAAI,EAAE;QAClB,OAAOA,KAAK;MACd;IACF;IACA,IAAI,IAAI,CAAC2G,gBAAgB,KAAK,IAAI,EAAE;MAClC,OAAO,IAAI,CAACA,gBAAgB;IAC9B;IACA,OAAO,CAAC;EACV;;EAEA;EACA,IAAIA,gBAAgBA,CAAA,EAAG;IACrB,IAAI,IAAI,CAAClK,IAAI,KAAK,MAAM,EAAE;MACxB;MACA,OAAO,CAAC,SAAS;IACnB;IACA,OAAO,IAAI;EACb;;EAEA;EACA;EACA6J,wBAAwBA,CAACM,SAAS,EAAE;IAClC,OAAOjL,kCAAkC,CAACiL,SAAS,CAAC,CAAClK,GAAG,CAAC,IAAI,CAACD,IAAI,CAAC;EACrE;EAEA0F,uBAAuBA,CAACyE,SAAS,EAAE;IACjC,OAAO,IAAI,CAACN,wBAAwB,CAACM,SAAS,CAAC,IAAI,IAAI,CAACd,cAAc,CAAC,IAAI,EAAEc,SAAS,CAAC;EACzF;EAEApB,sBAAsBA,CAACoB,SAAS,EAAE;IAChC,IAAI,IAAI,CAACN,wBAAwB,CAACM,SAAS,CAAC,EAAE;MAC5C,OAAO,IAAI,CAAChG,cAAc,CAAC,IAAI,EAAEgG,SAAS,CAAC;IAC7C;IACA,OAAO,IAAI;EACb;EAEA7F,iBAAiBA,CAAC8F,MAAM,EAAoB;IAAA,IAAlBpK,IAAI,GAAAgI,SAAA,CAAAjC,MAAA,QAAAiC,SAAA,QAAA/E,SAAA,GAAA+E,SAAA,MAAG,IAAI,CAAChI,IAAI;IACxC,OAAO3B,2BAA2B,CAAC+L,MAAM,CAAC,CAACnK,GAAG,CAACD,IAAI,CAAC;EACtD;EAEAqK,6CAA6CA,CAAA,EAAG;IAC9C;IACA;IACA;IACA,MAAMC,oBAAoB,GAAG,IAAIpM,GAAG,CAAC,CAAC,QAAQ,EAAE,OAAO,EAAE,QAAQ,CAAC,CAAC;IACnE;IACA,MAAMqM,QAAQ,GAAG,IAAI,CAAC7E,uBAAuB,CAAC,UAAU,CAAC;;IAEzD;IACA,OAAO4E,oBAAoB,CAACrK,GAAG,CAAC,IAAI,CAACD,IAAI,CAAC,IAAIuK,QAAQ;EACxD;;EAEA;EACA,IAAIC,SAASA,CAAA,EAAG;IACd,OAAO,IAAI,CAAC9E,uBAAuB,CAAC,UAAU,CAAC;EACjD;;EAEA;EACA,IAAI+E,mBAAmBA,CAAA,EAAG;IACxB,OAAO,IAAI,CAACzK,IAAI,KAAK,MAAM;EAC7B;;EAEA;EACA,IAAI0K,kBAAkBA,CAAA,EAAG;IACvB,OAAO,IAAI,CAACD,mBAAmB,IAAI,IAAI,CAACnD,QAAQ,GAAG,IAAI,CAACD,QAAQ;EAClE;EAEA,IAAIsD,QAAQA,CAAA,EAAG;IACb,IAAI,CAAC,IAAI,CAACC,SAAS,EAAE;MACnB;MACA;MACA;MACA;MACA;MACA,MAAMC,mCAAmC,GAAGA,CAAA,KAAM;QAChD,MAAM9D,WAAW,GAAG,IAAI,CAACzF,sBAAsB,CAAC,IAAI,CAACV,MAAM,CAAC;QAC5D,OAAOmG,WAAW,KAAK,IAAI,IAAIA,WAAW,GAAG,IAAI,CAACO,QAAQ,IAAIP,WAAW,GAAG,IAAI,CAACM,QAAQ;MAC3F,CAAC;MAED,MAAMyD,KAAK,GAAG;QACZ;QACAC,YAAY,EAAEA,CAAA,KAAM;UAClB;UACA;UACA;UACA;UACA;UACA;UACA,IAAI,IAAI,CAACP,SAAS,IAAIzK,kBAAkB,CAAC,IAAI,CAACC,IAAI,CAAC,KAAK,OAAO,IAAI,IAAI,CAAC8C,QAAQ,IAAI,IAAI,CAAClC,MAAM,KAAK,EAAE,EAAE;YACtG,OAAO,IAAI;UACb;UAEA,QAAQ,IAAI,CAACZ,IAAI;YACf;YACA;YACA;YACA,KAAK,UAAU;cACb,IAAI,IAAI,CAACwK,SAAS,IAAI,CAAC,IAAI,CAAC1J,YAAY,EAAE;gBACxC,OAAO,IAAI;cACb;cACA;;YAEF;YACA;YACA;YACA;YACA,KAAK,OAAO;cACV,IAAI,IAAI,CAAC0E,iBAAiB,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAACA,iBAAiB,CAAC,SAAS,CAAC,EAAE;gBAC7E,OAAO,IAAI;cACb;cACA;;YAEF;YACA;YACA;YACA,KAAK,MAAM;cACT,IAAI,IAAI,CAACgF,SAAS,IAAI,IAAI,CAAC1E,KAAK,CAACC,MAAM,KAAK,CAAC,EAAE;gBAC7C,OAAO,IAAI;cACb;cACA;UAAM;UAGV,OAAO,KAAK;QACd,CAAC;QAED;QACA;QACA;QACA;QACAiF,OAAO,EAAEA,CAAA,KAAM,KAAK;QAEpB;QACA;QACAC,QAAQ,EAAEA,CAAA,KAAM,KAAK;QAErB;QACAC,aAAa,EAAEA,CAAA,KAAM;UACnB;UACA,IAAI,IAAI,CAACR,kBAAkB,EAAE;YAC3B,OAAOG,mCAAmC,EAAE;UAC9C;UACA;UACA;UACA;UACA;UACA,IAAI,IAAI,CAACvD,QAAQ,KAAK,IAAI,EAAE;YAC1B,MAAMP,WAAW,GAAG,IAAI,CAACzF,sBAAsB,CAAC,IAAI,CAACV,MAAM,CAAC;YAC5D,IAAImG,WAAW,KAAK,IAAI,IAAIA,WAAW,GAAG,IAAI,CAACO,QAAQ,EAAE;cACvD,OAAO,IAAI;YACb;UACF;UACA,OAAO,KAAK;QACd,CAAC;QAED;QACA6D,cAAc,EAAEA,CAAA,KAAM;UACpB;UACA,IAAI,IAAI,CAACT,kBAAkB,EAAE;YAC3B,OAAOG,mCAAmC,EAAE;UAC9C;UACA;UACA;UACA;UACA;UACA,IAAI,IAAI,CAACxD,QAAQ,KAAK,IAAI,EAAE;YAC1B,MAAMN,WAAW,GAAG,IAAI,CAACzF,sBAAsB,CAAC,IAAI,CAACV,MAAM,CAAC;YAC5D,IAAImG,WAAW,KAAK,IAAI,IAAIA,WAAW,GAAG,IAAI,CAACM,QAAQ,EAAE;cACvD,OAAO,IAAI;YACb;UACF;UACA,OAAO,KAAK;QACd,CAAC;QAED;QACA+D,eAAe,EAAEA,CAAA,KAAM;UACrB;UACA,IAAI,IAAI,CAACxK,MAAM,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC8E,uBAAuB,CAAC,SAAS,CAAC,EAAE;YAClE,OAAO,KAAK;UACd;UACA,IAAI2F,MAAM;UACV,IAAI;YACF,MAAM5L,OAAO,GAAG,IAAI,CAAC0E,cAAc,CAAC,IAAI,EAAE,SAAS,CAAC;YACpD;YACA;YACA;YACA,IAAImH,MAAM,CAAC7L,OAAO,EAAE,GAAG,CAAC,CAAC,CAAC;YAC1B4L,MAAM,GAAG,IAAIC,MAAM,CAAC,MAAM,GAAG7L,OAAO,GAAG,IAAI,EAAE,GAAG,CAAC;UACnD,CAAC,CAAC,OAAO2F,CAAC,EAAE;YACV,OAAO,KAAK;UACd;UACA,IAAI,IAAI,CAACM,uBAAuB,CAAC,UAAU,CAAC,EAAE;YAC5C,OAAO,CAACjI,aAAa,CAAC,IAAI,CAACmD,MAAM,CAAC,CAAC2K,KAAK,CAAChI,KAAK,IAAI8H,MAAM,CAACG,IAAI,CAACjI,KAAK,CAAC,CAAC;UACvE;UACA,OAAO,CAAC8H,MAAM,CAACG,IAAI,CAAC,IAAI,CAAC5K,MAAM,CAAC;QAClC,CAAC;QAED;QACA;QACA6K,YAAY,EAAEA,CAAA,KAAM;UAClB,MAAMtJ,gBAAgB,GAAG,IAAI,CAACJ,iBAAiB;UAC/C,IAAII,gBAAgB,KAAK,IAAI,EAAE;YAC7B,OAAO,KAAK;UACd;UACA,MAAMuJ,MAAM,GAAG,IAAI,CAACpK,sBAAsB,CAAC,IAAI,CAACV,MAAM,CAAC;UACvD,OAAO8K,MAAM,KAAK,IAAI,IAAI,CAAC,IAAI,CAAChK,cAAc,CAACgK,MAAM,CAAC;QACxD,CAAC;QAED;QACAC,YAAY,EAAEA,CAAA,KAAM;UAClB,QAAQ,IAAI,CAAC3L,IAAI;YACf;YACA;YACA;YACA,KAAK,KAAK;cACR,IAAI,IAAI,CAACY,MAAM,KAAK,EAAE,IAAI,CAACxD,kBAAkB,CAAC,IAAI,CAACwD,MAAM,CAAC,EAAE;gBAC1D,OAAO,IAAI;cACb;cACA;;YAEF;YACA;YACA;YACA;YACA;YACA,KAAK,OAAO;cACV,IAAI,IAAI,CAACA,MAAM,KAAK,EAAE,IAAI,CAACzD,mBAAmB,CAAC,IAAI,CAACsF,SAAS,EAAE,EAAE,IAAI,CAAC4G,cAAc,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC,EAAE;gBACvG,OAAO,IAAI;cACb;cACA;UAAM;UAEV,OAAO,KAAK;QACd;MACF,CAAC;MAED,IAAI,CAACuB,SAAS,GAAGjO,aAAa,CAACsL,UAAU,CAAC,IAAI,CAAC5B,aAAa,EAAE,EAAE,EAAE;QAChEuF,OAAO,EAAE,IAAI;QACbd;MACF,CAAC,CAAC;IACJ;IACA,OAAO,IAAI,CAACF,SAAS;EACvB;EAEA,CAAC9N,YAAY,EAAE+O,IAAI,EAAEC,IAAI,EAAE;IACzBD,IAAI,CAACjL,MAAM,GAAGkL,IAAI,CAAClL,MAAM;IACzBiL,IAAI,CAAC/K,YAAY,GAAGgL,IAAI,CAAChL,YAAY;IACrC+K,IAAI,CAAChL,WAAW,GAAGiL,IAAI,CAACjL,WAAW;IACnCgL,IAAI,CAAC9K,iBAAiB,GAAG+K,IAAI,CAAC/K,iBAAiB;EACjD;AACF;AAEAnE,KAAK,CAACwD,oBAAoB,CAAC2L,SAAS,EAAErP,+BAA+B,CAACqP,SAAS,CAAC;AAEhFC,MAAM,CAACC,OAAO,GAAG;EACfzP,cAAc,EAAE4D;AAClB,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}