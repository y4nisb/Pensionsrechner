{"ast":null,"code":"\"use strict\";\n\n/**\r\n * Queue for all the resources to be download except async scripts.\r\n * Async scripts have their own queue AsyncResourceQueue.\r\n */\nmodule.exports = class ResourceQueue {\n  constructor() {\n    let {\n      paused,\n      asyncQueue\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    this.paused = Boolean(paused);\n    this._asyncQueue = asyncQueue;\n  }\n  getLastScript() {\n    let head = this.tail;\n    while (head) {\n      if (head.isScript) {\n        return head;\n      }\n      head = head.prev;\n    }\n    return null;\n  }\n  _moreScripts() {\n    let found = false;\n    let head = this.tail;\n    while (head && !found) {\n      found = head.isScript;\n      head = head.prev;\n    }\n    return found;\n  }\n  _notify() {\n    if (this._listener) {\n      this._listener();\n    }\n  }\n  setListener(listener) {\n    this._listener = listener;\n  }\n  push(request, onLoad, onError, keepLast, element) {\n    const isScript = element ? element.localName === \"script\" : false;\n    if (!request) {\n      if (isScript && !this._moreScripts()) {\n        return onLoad();\n      }\n      request = Promise.resolve();\n    }\n    const q = this;\n    const item = {\n      isScript,\n      err: null,\n      element,\n      fired: false,\n      data: null,\n      keepLast,\n      prev: q.tail,\n      check() {\n        if (!q.paused && !this.prev && this.fired) {\n          let promise;\n          if (this.err && onError) {\n            promise = onError(this.err);\n          }\n          if (!this.err && onLoad) {\n            promise = onLoad(this.data);\n          }\n          Promise.resolve(promise).then(() => {\n            if (this.next) {\n              this.next.prev = null;\n              this.next.check();\n            } else {\n              // q.tail===this\n              q.tail = null;\n              q._notify();\n            }\n            this.finished = true;\n            if (q._asyncQueue) {\n              q._asyncQueue.notifyItem(this);\n            }\n          });\n        }\n      }\n    };\n    if (q.tail) {\n      if (q.tail.keepLast) {\n        // if the tail is the load event in document and we receive a new element to load\n        // we should add this new request before the load event.\n        if (q.tail.prev) {\n          q.tail.prev.next = item;\n        }\n        item.prev = q.tail.prev;\n        q.tail.prev = item;\n        item.next = q.tail;\n      } else {\n        q.tail.next = item;\n        q.tail = item;\n      }\n    } else {\n      q.tail = item;\n    }\n    return request.then(data => {\n      item.fired = 1;\n      item.data = data;\n      item.check();\n    }).catch(err => {\n      item.fired = true;\n      item.err = err;\n      item.check();\n    });\n  }\n  resume() {\n    if (!this.paused) {\n      return;\n    }\n    this.paused = false;\n    let head = this.tail;\n    while (head && head.prev) {\n      head = head.prev;\n    }\n    if (head) {\n      head.check();\n    }\n  }\n};","map":{"version":3,"names":["module","exports","ResourceQueue","constructor","paused","asyncQueue","arguments","length","undefined","Boolean","_asyncQueue","getLastScript","head","tail","isScript","prev","_moreScripts","found","_notify","_listener","setListener","listener","push","request","onLoad","onError","keepLast","element","localName","Promise","resolve","q","item","err","fired","data","check","promise","then","next","finished","notifyItem","catch","resume"],"sources":["C:/Users/noodp/Documents/GitHub/Pensionsrechner/client/node_modules/jsdom/lib/jsdom/browser/resources/resource-queue.js"],"sourcesContent":["\"use strict\";\r\n\r\n/**\r\n * Queue for all the resources to be download except async scripts.\r\n * Async scripts have their own queue AsyncResourceQueue.\r\n */\r\nmodule.exports = class ResourceQueue {\r\n  constructor({ paused, asyncQueue } = {}) {\r\n    this.paused = Boolean(paused);\r\n    this._asyncQueue = asyncQueue;\r\n  }\r\n\r\n  getLastScript() {\r\n    let head = this.tail;\r\n\r\n    while (head) {\r\n      if (head.isScript) {\r\n        return head;\r\n      }\r\n      head = head.prev;\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  _moreScripts() {\r\n    let found = false;\r\n\r\n    let head = this.tail;\r\n    while (head && !found) {\r\n      found = head.isScript;\r\n      head = head.prev;\r\n    }\r\n\r\n    return found;\r\n  }\r\n\r\n  _notify() {\r\n    if (this._listener) {\r\n      this._listener();\r\n    }\r\n  }\r\n\r\n  setListener(listener) {\r\n    this._listener = listener;\r\n  }\r\n\r\n  push(request, onLoad, onError, keepLast, element) {\r\n    const isScript = element ? element.localName === \"script\" : false;\r\n\r\n    if (!request) {\r\n      if (isScript && !this._moreScripts()) {\r\n        return onLoad();\r\n      }\r\n\r\n      request = Promise.resolve();\r\n    }\r\n    const q = this;\r\n    const item = {\r\n      isScript,\r\n      err: null,\r\n      element,\r\n      fired: false,\r\n      data: null,\r\n      keepLast,\r\n      prev: q.tail,\r\n      check() {\r\n        if (!q.paused && !this.prev && this.fired) {\r\n          let promise;\r\n\r\n          if (this.err && onError) {\r\n            promise = onError(this.err);\r\n          }\r\n\r\n          if (!this.err && onLoad) {\r\n            promise = onLoad(this.data);\r\n          }\r\n\r\n          Promise.resolve(promise)\r\n            .then(() => {\r\n              if (this.next) {\r\n                this.next.prev = null;\r\n                this.next.check();\r\n              } else { // q.tail===this\r\n                q.tail = null;\r\n                q._notify();\r\n              }\r\n\r\n              this.finished = true;\r\n\r\n              if (q._asyncQueue) {\r\n                q._asyncQueue.notifyItem(this);\r\n              }\r\n            });\r\n        }\r\n      }\r\n    };\r\n    if (q.tail) {\r\n      if (q.tail.keepLast) {\r\n        // if the tail is the load event in document and we receive a new element to load\r\n        // we should add this new request before the load event.\r\n        if (q.tail.prev) {\r\n          q.tail.prev.next = item;\r\n        }\r\n        item.prev = q.tail.prev;\r\n        q.tail.prev = item;\r\n        item.next = q.tail;\r\n      } else {\r\n        q.tail.next = item;\r\n        q.tail = item;\r\n      }\r\n    } else {\r\n      q.tail = item;\r\n    }\r\n    return request\r\n      .then(data => {\r\n        item.fired = 1;\r\n        item.data = data;\r\n        item.check();\r\n      })\r\n      .catch(err => {\r\n        item.fired = true;\r\n        item.err = err;\r\n        item.check();\r\n      });\r\n  }\r\n\r\n  resume() {\r\n    if (!this.paused) {\r\n      return;\r\n    }\r\n    this.paused = false;\r\n\r\n    let head = this.tail;\r\n    while (head && head.prev) {\r\n      head = head.prev;\r\n    }\r\n    if (head) {\r\n      head.check();\r\n    }\r\n  }\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}