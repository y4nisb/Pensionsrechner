{"ast":null,"code":"\"use strict\";\n\nconst {\n  CookieJar\n} = require(\"tough-cookie\");\nconst NodeImpl = require(\"./Node-impl\").implementation;\nconst idlUtils = require(\"../generated/utils\");\nconst NODE_TYPE = require(\"../node-type\");\nconst {\n  hasWeakRefs,\n  mixin,\n  memoizeQuery\n} = require(\"../../utils\");\nconst {\n  firstChildWithLocalName,\n  firstChildWithLocalNames,\n  firstDescendantWithLocalName\n} = require(\"../helpers/traversal\");\nconst whatwgURL = require(\"whatwg-url\");\nconst StyleSheetList = require(\"../generated/StyleSheetList.js\");\nconst {\n  domSymbolTree\n} = require(\"../helpers/internal-constants\");\nconst eventAccessors = require(\"../helpers/create-event-accessor\");\nconst {\n  asciiLowercase,\n  stripAndCollapseASCIIWhitespace\n} = require(\"../helpers/strings\");\nconst {\n  childTextContent\n} = require(\"../helpers/text\");\nconst {\n  HTML_NS,\n  SVG_NS\n} = require(\"../helpers/namespaces\");\nconst DOMException = require(\"domexception/webidl2js-wrapper\");\nconst {\n  parseIntoDocument\n} = require(\"../../browser/parser\");\nconst History = require(\"../generated/History\");\nconst Location = require(\"../generated/Location\");\nconst HTMLCollection = require(\"../generated/HTMLCollection\");\nconst NodeList = require(\"../generated/NodeList\");\nconst validateName = require(\"../helpers/validate-names\").name;\nconst {\n  validateAndExtract\n} = require(\"../helpers/validate-names\");\nconst {\n  fireAnEvent\n} = require(\"../helpers/events\");\nconst {\n  shadowIncludingInclusiveDescendantsIterator\n} = require(\"../helpers/shadow-dom\");\nconst {\n  enqueueCECallbackReaction\n} = require(\"../helpers/custom-elements\");\nconst {\n  createElement,\n  internalCreateElementNSSteps\n} = require(\"../helpers/create-element\");\nconst IterableWeakSet = require(\"../helpers/iterable-weak-set\");\nconst DocumentOrShadowRootImpl = require(\"./DocumentOrShadowRoot-impl\").implementation;\nconst GlobalEventHandlersImpl = require(\"./GlobalEventHandlers-impl\").implementation;\nconst NonElementParentNodeImpl = require(\"./NonElementParentNode-impl\").implementation;\nconst ParentNodeImpl = require(\"./ParentNode-impl\").implementation;\nconst {\n  clone,\n  listOfElementsWithQualifiedName,\n  listOfElementsWithNamespaceAndLocalName,\n  listOfElementsWithClassNames\n} = require(\"../node\");\nconst generatedAttr = require(\"../generated/Attr\");\nconst Comment = require(\"../generated/Comment\");\nconst ProcessingInstruction = require(\"../generated/ProcessingInstruction\");\nconst CDATASection = require(\"../generated/CDATASection\");\nconst Text = require(\"../generated/Text\");\nconst DocumentFragment = require(\"../generated/DocumentFragment\");\nconst DOMImplementation = require(\"../generated/DOMImplementation\");\nconst TreeWalker = require(\"../generated/TreeWalker\");\nconst NodeIterator = require(\"../generated/NodeIterator\");\nconst ShadowRoot = require(\"../generated/ShadowRoot\");\nconst Range = require(\"../generated/Range\");\nconst documents = require(\"../documents.js\");\nconst CustomEvent = require(\"../generated/CustomEvent\");\nconst ErrorEvent = require(\"../generated/ErrorEvent\");\nconst Event = require(\"../generated/Event\");\nconst FocusEvent = require(\"../generated/FocusEvent\");\nconst HashChangeEvent = require(\"../generated/HashChangeEvent\");\nconst KeyboardEvent = require(\"../generated/KeyboardEvent\");\nconst MessageEvent = require(\"../generated/MessageEvent\");\nconst MouseEvent = require(\"../generated/MouseEvent\");\nconst PopStateEvent = require(\"../generated/PopStateEvent\");\nconst ProgressEvent = require(\"../generated/ProgressEvent\");\nconst TouchEvent = require(\"../generated/TouchEvent\");\nconst UIEvent = require(\"../generated/UIEvent\");\nconst RequestManager = require(\"../../browser/resources/request-manager\");\nconst AsyncResourceQueue = require(\"../../browser/resources/async-resource-queue\");\nconst ResourceQueue = require(\"../../browser/resources/resource-queue\");\nconst PerDocumentResourceLoader = require(\"../../browser/resources/per-document-resource-loader\");\nfunction clearChildNodes(node) {\n  for (let child = domSymbolTree.firstChild(node); child; child = domSymbolTree.firstChild(node)) {\n    node.removeChild(child);\n  }\n}\nfunction pad(number) {\n  if (number < 10) {\n    return \"0\" + number;\n  }\n  return number;\n}\nfunction toLastModifiedString(date) {\n  return pad(date.getMonth() + 1) + \"/\" + pad(date.getDate()) + \"/\" + date.getFullYear() + \" \" + pad(date.getHours()) + \":\" + pad(date.getMinutes()) + \":\" + pad(date.getSeconds());\n}\nconst eventInterfaceTable = {\n  customevent: CustomEvent,\n  errorevent: ErrorEvent,\n  event: Event,\n  events: Event,\n  focusevent: FocusEvent,\n  hashchangeevent: HashChangeEvent,\n  htmlevents: Event,\n  keyboardevent: KeyboardEvent,\n  messageevent: MessageEvent,\n  mouseevent: MouseEvent,\n  mouseevents: MouseEvent,\n  popstateevent: PopStateEvent,\n  progressevent: ProgressEvent,\n  svgevents: Event,\n  touchevent: TouchEvent,\n  uievent: UIEvent,\n  uievents: UIEvent\n};\nclass DocumentImpl extends NodeImpl {\n  constructor(globalObject, args, privateData) {\n    super(globalObject, args, privateData);\n    this._initGlobalEvents();\n    this._ownerDocument = this;\n    this.nodeType = NODE_TYPE.DOCUMENT_NODE;\n    if (!privateData.options) {\n      privateData.options = {};\n    }\n    if (!privateData.options.parsingMode) {\n      privateData.options.parsingMode = \"xml\";\n    }\n    if (!privateData.options.encoding) {\n      privateData.options.encoding = \"UTF-8\";\n    }\n    if (!privateData.options.contentType) {\n      privateData.options.contentType = privateData.options.parsingMode === \"xml\" ? \"application/xml\" : \"text/html\";\n    }\n    this._parsingMode = privateData.options.parsingMode;\n    this._implementation = DOMImplementation.createImpl(this._globalObject, [], {\n      ownerDocument: this\n    });\n    this._defaultView = privateData.options.defaultView || null;\n    this._global = privateData.options.global;\n    this._ids = Object.create(null);\n    this._attached = true;\n    this._currentScript = null;\n    this._pageShowingFlag = false;\n    this._cookieJar = privateData.options.cookieJar;\n    this._parseOptions = privateData.options.parseOptions || {};\n    this._scriptingDisabled = privateData.options.scriptingDisabled;\n    if (this._cookieJar === undefined) {\n      this._cookieJar = new CookieJar(null, {\n        looseMode: true\n      });\n    }\n    if (this._scriptingDisabled) {\n      this._parseOptions.scriptingEnabled = false;\n    }\n    this.contentType = privateData.options.contentType;\n    this._encoding = privateData.options.encoding;\n    const urlOption = privateData.options.url === undefined ? \"about:blank\" : privateData.options.url;\n    const parsed = whatwgURL.parseURL(urlOption);\n    if (parsed === null) {\n      throw new TypeError(`Could not parse \"${urlOption}\" as a URL`);\n    }\n    this._URL = parsed;\n    this._origin = urlOption === \"about:blank\" && privateData.options.parentOrigin ? privateData.options.parentOrigin : whatwgURL.serializeURLOrigin(this._URL);\n    this._location = Location.createImpl(this._globalObject, [], {\n      relevantDocument: this\n    });\n    this._history = History.createImpl(this._globalObject, [], {\n      window: this._defaultView,\n      document: this,\n      actAsIfLocationReloadCalled: () => this._location.reload()\n    });\n    if (hasWeakRefs) {\n      this._workingNodeIterators = new IterableWeakSet();\n    } else {\n      this._workingNodeIterators = [];\n    }\n    this._referrer = privateData.options.referrer || \"\";\n    this._lastModified = toLastModifiedString(privateData.options.lastModified || new Date());\n    this._asyncQueue = new AsyncResourceQueue();\n    this._queue = new ResourceQueue({\n      asyncQueue: this._asyncQueue,\n      paused: false\n    });\n    this._deferQueue = new ResourceQueue({\n      paused: true\n    });\n    this._requestManager = new RequestManager();\n    this._currentDocumentReadiness = privateData.options.readyState || \"loading\";\n    this._lastFocusedElement = null;\n    this._resourceLoader = new PerDocumentResourceLoader(this);\n\n    // Each Document in a browsing context can also have a latest entry. This is the entry for that Document\n    // to which the browsing context's session history was most recently traversed. When a Document is created,\n    // it initially has no latest entry.\n    this._latestEntry = null;\n\n    // https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#throw-on-dynamic-markup-insertion-counter\n    this._throwOnDynamicMarkupInsertionCounter = 0;\n  }\n  _getTheParent(event) {\n    if (event.type === \"load\" || !this._defaultView) {\n      return null;\n    }\n    return idlUtils.implForWrapper(this._defaultView);\n  }\n  get compatMode() {\n    return this._parsingMode === \"xml\" || this.doctype ? \"CSS1Compat\" : \"BackCompat\";\n  }\n  get charset() {\n    return this._encoding;\n  }\n  get characterSet() {\n    return this._encoding;\n  }\n  get inputEncoding() {\n    return this._encoding;\n  }\n  get doctype() {\n    for (const childNode of domSymbolTree.childrenIterator(this)) {\n      if (childNode.nodeType === NODE_TYPE.DOCUMENT_TYPE_NODE) {\n        return childNode;\n      }\n    }\n    return null;\n  }\n  get URL() {\n    return whatwgURL.serializeURL(this._URL);\n  }\n  get documentURI() {\n    return whatwgURL.serializeURL(this._URL);\n  }\n  get location() {\n    return this._defaultView ? this._location : null;\n  }\n\n  // https://dom.spec.whatwg.org/#dom-document-documentelement\n  get documentElement() {\n    for (const childNode of domSymbolTree.childrenIterator(this)) {\n      if (childNode.nodeType === NODE_TYPE.ELEMENT_NODE) {\n        return childNode;\n      }\n    }\n    return null;\n  }\n  get implementation() {\n    return this._implementation;\n  }\n  set implementation(implementation) {\n    this._implementation = implementation;\n  }\n  get defaultView() {\n    return this._defaultView;\n  }\n  get currentScript() {\n    return this._currentScript;\n  }\n  get readyState() {\n    return this._currentDocumentReadiness;\n  }\n  set readyState(state) {\n    this._currentDocumentReadiness = state;\n    fireAnEvent(\"readystatechange\", this);\n  }\n  hasFocus() {\n    return Boolean(this._lastFocusedElement);\n  }\n  _descendantRemoved(parent, child) {\n    if (child.tagName === \"STYLE\") {\n      this.styleSheets._remove(child.sheet);\n    }\n    super._descendantRemoved(parent, child);\n  }\n  write() {\n    let text = \"\";\n    for (let i = 0; i < arguments.length; ++i) {\n      text += i < 0 || arguments.length <= i ? undefined : arguments[i];\n    }\n    if (this._parsingMode === \"xml\") {\n      throw DOMException.create(this._globalObject, [\"Cannot use document.write on XML documents\", \"InvalidStateError\"]);\n    }\n    if (this._throwOnDynamicMarkupInsertionCounter > 0) {\n      throw DOMException.create(this._globalObject, [\"Cannot use document.write while a custom element upgrades\", \"InvalidStateError\"]);\n    }\n    if (this._writeAfterElement) {\n      // If called from an script element directly (during the first tick),\n      // the new elements are inserted right after that element.\n      const tempDiv = this.createElement(\"div\");\n      tempDiv.innerHTML = text;\n      let child = tempDiv.firstChild;\n      let previous = this._writeAfterElement;\n      const parent = this._writeAfterElement.parentNode;\n      while (child) {\n        const node = child;\n        child = child.nextSibling;\n        node._isMovingDueToDocumentWrite = true; // hack for script execution\n        parent.insertBefore(node, previous.nextSibling);\n        node._isMovingDueToDocumentWrite = false;\n        previous = node;\n      }\n    } else if (this.readyState === \"loading\") {\n      // During page loading, document.write appends to the current element\n      // Find the last child that has been added to the document.\n      if (this.lastChild) {\n        let node = this;\n        while (node.lastChild && node.lastChild.nodeType === NODE_TYPE.ELEMENT_NODE) {\n          node = node.lastChild;\n        }\n        node.innerHTML = text;\n      } else {\n        clearChildNodes(this);\n        parseIntoDocument(text, this);\n      }\n    } else if (text) {\n      clearChildNodes(this);\n      parseIntoDocument(text, this);\n    }\n  }\n  writeln() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    this.write(...args, \"\\n\");\n  }\n\n  // This is implemented separately for Document (which has a _ids cache) and DocumentFragment (which does not).\n  getElementById(id) {\n    if (!this._ids[id]) {\n      return null;\n    }\n\n    // Let's find the first element with where it's root is the document.\n    const matchElement = this._ids[id].find(candidate => {\n      let root = candidate;\n      while (domSymbolTree.parent(root)) {\n        root = domSymbolTree.parent(root);\n      }\n      return root === this;\n    });\n    return matchElement || null;\n  }\n  get referrer() {\n    return this._referrer || \"\";\n  }\n  get lastModified() {\n    return this._lastModified;\n  }\n  get images() {\n    return this.getElementsByTagName(\"IMG\");\n  }\n  get embeds() {\n    return this.getElementsByTagName(\"EMBED\");\n  }\n  get plugins() {\n    return this.embeds;\n  }\n  get links() {\n    return HTMLCollection.createImpl(this._globalObject, [], {\n      element: this,\n      query: () => domSymbolTree.treeToArray(this, {\n        filter: node => (node._localName === \"a\" || node._localName === \"area\") && node.hasAttributeNS(null, \"href\") && node._namespaceURI === HTML_NS\n      })\n    });\n  }\n  get forms() {\n    return this.getElementsByTagName(\"FORM\");\n  }\n  get scripts() {\n    return this.getElementsByTagName(\"SCRIPT\");\n  }\n  get anchors() {\n    return HTMLCollection.createImpl(this._globalObject, [], {\n      element: this,\n      query: () => domSymbolTree.treeToArray(this, {\n        filter: node => node._localName === \"a\" && node.hasAttributeNS(null, \"name\") && node._namespaceURI === HTML_NS\n      })\n    });\n  }\n\n  // The applets attribute must return an\n  // HTMLCollection rooted at the Document node,\n  // whose filter matches nothing.\n  // (It exists for historical reasons.)\n  get applets() {\n    return HTMLCollection.createImpl(this._globalObject, [], {\n      element: this,\n      query: () => []\n    });\n  }\n  open() {\n    let child = domSymbolTree.firstChild(this);\n    while (child) {\n      this.removeChild(child);\n      child = domSymbolTree.firstChild(this);\n    }\n    this._modified();\n    return this;\n  }\n  close(noQueue) {\n    // In some cases like when creating an empty iframe, I want to emit the\n    // events right away to avoid problems if later I asign the property src.\n    if (noQueue) {\n      this.readyState = \"complete\";\n      fireAnEvent(\"DOMContentLoaded\", this, undefined, {\n        bubbles: true\n      });\n      fireAnEvent(\"load\", this);\n      return;\n    }\n    this._queue.resume();\n    const dummyPromise = Promise.resolve();\n    const onDOMContentLoad = () => {\n      const doc = this;\n      function dispatchEvent() {\n        // https://html.spec.whatwg.org/#the-end\n        doc.readyState = \"interactive\";\n        fireAnEvent(\"DOMContentLoaded\", doc, undefined, {\n          bubbles: true\n        });\n      }\n      return new Promise(resolve => {\n        if (!this._deferQueue.tail) {\n          dispatchEvent();\n          resolve();\n          return;\n        }\n        this._deferQueue.setListener(() => {\n          dispatchEvent();\n          resolve();\n        });\n        this._deferQueue.resume();\n      });\n    };\n    const onLoad = () => {\n      const doc = this;\n      function dispatchEvent() {\n        doc.readyState = \"complete\";\n        fireAnEvent(\"load\", doc);\n      }\n      return new Promise(resolve => {\n        if (this._asyncQueue.count() === 0) {\n          dispatchEvent();\n          resolve();\n          return;\n        }\n        this._asyncQueue.setListener(() => {\n          dispatchEvent();\n          resolve();\n        });\n      });\n    };\n    this._queue.push(dummyPromise, onDOMContentLoad, null);\n    // Set the readyState to 'complete' once all resources are loaded.\n    // As a side-effect the document's load-event will be dispatched.\n    this._queue.push(dummyPromise, onLoad, null, true);\n  }\n  getElementsByName(elementName) {\n    return NodeList.createImpl(this._globalObject, [], {\n      element: this,\n      query: () => domSymbolTree.treeToArray(this, {\n        filter: node => node.getAttributeNS && node.getAttributeNS(null, \"name\") === elementName\n      })\n    });\n  }\n  get title() {\n    const {\n      documentElement\n    } = this;\n    let value = \"\";\n    if (documentElement && documentElement._localName === \"svg\") {\n      const svgTitleElement = firstChildWithLocalName(documentElement, \"title\", SVG_NS);\n      if (svgTitleElement) {\n        value = childTextContent(svgTitleElement);\n      }\n    } else {\n      const titleElement = firstDescendantWithLocalName(this, \"title\");\n      if (titleElement) {\n        value = childTextContent(titleElement);\n      }\n    }\n    value = stripAndCollapseASCIIWhitespace(value);\n    return value;\n  }\n  set title(value) {\n    const {\n      documentElement\n    } = this;\n    let element;\n    if (documentElement && documentElement._localName === \"svg\") {\n      element = firstChildWithLocalName(documentElement, \"title\", SVG_NS);\n      if (!element) {\n        element = this.createElementNS(SVG_NS, \"title\");\n        this._insert(element, documentElement.firstChild);\n      }\n      element.textContent = value;\n    } else if (documentElement && documentElement._namespaceURI === HTML_NS) {\n      const titleElement = firstDescendantWithLocalName(this, \"title\");\n      const headElement = this.head;\n      if (titleElement === null && headElement === null) {\n        return;\n      }\n      if (titleElement !== null) {\n        element = titleElement;\n      } else {\n        element = this.createElement(\"title\");\n        headElement._append(element);\n      }\n      element.textContent = value;\n    }\n  }\n  get dir() {\n    return this.documentElement ? this.documentElement.dir : \"\";\n  }\n  set dir(value) {\n    if (this.documentElement) {\n      this.documentElement.dir = value;\n    }\n  }\n  get head() {\n    return this.documentElement ? firstChildWithLocalName(this.documentElement, \"head\") : null;\n  }\n  get body() {\n    const {\n      documentElement\n    } = this;\n    if (!documentElement || documentElement._localName !== \"html\" || documentElement._namespaceURI !== HTML_NS) {\n      return null;\n    }\n    return firstChildWithLocalNames(this.documentElement, new Set([\"body\", \"frameset\"]));\n  }\n  set body(value) {\n    if (value === null || value._namespaceURI !== HTML_NS || value._localName !== \"body\" && value._localName !== \"frameset\") {\n      throw DOMException.create(this._globalObject, [\"Cannot set the body to null or a non-body/frameset element\", \"HierarchyRequestError\"]);\n    }\n    const bodyElement = this.body;\n    if (value === bodyElement) {\n      return;\n    }\n    if (bodyElement !== null) {\n      bodyElement.parentNode._replace(value, bodyElement);\n      return;\n    }\n    const {\n      documentElement\n    } = this;\n    if (documentElement === null) {\n      throw DOMException.create(this._globalObject, [\"Cannot set the body when there is no document element\", \"HierarchyRequestError\"]);\n    }\n    documentElement._append(value);\n  }\n  _runPreRemovingSteps(oldNode) {\n    // https://html.spec.whatwg.org/#focus-fixup-rule\n    if (oldNode === this.activeElement) {\n      this._lastFocusedElement = this.body;\n    }\n    for (const activeNodeIterator of this._workingNodeIterators) {\n      activeNodeIterator._preRemovingSteps(oldNode);\n    }\n  }\n  createEvent(type) {\n    const typeLower = type.toLowerCase();\n    const eventWrapper = eventInterfaceTable[typeLower] || null;\n    if (!eventWrapper) {\n      throw DOMException.create(this._globalObject, [\"The provided event type (\\\"\" + type + \"\\\") is invalid\", \"NotSupportedError\"]);\n    }\n    const impl = eventWrapper.createImpl(this._globalObject, [\"\"]);\n    impl._initializedFlag = false;\n    return impl;\n  }\n  createRange() {\n    return Range.createImpl(this._globalObject, [], {\n      start: {\n        node: this,\n        offset: 0\n      },\n      end: {\n        node: this,\n        offset: 0\n      }\n    });\n  }\n  createProcessingInstruction(target, data) {\n    validateName(this._globalObject, target);\n    if (data.includes(\"?>\")) {\n      throw DOMException.create(this._globalObject, [\"Processing instruction data cannot contain the string \\\"?>\\\"\", \"InvalidCharacterError\"]);\n    }\n    return ProcessingInstruction.createImpl(this._globalObject, [], {\n      ownerDocument: this,\n      target,\n      data\n    });\n  }\n\n  // https://dom.spec.whatwg.org/#dom-document-createcdatasection\n  createCDATASection(data) {\n    if (this._parsingMode === \"html\") {\n      throw DOMException.create(this._globalObject, [\"Cannot create CDATA sections in HTML documents\", \"NotSupportedError\"]);\n    }\n    if (data.includes(\"]]>\")) {\n      throw DOMException.create(this._globalObject, [\"CDATA section data cannot contain the string \\\"]]>\\\"\", \"InvalidCharacterError\"]);\n    }\n    return CDATASection.createImpl(this._globalObject, [], {\n      ownerDocument: this,\n      data\n    });\n  }\n  createTextNode(data) {\n    return Text.createImpl(this._globalObject, [], {\n      ownerDocument: this,\n      data\n    });\n  }\n  createComment(data) {\n    return Comment.createImpl(this._globalObject, [], {\n      ownerDocument: this,\n      data\n    });\n  }\n\n  // https://dom.spec.whatwg.org/#dom-document-createelement\n  createElement(localName, options) {\n    validateName(this._globalObject, localName);\n    if (this._parsingMode === \"html\") {\n      localName = asciiLowercase(localName);\n    }\n    let isValue = null;\n    if (options && options.is !== undefined) {\n      isValue = options.is;\n    }\n    const namespace = this._parsingMode === \"html\" || this.contentType === \"application/xhtml+xml\" ? HTML_NS : null;\n    return createElement(this, localName, namespace, null, isValue, true);\n  }\n\n  // https://dom.spec.whatwg.org/#dom-document-createelementns\n  createElementNS(namespace, qualifiedName, options) {\n    return internalCreateElementNSSteps(this, namespace, qualifiedName, options);\n  }\n  createDocumentFragment() {\n    return DocumentFragment.createImpl(this._globalObject, [], {\n      ownerDocument: this\n    });\n  }\n  createAttribute(localName) {\n    validateName(this._globalObject, localName);\n    if (this._parsingMode === \"html\") {\n      localName = asciiLowercase(localName);\n    }\n    return this._createAttribute({\n      localName\n    });\n  }\n  createAttributeNS(namespace, name) {\n    if (namespace === undefined) {\n      namespace = null;\n    }\n    namespace = namespace !== null ? String(namespace) : namespace;\n    const extracted = validateAndExtract(this._globalObject, namespace, name);\n    return this._createAttribute({\n      namespace: extracted.namespace,\n      namespacePrefix: extracted.prefix,\n      localName: extracted.localName\n    });\n  }\n\n  // Using this helper function rather than directly calling generatedAttr.createImpl may be preferred in some files,\n  // to avoid introducing a potentially cyclic dependency on generated/Attr.js.\n  _createAttribute(_ref) {\n    let {\n      localName,\n      value,\n      namespace,\n      namespacePrefix\n    } = _ref;\n    return generatedAttr.createImpl(this._globalObject, [], {\n      localName,\n      value,\n      namespace,\n      namespacePrefix,\n      ownerDocument: this\n    });\n  }\n  createTreeWalker(root, whatToShow, filter) {\n    return TreeWalker.createImpl(this._globalObject, [], {\n      root,\n      whatToShow,\n      filter\n    });\n  }\n  createNodeIterator(root, whatToShow, filter) {\n    const nodeIterator = NodeIterator.createImpl(this._globalObject, [], {\n      root,\n      whatToShow,\n      filter\n    });\n    if (hasWeakRefs) {\n      this._workingNodeIterators.add(nodeIterator);\n    } else {\n      this._workingNodeIterators.push(nodeIterator);\n      while (this._workingNodeIterators.length > 10) {\n        const toInactivate = this._workingNodeIterators.shift();\n        toInactivate._working = false;\n      }\n    }\n    return nodeIterator;\n  }\n  importNode(node, deep) {\n    if (node.nodeType === NODE_TYPE.DOCUMENT_NODE) {\n      throw DOMException.create(this._globalObject, [\"Cannot import a document node\", \"NotSupportedError\"]);\n    } else if (ShadowRoot.isImpl(node)) {\n      throw DOMException.create(this._globalObject, [\"Cannot adopt a shadow root\", \"NotSupportedError\"]);\n    }\n    return clone(node, this, deep);\n  }\n\n  // https://dom.spec.whatwg.org/#dom-document-adoptnode\n  adoptNode(node) {\n    if (node.nodeType === NODE_TYPE.DOCUMENT_NODE) {\n      throw DOMException.create(this._globalObject, [\"Cannot adopt a document node\", \"NotSupportedError\"]);\n    } else if (ShadowRoot.isImpl(node)) {\n      throw DOMException.create(this._globalObject, [\"Cannot adopt a shadow root\", \"HierarchyRequestError\"]);\n    }\n    this._adoptNode(node);\n    return node;\n  }\n\n  // https://dom.spec.whatwg.org/#concept-node-adopt\n  _adoptNode(node) {\n    const newDocument = this;\n    const oldDocument = node._ownerDocument;\n    const parent = domSymbolTree.parent(node);\n    if (parent) {\n      parent._remove(node);\n    }\n    if (oldDocument !== newDocument) {\n      for (const inclusiveDescendant of shadowIncludingInclusiveDescendantsIterator(node)) {\n        inclusiveDescendant._ownerDocument = newDocument;\n      }\n      for (const inclusiveDescendant of shadowIncludingInclusiveDescendantsIterator(node)) {\n        if (inclusiveDescendant._ceState === \"custom\") {\n          enqueueCECallbackReaction(inclusiveDescendant, \"adoptedCallback\", [idlUtils.wrapperForImpl(oldDocument), idlUtils.wrapperForImpl(newDocument)]);\n        }\n      }\n      for (const inclusiveDescendant of shadowIncludingInclusiveDescendantsIterator(node)) {\n        if (inclusiveDescendant._adoptingSteps) {\n          inclusiveDescendant._adoptingSteps(oldDocument);\n        }\n      }\n    }\n  }\n  get cookie() {\n    return this._cookieJar.getCookieStringSync(this.URL, {\n      http: false\n    });\n  }\n  set cookie(cookieStr) {\n    cookieStr = String(cookieStr);\n    this._cookieJar.setCookieSync(cookieStr, this.URL, {\n      http: false,\n      ignoreError: true\n    });\n  }\n\n  // The clear(), captureEvents(), and releaseEvents() methods must do nothing\n  clear() {}\n  captureEvents() {}\n  releaseEvents() {}\n  get styleSheets() {\n    if (!this._styleSheets) {\n      this._styleSheets = StyleSheetList.createImpl(this._globalObject);\n    }\n\n    // TODO: each style and link element should register its sheet on creation\n    // and remove it on removal.\n    return this._styleSheets;\n  }\n  get hidden() {\n    if (this._defaultView && this._defaultView._pretendToBeVisual) {\n      return false;\n    }\n    return true;\n  }\n  get visibilityState() {\n    if (this._defaultView && this._defaultView._pretendToBeVisual) {\n      return \"visible\";\n    }\n    return \"prerender\";\n  }\n\n  // https://w3c.github.io/selection-api/#extensions-to-document-interface\n  getSelection() {\n    return this._defaultView ? this._defaultView._selection : null;\n  }\n\n  // Needed to ensure that the resulting document has the correct prototype chain:\n  // https://dom.spec.whatwg.org/#concept-node-clone says \"that implements the same interfaces as node\".\n  _cloneDocument() {\n    const copy = documents.createImpl(this._globalObject, {\n      contentType: this.contentType,\n      encoding: this._encoding,\n      parsingMode: this._parsingMode\n    });\n    copy._URL = this._URL;\n    copy._origin = this._origin;\n    return copy;\n  }\n}\neventAccessors.createEventAccessor(DocumentImpl.prototype, \"readystatechange\");\nmixin(DocumentImpl.prototype, DocumentOrShadowRootImpl.prototype);\nmixin(DocumentImpl.prototype, GlobalEventHandlersImpl.prototype);\nmixin(DocumentImpl.prototype, NonElementParentNodeImpl.prototype);\nmixin(DocumentImpl.prototype, ParentNodeImpl.prototype);\nDocumentImpl.prototype.getElementsByTagName = memoizeQuery(function (qualifiedName) {\n  return listOfElementsWithQualifiedName(qualifiedName, this);\n});\nDocumentImpl.prototype.getElementsByTagNameNS = memoizeQuery(function (namespace, localName) {\n  return listOfElementsWithNamespaceAndLocalName(namespace, localName, this);\n});\nDocumentImpl.prototype.getElementsByClassName = memoizeQuery(function getElementsByClassName(classNames) {\n  return listOfElementsWithClassNames(classNames, this);\n});\nmodule.exports = {\n  implementation: DocumentImpl\n};","map":{"version":3,"names":["CookieJar","require","NodeImpl","implementation","idlUtils","NODE_TYPE","hasWeakRefs","mixin","memoizeQuery","firstChildWithLocalName","firstChildWithLocalNames","firstDescendantWithLocalName","whatwgURL","StyleSheetList","domSymbolTree","eventAccessors","asciiLowercase","stripAndCollapseASCIIWhitespace","childTextContent","HTML_NS","SVG_NS","DOMException","parseIntoDocument","History","Location","HTMLCollection","NodeList","validateName","name","validateAndExtract","fireAnEvent","shadowIncludingInclusiveDescendantsIterator","enqueueCECallbackReaction","createElement","internalCreateElementNSSteps","IterableWeakSet","DocumentOrShadowRootImpl","GlobalEventHandlersImpl","NonElementParentNodeImpl","ParentNodeImpl","clone","listOfElementsWithQualifiedName","listOfElementsWithNamespaceAndLocalName","listOfElementsWithClassNames","generatedAttr","Comment","ProcessingInstruction","CDATASection","Text","DocumentFragment","DOMImplementation","TreeWalker","NodeIterator","ShadowRoot","Range","documents","CustomEvent","ErrorEvent","Event","FocusEvent","HashChangeEvent","KeyboardEvent","MessageEvent","MouseEvent","PopStateEvent","ProgressEvent","TouchEvent","UIEvent","RequestManager","AsyncResourceQueue","ResourceQueue","PerDocumentResourceLoader","clearChildNodes","node","child","firstChild","removeChild","pad","number","toLastModifiedString","date","getMonth","getDate","getFullYear","getHours","getMinutes","getSeconds","eventInterfaceTable","customevent","errorevent","event","events","focusevent","hashchangeevent","htmlevents","keyboardevent","messageevent","mouseevent","mouseevents","popstateevent","progressevent","svgevents","touchevent","uievent","uievents","DocumentImpl","constructor","globalObject","args","privateData","_initGlobalEvents","_ownerDocument","nodeType","DOCUMENT_NODE","options","parsingMode","encoding","contentType","_parsingMode","_implementation","createImpl","_globalObject","ownerDocument","_defaultView","defaultView","_global","global","_ids","Object","create","_attached","_currentScript","_pageShowingFlag","_cookieJar","cookieJar","_parseOptions","parseOptions","_scriptingDisabled","scriptingDisabled","undefined","looseMode","scriptingEnabled","_encoding","urlOption","url","parsed","parseURL","TypeError","_URL","_origin","parentOrigin","serializeURLOrigin","_location","relevantDocument","_history","window","document","actAsIfLocationReloadCalled","reload","_workingNodeIterators","_referrer","referrer","_lastModified","lastModified","Date","_asyncQueue","_queue","asyncQueue","paused","_deferQueue","_requestManager","_currentDocumentReadiness","readyState","_lastFocusedElement","_resourceLoader","_latestEntry","_throwOnDynamicMarkupInsertionCounter","_getTheParent","type","implForWrapper","compatMode","doctype","charset","characterSet","inputEncoding","childNode","childrenIterator","DOCUMENT_TYPE_NODE","URL","serializeURL","documentURI","location","documentElement","ELEMENT_NODE","currentScript","state","hasFocus","Boolean","_descendantRemoved","parent","tagName","styleSheets","_remove","sheet","write","text","i","arguments","length","_writeAfterElement","tempDiv","innerHTML","previous","parentNode","nextSibling","_isMovingDueToDocumentWrite","insertBefore","lastChild","writeln","_len","Array","_key","getElementById","id","matchElement","find","candidate","root","images","getElementsByTagName","embeds","plugins","links","element","query","treeToArray","filter","_localName","hasAttributeNS","_namespaceURI","forms","scripts","anchors","applets","open","_modified","close","noQueue","bubbles","resume","dummyPromise","Promise","resolve","onDOMContentLoad","doc","dispatchEvent","tail","setListener","onLoad","count","push","getElementsByName","elementName","getAttributeNS","title","value","svgTitleElement","titleElement","createElementNS","_insert","textContent","headElement","head","_append","dir","body","Set","bodyElement","_replace","_runPreRemovingSteps","oldNode","activeElement","activeNodeIterator","_preRemovingSteps","createEvent","typeLower","toLowerCase","eventWrapper","impl","_initializedFlag","createRange","start","offset","end","createProcessingInstruction","target","data","includes","createCDATASection","createTextNode","createComment","localName","isValue","is","namespace","qualifiedName","createDocumentFragment","createAttribute","_createAttribute","createAttributeNS","String","extracted","namespacePrefix","prefix","_ref","createTreeWalker","whatToShow","createNodeIterator","nodeIterator","add","toInactivate","shift","_working","importNode","deep","isImpl","adoptNode","_adoptNode","newDocument","oldDocument","inclusiveDescendant","_ceState","wrapperForImpl","_adoptingSteps","cookie","getCookieStringSync","http","cookieStr","setCookieSync","ignoreError","clear","captureEvents","releaseEvents","_styleSheets","hidden","_pretendToBeVisual","visibilityState","getSelection","_selection","_cloneDocument","copy","createEventAccessor","prototype","getElementsByTagNameNS","getElementsByClassName","classNames","module","exports"],"sources":["C:/Users/noodp/Documents/GitHub/Pensionsrechner/client/node_modules/jsdom/lib/jsdom/living/nodes/Document-impl.js"],"sourcesContent":["\"use strict\";\r\n\r\nconst { CookieJar } = require(\"tough-cookie\");\r\n\r\nconst NodeImpl = require(\"./Node-impl\").implementation;\r\nconst idlUtils = require(\"../generated/utils\");\r\nconst NODE_TYPE = require(\"../node-type\");\r\nconst { hasWeakRefs, mixin, memoizeQuery } = require(\"../../utils\");\r\nconst { firstChildWithLocalName, firstChildWithLocalNames, firstDescendantWithLocalName } =\r\n  require(\"../helpers/traversal\");\r\nconst whatwgURL = require(\"whatwg-url\");\r\nconst StyleSheetList = require(\"../generated/StyleSheetList.js\");\r\nconst { domSymbolTree } = require(\"../helpers/internal-constants\");\r\nconst eventAccessors = require(\"../helpers/create-event-accessor\");\r\nconst { asciiLowercase, stripAndCollapseASCIIWhitespace } = require(\"../helpers/strings\");\r\nconst { childTextContent } = require(\"../helpers/text\");\r\nconst { HTML_NS, SVG_NS } = require(\"../helpers/namespaces\");\r\nconst DOMException = require(\"domexception/webidl2js-wrapper\");\r\nconst { parseIntoDocument } = require(\"../../browser/parser\");\r\nconst History = require(\"../generated/History\");\r\nconst Location = require(\"../generated/Location\");\r\nconst HTMLCollection = require(\"../generated/HTMLCollection\");\r\nconst NodeList = require(\"../generated/NodeList\");\r\nconst validateName = require(\"../helpers/validate-names\").name;\r\nconst { validateAndExtract } = require(\"../helpers/validate-names\");\r\nconst { fireAnEvent } = require(\"../helpers/events\");\r\nconst { shadowIncludingInclusiveDescendantsIterator } = require(\"../helpers/shadow-dom\");\r\nconst { enqueueCECallbackReaction } = require(\"../helpers/custom-elements\");\r\nconst { createElement, internalCreateElementNSSteps } = require(\"../helpers/create-element\");\r\nconst IterableWeakSet = require(\"../helpers/iterable-weak-set\");\r\n\r\nconst DocumentOrShadowRootImpl = require(\"./DocumentOrShadowRoot-impl\").implementation;\r\nconst GlobalEventHandlersImpl = require(\"./GlobalEventHandlers-impl\").implementation;\r\nconst NonElementParentNodeImpl = require(\"./NonElementParentNode-impl\").implementation;\r\nconst ParentNodeImpl = require(\"./ParentNode-impl\").implementation;\r\n\r\nconst { clone, listOfElementsWithQualifiedName, listOfElementsWithNamespaceAndLocalName,\r\n  listOfElementsWithClassNames } = require(\"../node\");\r\nconst generatedAttr = require(\"../generated/Attr\");\r\nconst Comment = require(\"../generated/Comment\");\r\nconst ProcessingInstruction = require(\"../generated/ProcessingInstruction\");\r\nconst CDATASection = require(\"../generated/CDATASection\");\r\nconst Text = require(\"../generated/Text\");\r\nconst DocumentFragment = require(\"../generated/DocumentFragment\");\r\nconst DOMImplementation = require(\"../generated/DOMImplementation\");\r\nconst TreeWalker = require(\"../generated/TreeWalker\");\r\nconst NodeIterator = require(\"../generated/NodeIterator\");\r\nconst ShadowRoot = require(\"../generated/ShadowRoot\");\r\nconst Range = require(\"../generated/Range\");\r\nconst documents = require(\"../documents.js\");\r\n\r\nconst CustomEvent = require(\"../generated/CustomEvent\");\r\nconst ErrorEvent = require(\"../generated/ErrorEvent\");\r\nconst Event = require(\"../generated/Event\");\r\nconst FocusEvent = require(\"../generated/FocusEvent\");\r\nconst HashChangeEvent = require(\"../generated/HashChangeEvent\");\r\nconst KeyboardEvent = require(\"../generated/KeyboardEvent\");\r\nconst MessageEvent = require(\"../generated/MessageEvent\");\r\nconst MouseEvent = require(\"../generated/MouseEvent\");\r\nconst PopStateEvent = require(\"../generated/PopStateEvent\");\r\nconst ProgressEvent = require(\"../generated/ProgressEvent\");\r\nconst TouchEvent = require(\"../generated/TouchEvent\");\r\nconst UIEvent = require(\"../generated/UIEvent\");\r\n\r\nconst RequestManager = require(\"../../browser/resources/request-manager\");\r\nconst AsyncResourceQueue = require(\"../../browser/resources/async-resource-queue\");\r\nconst ResourceQueue = require(\"../../browser/resources/resource-queue\");\r\nconst PerDocumentResourceLoader = require(\"../../browser/resources/per-document-resource-loader\");\r\n\r\nfunction clearChildNodes(node) {\r\n  for (let child = domSymbolTree.firstChild(node); child; child = domSymbolTree.firstChild(node)) {\r\n    node.removeChild(child);\r\n  }\r\n}\r\n\r\nfunction pad(number) {\r\n  if (number < 10) {\r\n    return \"0\" + number;\r\n  }\r\n  return number;\r\n}\r\n\r\nfunction toLastModifiedString(date) {\r\n  return pad(date.getMonth() + 1) +\r\n    \"/\" + pad(date.getDate()) +\r\n    \"/\" + date.getFullYear() +\r\n    \" \" + pad(date.getHours()) +\r\n    \":\" + pad(date.getMinutes()) +\r\n    \":\" + pad(date.getSeconds());\r\n}\r\n\r\nconst eventInterfaceTable = {\r\n  customevent: CustomEvent,\r\n  errorevent: ErrorEvent,\r\n  event: Event,\r\n  events: Event,\r\n  focusevent: FocusEvent,\r\n  hashchangeevent: HashChangeEvent,\r\n  htmlevents: Event,\r\n  keyboardevent: KeyboardEvent,\r\n  messageevent: MessageEvent,\r\n  mouseevent: MouseEvent,\r\n  mouseevents: MouseEvent,\r\n  popstateevent: PopStateEvent,\r\n  progressevent: ProgressEvent,\r\n  svgevents: Event,\r\n  touchevent: TouchEvent,\r\n  uievent: UIEvent,\r\n  uievents: UIEvent\r\n};\r\n\r\nclass DocumentImpl extends NodeImpl {\r\n  constructor(globalObject, args, privateData) {\r\n    super(globalObject, args, privateData);\r\n\r\n    this._initGlobalEvents();\r\n\r\n    this._ownerDocument = this;\r\n    this.nodeType = NODE_TYPE.DOCUMENT_NODE;\r\n    if (!privateData.options) {\r\n      privateData.options = {};\r\n    }\r\n    if (!privateData.options.parsingMode) {\r\n      privateData.options.parsingMode = \"xml\";\r\n    }\r\n    if (!privateData.options.encoding) {\r\n      privateData.options.encoding = \"UTF-8\";\r\n    }\r\n    if (!privateData.options.contentType) {\r\n      privateData.options.contentType = privateData.options.parsingMode === \"xml\" ? \"application/xml\" : \"text/html\";\r\n    }\r\n\r\n    this._parsingMode = privateData.options.parsingMode;\r\n\r\n    this._implementation = DOMImplementation.createImpl(this._globalObject, [], {\r\n      ownerDocument: this\r\n    });\r\n\r\n    this._defaultView = privateData.options.defaultView || null;\r\n    this._global = privateData.options.global;\r\n    this._ids = Object.create(null);\r\n    this._attached = true;\r\n    this._currentScript = null;\r\n    this._pageShowingFlag = false;\r\n    this._cookieJar = privateData.options.cookieJar;\r\n    this._parseOptions = privateData.options.parseOptions || {};\r\n    this._scriptingDisabled = privateData.options.scriptingDisabled;\r\n    if (this._cookieJar === undefined) {\r\n      this._cookieJar = new CookieJar(null, { looseMode: true });\r\n    }\r\n\r\n    if (this._scriptingDisabled) {\r\n      this._parseOptions.scriptingEnabled = false;\r\n    }\r\n\r\n    this.contentType = privateData.options.contentType;\r\n    this._encoding = privateData.options.encoding;\r\n\r\n    const urlOption = privateData.options.url === undefined ? \"about:blank\" : privateData.options.url;\r\n    const parsed = whatwgURL.parseURL(urlOption);\r\n    if (parsed === null) {\r\n      throw new TypeError(`Could not parse \"${urlOption}\" as a URL`);\r\n    }\r\n\r\n    this._URL = parsed;\r\n    this._origin = urlOption === \"about:blank\" && privateData.options.parentOrigin ?\r\n      privateData.options.parentOrigin :\r\n      whatwgURL.serializeURLOrigin(this._URL);\r\n\r\n    this._location = Location.createImpl(this._globalObject, [], { relevantDocument: this });\r\n    this._history = History.createImpl(this._globalObject, [], {\r\n      window: this._defaultView,\r\n      document: this,\r\n      actAsIfLocationReloadCalled: () => this._location.reload()\r\n    });\r\n\r\n    if (hasWeakRefs) {\r\n      this._workingNodeIterators = new IterableWeakSet();\r\n    } else {\r\n      this._workingNodeIterators = [];\r\n    }\r\n\r\n    this._referrer = privateData.options.referrer || \"\";\r\n    this._lastModified = toLastModifiedString(privateData.options.lastModified || new Date());\r\n    this._asyncQueue = new AsyncResourceQueue();\r\n    this._queue = new ResourceQueue({ asyncQueue: this._asyncQueue, paused: false });\r\n    this._deferQueue = new ResourceQueue({ paused: true });\r\n    this._requestManager = new RequestManager();\r\n    this._currentDocumentReadiness = privateData.options.readyState || \"loading\";\r\n\r\n    this._lastFocusedElement = null;\r\n\r\n    this._resourceLoader = new PerDocumentResourceLoader(this);\r\n\r\n    // Each Document in a browsing context can also have a latest entry. This is the entry for that Document\r\n    // to which the browsing context's session history was most recently traversed. When a Document is created,\r\n    // it initially has no latest entry.\r\n    this._latestEntry = null;\r\n\r\n    // https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#throw-on-dynamic-markup-insertion-counter\r\n    this._throwOnDynamicMarkupInsertionCounter = 0;\r\n  }\r\n\r\n  _getTheParent(event) {\r\n    if (event.type === \"load\" || !this._defaultView) {\r\n      return null;\r\n    }\r\n\r\n    return idlUtils.implForWrapper(this._defaultView);\r\n  }\r\n\r\n  get compatMode() {\r\n    return this._parsingMode === \"xml\" || this.doctype ? \"CSS1Compat\" : \"BackCompat\";\r\n  }\r\n  get charset() {\r\n    return this._encoding;\r\n  }\r\n  get characterSet() {\r\n    return this._encoding;\r\n  }\r\n  get inputEncoding() {\r\n    return this._encoding;\r\n  }\r\n  get doctype() {\r\n    for (const childNode of domSymbolTree.childrenIterator(this)) {\r\n      if (childNode.nodeType === NODE_TYPE.DOCUMENT_TYPE_NODE) {\r\n        return childNode;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n  get URL() {\r\n    return whatwgURL.serializeURL(this._URL);\r\n  }\r\n  get documentURI() {\r\n    return whatwgURL.serializeURL(this._URL);\r\n  }\r\n  get location() {\r\n    return this._defaultView ? this._location : null;\r\n  }\r\n\r\n  // https://dom.spec.whatwg.org/#dom-document-documentelement\r\n  get documentElement() {\r\n    for (const childNode of domSymbolTree.childrenIterator(this)) {\r\n      if (childNode.nodeType === NODE_TYPE.ELEMENT_NODE) {\r\n        return childNode;\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  get implementation() {\r\n    return this._implementation;\r\n  }\r\n  set implementation(implementation) {\r\n    this._implementation = implementation;\r\n  }\r\n\r\n  get defaultView() {\r\n    return this._defaultView;\r\n  }\r\n\r\n  get currentScript() {\r\n    return this._currentScript;\r\n  }\r\n\r\n  get readyState() {\r\n    return this._currentDocumentReadiness;\r\n  }\r\n\r\n  set readyState(state) {\r\n    this._currentDocumentReadiness = state;\r\n    fireAnEvent(\"readystatechange\", this);\r\n  }\r\n\r\n  hasFocus() {\r\n    return Boolean(this._lastFocusedElement);\r\n  }\r\n\r\n  _descendantRemoved(parent, child) {\r\n    if (child.tagName === \"STYLE\") {\r\n      this.styleSheets._remove(child.sheet);\r\n    }\r\n\r\n    super._descendantRemoved(parent, child);\r\n  }\r\n\r\n  write(...args) {\r\n    let text = \"\";\r\n    for (let i = 0; i < args.length; ++i) {\r\n      text += args[i];\r\n    }\r\n\r\n    if (this._parsingMode === \"xml\") {\r\n      throw DOMException.create(this._globalObject, [\r\n        \"Cannot use document.write on XML documents\",\r\n        \"InvalidStateError\"\r\n      ]);\r\n    }\r\n\r\n    if (this._throwOnDynamicMarkupInsertionCounter > 0) {\r\n      throw DOMException.create(this._globalObject, [\r\n        \"Cannot use document.write while a custom element upgrades\",\r\n        \"InvalidStateError\"\r\n      ]);\r\n    }\r\n\r\n    if (this._writeAfterElement) {\r\n      // If called from an script element directly (during the first tick),\r\n      // the new elements are inserted right after that element.\r\n      const tempDiv = this.createElement(\"div\");\r\n      tempDiv.innerHTML = text;\r\n\r\n      let child = tempDiv.firstChild;\r\n      let previous = this._writeAfterElement;\r\n      const parent = this._writeAfterElement.parentNode;\r\n\r\n      while (child) {\r\n        const node = child;\r\n        child = child.nextSibling;\r\n\r\n        node._isMovingDueToDocumentWrite = true; // hack for script execution\r\n        parent.insertBefore(node, previous.nextSibling);\r\n        node._isMovingDueToDocumentWrite = false;\r\n\r\n        previous = node;\r\n      }\r\n    } else if (this.readyState === \"loading\") {\r\n      // During page loading, document.write appends to the current element\r\n      // Find the last child that has been added to the document.\r\n      if (this.lastChild) {\r\n        let node = this;\r\n        while (node.lastChild && node.lastChild.nodeType === NODE_TYPE.ELEMENT_NODE) {\r\n          node = node.lastChild;\r\n        }\r\n        node.innerHTML = text;\r\n      } else {\r\n        clearChildNodes(this);\r\n        parseIntoDocument(text, this);\r\n      }\r\n    } else if (text) {\r\n      clearChildNodes(this);\r\n      parseIntoDocument(text, this);\r\n    }\r\n  }\r\n\r\n  writeln(...args) {\r\n    this.write(...args, \"\\n\");\r\n  }\r\n\r\n  // This is implemented separately for Document (which has a _ids cache) and DocumentFragment (which does not).\r\n  getElementById(id) {\r\n    if (!this._ids[id]) {\r\n      return null;\r\n    }\r\n\r\n    // Let's find the first element with where it's root is the document.\r\n    const matchElement = this._ids[id].find(candidate => {\r\n      let root = candidate;\r\n      while (domSymbolTree.parent(root)) {\r\n        root = domSymbolTree.parent(root);\r\n      }\r\n\r\n      return root === this;\r\n    });\r\n\r\n    return matchElement || null;\r\n  }\r\n\r\n  get referrer() {\r\n    return this._referrer || \"\";\r\n  }\r\n  get lastModified() {\r\n    return this._lastModified;\r\n  }\r\n  get images() {\r\n    return this.getElementsByTagName(\"IMG\");\r\n  }\r\n  get embeds() {\r\n    return this.getElementsByTagName(\"EMBED\");\r\n  }\r\n  get plugins() {\r\n    return this.embeds;\r\n  }\r\n  get links() {\r\n    return HTMLCollection.createImpl(this._globalObject, [], {\r\n      element: this,\r\n      query: () => domSymbolTree.treeToArray(this, {\r\n        filter: node => (node._localName === \"a\" || node._localName === \"area\") &&\r\n                        node.hasAttributeNS(null, \"href\") &&\r\n                        node._namespaceURI === HTML_NS\r\n      })\r\n    });\r\n  }\r\n  get forms() {\r\n    return this.getElementsByTagName(\"FORM\");\r\n  }\r\n  get scripts() {\r\n    return this.getElementsByTagName(\"SCRIPT\");\r\n  }\r\n  get anchors() {\r\n    return HTMLCollection.createImpl(this._globalObject, [], {\r\n      element: this,\r\n      query: () => domSymbolTree.treeToArray(this, {\r\n        filter: node => node._localName === \"a\" &&\r\n                        node.hasAttributeNS(null, \"name\") &&\r\n                        node._namespaceURI === HTML_NS\r\n      })\r\n    });\r\n  }\r\n\r\n  // The applets attribute must return an\r\n  // HTMLCollection rooted at the Document node,\r\n  // whose filter matches nothing.\r\n  // (It exists for historical reasons.)\r\n  get applets() {\r\n    return HTMLCollection.createImpl(this._globalObject, [], {\r\n      element: this,\r\n      query: () => []\r\n    });\r\n  }\r\n\r\n  open() {\r\n    let child = domSymbolTree.firstChild(this);\r\n    while (child) {\r\n      this.removeChild(child);\r\n      child = domSymbolTree.firstChild(this);\r\n    }\r\n    this._modified();\r\n    return this;\r\n  }\r\n  close(noQueue) {\r\n    // In some cases like when creating an empty iframe, I want to emit the\r\n    // events right away to avoid problems if later I asign the property src.\r\n    if (noQueue) {\r\n      this.readyState = \"complete\";\r\n\r\n      fireAnEvent(\"DOMContentLoaded\", this, undefined, { bubbles: true });\r\n      fireAnEvent(\"load\", this);\r\n\r\n      return;\r\n    }\r\n    this._queue.resume();\r\n\r\n    const dummyPromise = Promise.resolve();\r\n\r\n    const onDOMContentLoad = () => {\r\n      const doc = this;\r\n      function dispatchEvent() {\r\n        // https://html.spec.whatwg.org/#the-end\r\n        doc.readyState = \"interactive\";\r\n        fireAnEvent(\"DOMContentLoaded\", doc, undefined, { bubbles: true });\r\n      }\r\n\r\n      return new Promise(resolve => {\r\n        if (!this._deferQueue.tail) {\r\n          dispatchEvent();\r\n          resolve();\r\n          return;\r\n        }\r\n\r\n        this._deferQueue.setListener(() => {\r\n          dispatchEvent();\r\n          resolve();\r\n        });\r\n\r\n        this._deferQueue.resume();\r\n      });\r\n    };\r\n\r\n    const onLoad = () => {\r\n      const doc = this;\r\n      function dispatchEvent() {\r\n        doc.readyState = \"complete\";\r\n        fireAnEvent(\"load\", doc);\r\n      }\r\n\r\n      return new Promise(resolve => {\r\n        if (this._asyncQueue.count() === 0) {\r\n          dispatchEvent();\r\n          resolve();\r\n          return;\r\n        }\r\n\r\n        this._asyncQueue.setListener(() => {\r\n          dispatchEvent();\r\n          resolve();\r\n        });\r\n      });\r\n    };\r\n\r\n    this._queue.push(dummyPromise, onDOMContentLoad, null);\r\n    // Set the readyState to 'complete' once all resources are loaded.\r\n    // As a side-effect the document's load-event will be dispatched.\r\n    this._queue.push(dummyPromise, onLoad, null, true);\r\n  }\r\n\r\n  getElementsByName(elementName) {\r\n    return NodeList.createImpl(this._globalObject, [], {\r\n      element: this,\r\n      query: () => domSymbolTree.treeToArray(this, {\r\n        filter: node => node.getAttributeNS && node.getAttributeNS(null, \"name\") === elementName\r\n      })\r\n    });\r\n  }\r\n\r\n  get title() {\r\n    const { documentElement } = this;\r\n    let value = \"\";\r\n\r\n    if (documentElement && documentElement._localName === \"svg\") {\r\n      const svgTitleElement = firstChildWithLocalName(documentElement, \"title\", SVG_NS);\r\n\r\n      if (svgTitleElement) {\r\n        value = childTextContent(svgTitleElement);\r\n      }\r\n    } else {\r\n      const titleElement = firstDescendantWithLocalName(this, \"title\");\r\n\r\n      if (titleElement) {\r\n        value = childTextContent(titleElement);\r\n      }\r\n    }\r\n\r\n    value = stripAndCollapseASCIIWhitespace(value);\r\n\r\n    return value;\r\n  }\r\n\r\n  set title(value) {\r\n    const { documentElement } = this;\r\n    let element;\r\n\r\n    if (documentElement && documentElement._localName === \"svg\") {\r\n      element = firstChildWithLocalName(documentElement, \"title\", SVG_NS);\r\n\r\n      if (!element) {\r\n        element = this.createElementNS(SVG_NS, \"title\");\r\n\r\n        this._insert(element, documentElement.firstChild);\r\n      }\r\n\r\n      element.textContent = value;\r\n    } else if (documentElement && documentElement._namespaceURI === HTML_NS) {\r\n      const titleElement = firstDescendantWithLocalName(this, \"title\");\r\n      const headElement = this.head;\r\n\r\n      if (titleElement === null && headElement === null) {\r\n        return;\r\n      }\r\n\r\n      if (titleElement !== null) {\r\n        element = titleElement;\r\n      } else {\r\n        element = this.createElement(\"title\");\r\n        headElement._append(element);\r\n      }\r\n\r\n      element.textContent = value;\r\n    }\r\n  }\r\n\r\n  get dir() {\r\n    return this.documentElement ? this.documentElement.dir : \"\";\r\n  }\r\n  set dir(value) {\r\n    if (this.documentElement) {\r\n      this.documentElement.dir = value;\r\n    }\r\n  }\r\n\r\n  get head() {\r\n    return this.documentElement ? firstChildWithLocalName(this.documentElement, \"head\") : null;\r\n  }\r\n\r\n  get body() {\r\n    const { documentElement } = this;\r\n    if (!documentElement || documentElement._localName !== \"html\" ||\r\n        documentElement._namespaceURI !== HTML_NS) {\r\n      return null;\r\n    }\r\n\r\n    return firstChildWithLocalNames(this.documentElement, new Set([\"body\", \"frameset\"]));\r\n  }\r\n\r\n  set body(value) {\r\n    if (value === null ||\r\n        value._namespaceURI !== HTML_NS ||\r\n        (value._localName !== \"body\" && value._localName !== \"frameset\")) {\r\n      throw DOMException.create(this._globalObject, [\r\n        \"Cannot set the body to null or a non-body/frameset element\",\r\n        \"HierarchyRequestError\"\r\n      ]);\r\n    }\r\n\r\n    const bodyElement = this.body;\r\n    if (value === bodyElement) {\r\n      return;\r\n    }\r\n\r\n    if (bodyElement !== null) {\r\n      bodyElement.parentNode._replace(value, bodyElement);\r\n      return;\r\n    }\r\n\r\n    const { documentElement } = this;\r\n    if (documentElement === null) {\r\n      throw DOMException.create(this._globalObject, [\r\n        \"Cannot set the body when there is no document element\",\r\n        \"HierarchyRequestError\"\r\n      ]);\r\n    }\r\n\r\n    documentElement._append(value);\r\n  }\r\n\r\n  _runPreRemovingSteps(oldNode) {\r\n    // https://html.spec.whatwg.org/#focus-fixup-rule\r\n    if (oldNode === this.activeElement) {\r\n      this._lastFocusedElement = this.body;\r\n    }\r\n    for (const activeNodeIterator of this._workingNodeIterators) {\r\n      activeNodeIterator._preRemovingSteps(oldNode);\r\n    }\r\n  }\r\n\r\n  createEvent(type) {\r\n    const typeLower = type.toLowerCase();\r\n    const eventWrapper = eventInterfaceTable[typeLower] || null;\r\n\r\n    if (!eventWrapper) {\r\n      throw DOMException.create(this._globalObject, [\r\n        \"The provided event type (\\\"\" + type + \"\\\") is invalid\",\r\n        \"NotSupportedError\"\r\n      ]);\r\n    }\r\n\r\n    const impl = eventWrapper.createImpl(this._globalObject, [\"\"]);\r\n    impl._initializedFlag = false;\r\n    return impl;\r\n  }\r\n\r\n  createRange() {\r\n    return Range.createImpl(this._globalObject, [], {\r\n      start: { node: this, offset: 0 },\r\n      end: { node: this, offset: 0 }\r\n    });\r\n  }\r\n\r\n  createProcessingInstruction(target, data) {\r\n    validateName(this._globalObject, target);\r\n\r\n    if (data.includes(\"?>\")) {\r\n      throw DOMException.create(this._globalObject, [\r\n        \"Processing instruction data cannot contain the string \\\"?>\\\"\",\r\n        \"InvalidCharacterError\"\r\n      ]);\r\n    }\r\n\r\n    return ProcessingInstruction.createImpl(this._globalObject, [], {\r\n      ownerDocument: this,\r\n      target,\r\n      data\r\n    });\r\n  }\r\n\r\n  // https://dom.spec.whatwg.org/#dom-document-createcdatasection\r\n  createCDATASection(data) {\r\n    if (this._parsingMode === \"html\") {\r\n      throw DOMException.create(this._globalObject, [\r\n        \"Cannot create CDATA sections in HTML documents\",\r\n        \"NotSupportedError\"\r\n      ]);\r\n    }\r\n\r\n    if (data.includes(\"]]>\")) {\r\n      throw DOMException.create(this._globalObject, [\r\n        \"CDATA section data cannot contain the string \\\"]]>\\\"\",\r\n        \"InvalidCharacterError\"\r\n      ]);\r\n    }\r\n\r\n    return CDATASection.createImpl(this._globalObject, [], {\r\n      ownerDocument: this,\r\n      data\r\n    });\r\n  }\r\n\r\n  createTextNode(data) {\r\n    return Text.createImpl(this._globalObject, [], {\r\n      ownerDocument: this,\r\n      data\r\n    });\r\n  }\r\n\r\n  createComment(data) {\r\n    return Comment.createImpl(this._globalObject, [], {\r\n      ownerDocument: this,\r\n      data\r\n    });\r\n  }\r\n\r\n  // https://dom.spec.whatwg.org/#dom-document-createelement\r\n  createElement(localName, options) {\r\n    validateName(this._globalObject, localName);\r\n\r\n    if (this._parsingMode === \"html\") {\r\n      localName = asciiLowercase(localName);\r\n    }\r\n\r\n    let isValue = null;\r\n    if (options && options.is !== undefined) {\r\n      isValue = options.is;\r\n    }\r\n\r\n    const namespace = this._parsingMode === \"html\" || this.contentType === \"application/xhtml+xml\" ? HTML_NS : null;\r\n\r\n    return createElement(this, localName, namespace, null, isValue, true);\r\n  }\r\n\r\n  // https://dom.spec.whatwg.org/#dom-document-createelementns\r\n  createElementNS(namespace, qualifiedName, options) {\r\n    return internalCreateElementNSSteps(this, namespace, qualifiedName, options);\r\n  }\r\n\r\n  createDocumentFragment() {\r\n    return DocumentFragment.createImpl(this._globalObject, [], { ownerDocument: this });\r\n  }\r\n\r\n  createAttribute(localName) {\r\n    validateName(this._globalObject, localName);\r\n\r\n    if (this._parsingMode === \"html\") {\r\n      localName = asciiLowercase(localName);\r\n    }\r\n\r\n    return this._createAttribute({ localName });\r\n  }\r\n\r\n  createAttributeNS(namespace, name) {\r\n    if (namespace === undefined) {\r\n      namespace = null;\r\n    }\r\n    namespace = namespace !== null ? String(namespace) : namespace;\r\n\r\n    const extracted = validateAndExtract(this._globalObject, namespace, name);\r\n    return this._createAttribute({\r\n      namespace: extracted.namespace,\r\n      namespacePrefix: extracted.prefix,\r\n      localName: extracted.localName\r\n    });\r\n  }\r\n\r\n  // Using this helper function rather than directly calling generatedAttr.createImpl may be preferred in some files,\r\n  // to avoid introducing a potentially cyclic dependency on generated/Attr.js.\r\n  _createAttribute({\r\n    localName,\r\n    value,\r\n    namespace,\r\n    namespacePrefix\r\n  }) {\r\n    return generatedAttr.createImpl(this._globalObject, [], {\r\n      localName,\r\n      value,\r\n      namespace,\r\n      namespacePrefix,\r\n      ownerDocument: this\r\n    });\r\n  }\r\n\r\n  createTreeWalker(root, whatToShow, filter) {\r\n    return TreeWalker.createImpl(this._globalObject, [], { root, whatToShow, filter });\r\n  }\r\n\r\n  createNodeIterator(root, whatToShow, filter) {\r\n    const nodeIterator = NodeIterator.createImpl(this._globalObject, [], { root, whatToShow, filter });\r\n\r\n    if (hasWeakRefs) {\r\n      this._workingNodeIterators.add(nodeIterator);\r\n    } else {\r\n      this._workingNodeIterators.push(nodeIterator);\r\n      while (this._workingNodeIterators.length > 10) {\r\n        const toInactivate = this._workingNodeIterators.shift();\r\n        toInactivate._working = false;\r\n      }\r\n    }\r\n\r\n    return nodeIterator;\r\n  }\r\n\r\n  importNode(node, deep) {\r\n    if (node.nodeType === NODE_TYPE.DOCUMENT_NODE) {\r\n      throw DOMException.create(this._globalObject, [\r\n        \"Cannot import a document node\",\r\n        \"NotSupportedError\"\r\n      ]);\r\n    } else if (ShadowRoot.isImpl(node)) {\r\n      throw DOMException.create(this._globalObject, [\r\n        \"Cannot adopt a shadow root\",\r\n        \"NotSupportedError\"\r\n      ]);\r\n    }\r\n\r\n    return clone(node, this, deep);\r\n  }\r\n\r\n  // https://dom.spec.whatwg.org/#dom-document-adoptnode\r\n  adoptNode(node) {\r\n    if (node.nodeType === NODE_TYPE.DOCUMENT_NODE) {\r\n      throw DOMException.create(this._globalObject, [\r\n        \"Cannot adopt a document node\",\r\n        \"NotSupportedError\"\r\n      ]);\r\n    } else if (ShadowRoot.isImpl(node)) {\r\n      throw DOMException.create(this._globalObject, [\r\n        \"Cannot adopt a shadow root\",\r\n        \"HierarchyRequestError\"\r\n      ]);\r\n    }\r\n\r\n    this._adoptNode(node);\r\n\r\n    return node;\r\n  }\r\n\r\n  // https://dom.spec.whatwg.org/#concept-node-adopt\r\n  _adoptNode(node) {\r\n    const newDocument = this;\r\n    const oldDocument = node._ownerDocument;\r\n\r\n    const parent = domSymbolTree.parent(node);\r\n    if (parent) {\r\n      parent._remove(node);\r\n    }\r\n\r\n    if (oldDocument !== newDocument) {\r\n      for (const inclusiveDescendant of shadowIncludingInclusiveDescendantsIterator(node)) {\r\n        inclusiveDescendant._ownerDocument = newDocument;\r\n      }\r\n\r\n      for (const inclusiveDescendant of shadowIncludingInclusiveDescendantsIterator(node)) {\r\n        if (inclusiveDescendant._ceState === \"custom\") {\r\n          enqueueCECallbackReaction(inclusiveDescendant, \"adoptedCallback\", [\r\n            idlUtils.wrapperForImpl(oldDocument),\r\n            idlUtils.wrapperForImpl(newDocument)\r\n          ]);\r\n        }\r\n      }\r\n\r\n      for (const inclusiveDescendant of shadowIncludingInclusiveDescendantsIterator(node)) {\r\n        if (inclusiveDescendant._adoptingSteps) {\r\n          inclusiveDescendant._adoptingSteps(oldDocument);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  get cookie() {\r\n    return this._cookieJar.getCookieStringSync(this.URL, { http: false });\r\n  }\r\n  set cookie(cookieStr) {\r\n    cookieStr = String(cookieStr);\r\n    this._cookieJar.setCookieSync(cookieStr, this.URL, {\r\n      http: false,\r\n      ignoreError: true\r\n    });\r\n  }\r\n\r\n  // The clear(), captureEvents(), and releaseEvents() methods must do nothing\r\n  clear() {}\r\n\r\n  captureEvents() {}\r\n\r\n  releaseEvents() {}\r\n\r\n  get styleSheets() {\r\n    if (!this._styleSheets) {\r\n      this._styleSheets = StyleSheetList.createImpl(this._globalObject);\r\n    }\r\n\r\n    // TODO: each style and link element should register its sheet on creation\r\n    // and remove it on removal.\r\n    return this._styleSheets;\r\n  }\r\n\r\n  get hidden() {\r\n    if (this._defaultView && this._defaultView._pretendToBeVisual) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  get visibilityState() {\r\n    if (this._defaultView && this._defaultView._pretendToBeVisual) {\r\n      return \"visible\";\r\n    }\r\n\r\n    return \"prerender\";\r\n  }\r\n\r\n  // https://w3c.github.io/selection-api/#extensions-to-document-interface\r\n  getSelection() {\r\n    return this._defaultView ? this._defaultView._selection : null;\r\n  }\r\n\r\n  // Needed to ensure that the resulting document has the correct prototype chain:\r\n  // https://dom.spec.whatwg.org/#concept-node-clone says \"that implements the same interfaces as node\".\r\n  _cloneDocument() {\r\n    const copy = documents.createImpl(\r\n      this._globalObject,\r\n      {\r\n        contentType: this.contentType,\r\n        encoding: this._encoding,\r\n        parsingMode: this._parsingMode\r\n      }\r\n    );\r\n\r\n    copy._URL = this._URL;\r\n    copy._origin = this._origin;\r\n    return copy;\r\n  }\r\n}\r\n\r\neventAccessors.createEventAccessor(DocumentImpl.prototype, \"readystatechange\");\r\nmixin(DocumentImpl.prototype, DocumentOrShadowRootImpl.prototype);\r\nmixin(DocumentImpl.prototype, GlobalEventHandlersImpl.prototype);\r\nmixin(DocumentImpl.prototype, NonElementParentNodeImpl.prototype);\r\nmixin(DocumentImpl.prototype, ParentNodeImpl.prototype);\r\n\r\nDocumentImpl.prototype.getElementsByTagName = memoizeQuery(function (qualifiedName) {\r\n  return listOfElementsWithQualifiedName(qualifiedName, this);\r\n});\r\n\r\nDocumentImpl.prototype.getElementsByTagNameNS = memoizeQuery(function (namespace, localName) {\r\n  return listOfElementsWithNamespaceAndLocalName(namespace, localName, this);\r\n});\r\n\r\nDocumentImpl.prototype.getElementsByClassName = memoizeQuery(function getElementsByClassName(classNames) {\r\n  return listOfElementsWithClassNames(classNames, this);\r\n});\r\n\r\nmodule.exports = {\r\n  implementation: DocumentImpl\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}