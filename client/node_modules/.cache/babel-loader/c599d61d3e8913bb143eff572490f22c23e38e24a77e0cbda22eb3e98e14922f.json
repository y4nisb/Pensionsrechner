{"ast":null,"code":"\"use strict\";\n\nconst hasOwnProp = Object.prototype.hasOwnProperty;\nconst namedPropertiesTracker = require(\"../named-properties-tracker\");\nconst NODE_TYPE = require(\"./node-type\");\nconst HTMLCollection = require(\"./generated/HTMLCollection\");\nconst {\n  treeOrderSorter\n} = require(\"../utils\");\nconst idlUtils = require(\"./generated/utils\");\nfunction isNamedPropertyElement(element) {\n  // (for the name attribute)\n\n  // use hasOwnProperty to make sure contentWindow comes from the prototype,\n  // and is not set directly on the node by a script.\n  if (\"contentWindow\" in element && !hasOwnProp.call(element, \"contentWindow\")) {\n    return true;\n  }\n  switch (element.nodeName) {\n    case \"A\":\n    case \"AREA\":\n    case \"EMBED\":\n    case \"FORM\":\n    case \"FRAMESET\":\n    case \"IMG\":\n    case \"OBJECT\":\n      return true;\n    default:\n      return false;\n  }\n}\nfunction namedPropertyResolver(window, name, values) {\n  function getResult() {\n    const results = [];\n    for (const node of values().keys()) {\n      if (node.nodeType !== NODE_TYPE.ELEMENT_NODE) {\n        continue;\n      }\n      if (node.getAttributeNS(null, \"id\") === name) {\n        results.push(node);\n      } else if (node.getAttributeNS(null, \"name\") === name && isNamedPropertyElement(node)) {\n        results.push(node);\n      }\n    }\n    results.sort(treeOrderSorter);\n    return results;\n  }\n  const document = window._document;\n  const objects = HTMLCollection.create(window, [], {\n    element: idlUtils.implForWrapper(document.documentElement),\n    query: getResult\n  });\n  const {\n    length\n  } = objects;\n  for (let i = 0; i < length; ++i) {\n    const node = objects[i];\n    if (\"contentWindow\" in node && !hasOwnProp.call(node, \"contentWindow\") && node.getAttributeNS(null, \"name\") === name) {\n      return node.contentWindow;\n    }\n  }\n  if (length === 0) {\n    return undefined;\n  }\n  if (length === 1) {\n    return objects[0];\n  }\n  return objects;\n}\nexports.initializeWindow = function (window, windowProxy) {\n  namedPropertiesTracker.create(window, windowProxy, namedPropertyResolver.bind(null));\n};\nexports.elementAttributeModified = function (element, name, value, oldValue) {\n  if (!element._attached) {\n    return;\n  }\n  const useName = isNamedPropertyElement(element);\n  if (name === \"id\" || name === \"name\" && useName) {\n    const tracker = namedPropertiesTracker.get(element._ownerDocument._global);\n\n    // (tracker will be null if the document has no Window)\n    if (tracker) {\n      if (name === \"id\" && (!useName || element.getAttributeNS(null, \"name\") !== oldValue)) {\n        tracker.untrack(oldValue, element);\n      }\n      if (name === \"name\" && element.getAttributeNS(null, \"id\") !== oldValue) {\n        tracker.untrack(oldValue, element);\n      }\n      tracker.track(value, element);\n    }\n  }\n};\nexports.nodeAttachedToDocument = function (node) {\n  if (node.nodeType !== NODE_TYPE.ELEMENT_NODE) {\n    return;\n  }\n  const tracker = namedPropertiesTracker.get(node._ownerDocument._global);\n  if (!tracker) {\n    return;\n  }\n  tracker.track(node.getAttributeNS(null, \"id\"), node);\n  if (isNamedPropertyElement(node)) {\n    tracker.track(node.getAttributeNS(null, \"name\"), node);\n  }\n};\nexports.nodeDetachedFromDocument = function (node) {\n  if (node.nodeType !== NODE_TYPE.ELEMENT_NODE) {\n    return;\n  }\n  const tracker = namedPropertiesTracker.get(node._ownerDocument._global);\n  if (!tracker) {\n    return;\n  }\n  tracker.untrack(node.getAttributeNS(null, \"id\"), node);\n  if (isNamedPropertyElement(node)) {\n    tracker.untrack(node.getAttributeNS(null, \"name\"), node);\n  }\n};","map":{"version":3,"names":["hasOwnProp","Object","prototype","hasOwnProperty","namedPropertiesTracker","require","NODE_TYPE","HTMLCollection","treeOrderSorter","idlUtils","isNamedPropertyElement","element","call","nodeName","namedPropertyResolver","window","name","values","getResult","results","node","keys","nodeType","ELEMENT_NODE","getAttributeNS","push","sort","document","_document","objects","create","implForWrapper","documentElement","query","length","i","contentWindow","undefined","exports","initializeWindow","windowProxy","bind","elementAttributeModified","value","oldValue","_attached","useName","tracker","get","_ownerDocument","_global","untrack","track","nodeAttachedToDocument","nodeDetachedFromDocument"],"sources":["C:/Users/noodp/Documents/GitHub/Pensionsrechner/client/node_modules/jsdom/lib/jsdom/living/named-properties-window.js"],"sourcesContent":["\"use strict\";\r\nconst hasOwnProp = Object.prototype.hasOwnProperty;\r\nconst namedPropertiesTracker = require(\"../named-properties-tracker\");\r\nconst NODE_TYPE = require(\"./node-type\");\r\nconst HTMLCollection = require(\"./generated/HTMLCollection\");\r\nconst { treeOrderSorter } = require(\"../utils\");\r\nconst idlUtils = require(\"./generated/utils\");\r\n\r\nfunction isNamedPropertyElement(element) {\r\n  // (for the name attribute)\r\n\r\n  // use hasOwnProperty to make sure contentWindow comes from the prototype,\r\n  // and is not set directly on the node by a script.\r\n  if (\"contentWindow\" in element && !hasOwnProp.call(element, \"contentWindow\")) {\r\n    return true;\r\n  }\r\n\r\n  switch (element.nodeName) {\r\n    case \"A\":\r\n    case \"AREA\":\r\n    case \"EMBED\":\r\n    case \"FORM\":\r\n    case \"FRAMESET\":\r\n    case \"IMG\":\r\n    case \"OBJECT\":\r\n      return true;\r\n    default:\r\n      return false;\r\n  }\r\n}\r\n\r\nfunction namedPropertyResolver(window, name, values) {\r\n  function getResult() {\r\n    const results = [];\r\n\r\n    for (const node of values().keys()) {\r\n      if (node.nodeType !== NODE_TYPE.ELEMENT_NODE) {\r\n        continue;\r\n      }\r\n\r\n      if (node.getAttributeNS(null, \"id\") === name) {\r\n        results.push(node);\r\n      } else if (node.getAttributeNS(null, \"name\") === name && isNamedPropertyElement(node)) {\r\n        results.push(node);\r\n      }\r\n    }\r\n\r\n    results.sort(treeOrderSorter);\r\n\r\n    return results;\r\n  }\r\n\r\n  const document = window._document;\r\n  const objects = HTMLCollection.create(window, [], {\r\n    element: idlUtils.implForWrapper(document.documentElement),\r\n    query: getResult\r\n  });\r\n\r\n  const { length } = objects;\r\n  for (let i = 0; i < length; ++i) {\r\n    const node = objects[i];\r\n\r\n    if (\"contentWindow\" in node && !hasOwnProp.call(node, \"contentWindow\") &&\r\n       node.getAttributeNS(null, \"name\") === name) {\r\n      return node.contentWindow;\r\n    }\r\n  }\r\n\r\n  if (length === 0) {\r\n    return undefined;\r\n  }\r\n\r\n  if (length === 1) {\r\n    return objects[0];\r\n  }\r\n\r\n  return objects;\r\n}\r\n\r\nexports.initializeWindow = function (window, windowProxy) {\r\n  namedPropertiesTracker.create(window, windowProxy, namedPropertyResolver.bind(null));\r\n};\r\n\r\nexports.elementAttributeModified = function (element, name, value, oldValue) {\r\n  if (!element._attached) {\r\n    return;\r\n  }\r\n\r\n  const useName = isNamedPropertyElement(element);\r\n\r\n  if (name === \"id\" || (name === \"name\" && useName)) {\r\n    const tracker = namedPropertiesTracker.get(element._ownerDocument._global);\r\n\r\n    // (tracker will be null if the document has no Window)\r\n    if (tracker) {\r\n      if (name === \"id\" && (!useName || element.getAttributeNS(null, \"name\") !== oldValue)) {\r\n        tracker.untrack(oldValue, element);\r\n      }\r\n\r\n      if (name === \"name\" && element.getAttributeNS(null, \"id\") !== oldValue) {\r\n        tracker.untrack(oldValue, element);\r\n      }\r\n\r\n      tracker.track(value, element);\r\n    }\r\n  }\r\n};\r\n\r\nexports.nodeAttachedToDocument = function (node) {\r\n  if (node.nodeType !== NODE_TYPE.ELEMENT_NODE) {\r\n    return;\r\n  }\r\n\r\n  const tracker = namedPropertiesTracker.get(node._ownerDocument._global);\r\n  if (!tracker) {\r\n    return;\r\n  }\r\n\r\n  tracker.track(node.getAttributeNS(null, \"id\"), node);\r\n\r\n  if (isNamedPropertyElement(node)) {\r\n    tracker.track(node.getAttributeNS(null, \"name\"), node);\r\n  }\r\n};\r\n\r\nexports.nodeDetachedFromDocument = function (node) {\r\n  if (node.nodeType !== NODE_TYPE.ELEMENT_NODE) {\r\n    return;\r\n  }\r\n\r\n  const tracker = namedPropertiesTracker.get(node._ownerDocument._global);\r\n  if (!tracker) {\r\n    return;\r\n  }\r\n\r\n  tracker.untrack(node.getAttributeNS(null, \"id\"), node);\r\n\r\n  if (isNamedPropertyElement(node)) {\r\n    tracker.untrack(node.getAttributeNS(null, \"name\"), node);\r\n  }\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}